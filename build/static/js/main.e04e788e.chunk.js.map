{"version":3,"sources":["media/element/intro.jpg","media/image_scaled sync nonrecursive /.(png|jpe?g|svg|gif)$","media/image_scaled/age_adult.jpg","media/image_scaled/age_child.jpg","media/image_scaled/age_teen.jpg","media/image_scaled/balanceOfPower_balanced.jpg","media/image_scaled/balanceOfPower_hellish.jpg","media/image_scaled/balanceOfPower_idyll.jpg","media/image_scaled/balanceOfPower_natural.jpg","media/image_scaled/balanceOfPower_strained.jpg","media/image_scaled/body_heroic.jpg","media/image_scaled/body_normal.jpg","media/image_scaled/body_peak.jpg","media/image_scaled/geography_island.jpg","media/image_scaled/geography_megaWorld.jpg","media/image_scaled/geography_world.jpg","media/image_scaled/intro.jpg","media/image_scaled/magicPower_convenience.jpg","media/image_scaled/magicPower_heroic.jpg","media/image_scaled/magicPower_powerfull.jpg","media/image_scaled/magicPower_worldShattering.jpg","media/image_scaled/magicSituation_casual.jpg","media/image_scaled/magicSituation_feared.jpg","media/image_scaled/magicSituation_hidden.jpg","media/image_scaled/magicSituation_revered.jpg","media/image_scaled/magicSituation_worshipped.jpg","media/image_scaled/markings_demigod.jpg","media/image_scaled/markings_doom.jpg","media/image_scaled/markings_saviour.jpg","media/image_scaled/parents_abandoned.jpg","media/image_scaled/parents_highStatus.jpg","media/image_scaled/parents_random.jpg","media/image_scaled/parents_royalty.jpg","media/image_scaled/population_denslyPopulated.jpg","media/image_scaled/population_mediumPopulation.jpg","media/image_scaled/population_sparselyPopulated.jpg","media/image_scaled/species_custom.jpg","media/image_scaled/species_fantasy.jpg","media/image_scaled/species_humans.jpg","media/image_scaled/species_none.jpg","media/image_scaled/technology_prehistoric.jpg","media/image_scaled/technology_stoneAge.jpg","media/image_scaled/uniqueMagic.jpg","media/image_scaled/uniqueRace.jpg","pipe.js","pages/Checkbox.js","pages/Spinbox.js","propShapes.js","pages/AddChild.js","functions/getSelected.js","functions/getSelectedCount.js","userFunctions.js","functions/getUserFunctionValue.js","functions/isOptionDisabled.js","functions/getSubptions.js","functions/getOption.js","functions/helpers.js","pages/Delete.js","pages/SelectControls.js","pages/OptionControls.js","functions/getControlType.js","pages/Name.js","pages/Text.js","pages/Select.js","pages/Image.js","pages/CurrencyStats.js","pages/OptionCost.js","pages/OptionStats.js","containers/PathLink.js","containers/OptionLinks.js","containers/OptionFoot.js","pages/OptionBox.js","pages/DisabledOverlay.js","pages/Suboption.js","pages/SuboptionsPage.js","functions/getDepth.js","functions/getOptionInfo.js","functions/handlers.js","containers/SuboptionsContainer.js","pages/Option.js","pages/OptionsPage.js","containers/OptionsContainer.js","containers/OptionWideHead.js","pages/ReturnButton.js","containers/Breadcrumbs.js","containers/selectedOptions.js","containers/Menu.js","containers/Nav.js","functions/getCurrencies.js","App.js","containers/EnterSummaryMode.js","options.js","settings.js","reducer/prepareOptions.js","reducer/buyOption.js","reducer/sellOption.js","reducer/tradeOption.js","functions/forEachOption.js","reducer/findErrors.js","reducer/runUserFunctions.js","reducer/clearUserFunctions.js","reducer/recalculateState.js","reducer/calculateCurrency.js","reducer/createSyntheticOptions.js","reducer/changePath.js","store.js","index.js"],"names":["module","exports","map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","pipe","Checkbox","props","className","classNames","CheckboxSelected","selected","onClick","sell","buy","viewBox","d","handleBlur","setCurrentVal","event","value","Math","max","target","this","min","trade","Spinbox","useState","currenVal","useEffect","attr","type","onChange","onBlur","bind","onKeyDown","which","$","currentTarget","trigger","propShapes","userFunction","PropTypes","shape","isUserFunction","bool","functionId","number","any","text","oneOfType","node","currency","objectOf","name","string","currentValue","cost","object","option","oneOf","link","image","options","test","optionCurrency","hasIndividualChildren","individualOptions","childOptionCurrency","slug","path","isChild","isSynthetic","functionalChildren","AddChild","getSelected","suboptions","skipDisabled","undefined","getOption","suboption","disableUseAsSelect","push","filter","isOptionDisabled","getSelectedCount","getOwnPropertyNames","length","userFunctions","getUserFunctionValue","data","propName","state","parent","getParent","getSubptions","currentOptions","result","tempPath","Array","isArray","split","reverse","getReversedPath","clone","pop","JSON","parse","stringify","pathArray","isObject","getReadablePath","readableArray","i","slice","join","Delete","handleNextClick","detail","fromOptionControl","selectedId","selectable","includeEmpty","handlePrevClick","SelectControls","OptionControls","info","isDisabled","isSummaryMode","controls","optionInfo","controlType","selectedSuboptionId","selectableSuboptions","getControlType","Name","isChangeable","change","placeholder","Text","connect","disabledText","SelectDisabled","Image","src","style","backgroundImage","backgroundPositionY","cy","backgroundPositionX","cx","CurrencyStats","currencies","currencySlug","CurrencyStatPositive","key","OptionCost","costs","costSlug","OptionCostPositive","nextValue","Option","propTypes","OptionStats","fromLink","dispatch","scroll","window","scrollY","isChangingStage","previous","openLink","depth","disableOpenButton","getOpenLink","optionLink","getOptionLink","errors","error","getStastsFrom","func","OptionBox","DisabledOverlay","Suboption","OptionSelected","isSelected","OptionOpenable","isOpenable","SelectableSuboption","isSelectableSuboption","OptionHasImage","OptionDisabled","imageCx","imageCy","SuboptionsPage","fromSuboptions","children","getDepth","getSuboptions","getOptionInfo","showWhenDisabled","dontUseImageOfSelected","handleBuy","handleSell","handleTrade","handleChange","textProp","suboptionsElements","currentOption","handleClick","includes","controllClass","classes","OptionsPage","TransitionGroup","settings","optionsElements","CSSTransition","timeout","width","ReturnButton","usesStages","breadcrumbs","currentPath","optionName","Fragment","getBreadcrumbsPage","getValue","getCost","count","costPositive","getSelectedHierarchy","parentOption","concat","opened","setOpened","MenuOpened","currentCurrencies","assign","getCurrencies","addEventListener","addClass","setTimeout","remove","history","replaceState","onpopstate","fromHistory","r","getWideHead","images","obj","forEach","element","importAll","require","select","arr","def","condition","_is","values","prepend","_val","call","_isnt","intro","introImg","self","age","child","gold","teen","adult","parents","parents_random","abandoned","random","highStatus","royalty","body","normal","peak","heroic","focus","agility","balanced","strength","uniqueRace","markings","markings_demigod","saviour","demigod","doom","yourMagic","none","same","guaranteed","uniqueMagic","world","species","humans","fantasy","custom","geography","island","megaWorld","population","sparselyPopulated","mediumPopulation","denslyPopulated","balanceOfPower","idyll","natural","strained","hellish","technology","prehistoric","stoneAge","agricultural","bronzeAge","ironAge","ancient","medieval","industrial","modern","nearFuture","magicFrequency","few","rare","common","half","everyone","magicPower","convenience","powerfull","worldShattering","magicSituation","feared","hidden","casual","revered","worshipped","epilogue","sett","hideDisabledOptions","maxDepth","prepareSettings","getCurrencyName","searchedSlug","currencyGroup","replaceFunction","replaceFunctions","prepareOptions","imageName","replace","nextChildId","buyIndividualChild","childOptions","deepClone","$$typeof","toString","v","bObject","k","childCurrency","childName","defaultChildName","deselectSiblings","buyOption","buySyntheticOption","buySimpleChild","sellOption","tradeOption","tradeSyntheticOption","forEachOption","callback","prepareCallback","currentStage","findErrors","selectedCount","checkMinMaxSelected","checkOptionCurrencies","checkGlobalCurrencies","runUserFunctions","index","clearUserFunction","clearUserFunctions","checkCurrencies","calculateCurrency","currentValues","recalculateState","innerState","getInfo","syntheticOptions","createSyntheticOptions","checkStages","changePath","action","skipRecalculate","historyState","pushState","initialState","store","createStore","produce","newState","__REDUX_DEVTOOLS_EXTENSION__","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.e04e788e.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/intro.06194c14.jpg\";","var map = {\n\t\"./age_adult.jpg\": 49,\n\t\"./age_child.jpg\": 50,\n\t\"./age_teen.jpg\": 51,\n\t\"./balanceOfPower_balanced.jpg\": 52,\n\t\"./balanceOfPower_hellish.jpg\": 53,\n\t\"./balanceOfPower_idyll.jpg\": 54,\n\t\"./balanceOfPower_natural.jpg\": 55,\n\t\"./balanceOfPower_strained.jpg\": 56,\n\t\"./body_heroic.jpg\": 57,\n\t\"./body_normal.jpg\": 58,\n\t\"./body_peak.jpg\": 59,\n\t\"./geography_island.jpg\": 60,\n\t\"./geography_megaWorld.jpg\": 61,\n\t\"./geography_world.jpg\": 62,\n\t\"./intro.jpg\": 63,\n\t\"./magicPower_convenience.jpg\": 64,\n\t\"./magicPower_heroic.jpg\": 65,\n\t\"./magicPower_powerfull.jpg\": 66,\n\t\"./magicPower_worldShattering.jpg\": 67,\n\t\"./magicSituation_casual.jpg\": 68,\n\t\"./magicSituation_feared.jpg\": 69,\n\t\"./magicSituation_hidden.jpg\": 70,\n\t\"./magicSituation_revered.jpg\": 71,\n\t\"./magicSituation_worshipped.jpg\": 72,\n\t\"./markings_demigod.jpg\": 73,\n\t\"./markings_doom.jpg\": 74,\n\t\"./markings_saviour.jpg\": 75,\n\t\"./parents_abandoned.jpg\": 76,\n\t\"./parents_highStatus.jpg\": 77,\n\t\"./parents_random.jpg\": 78,\n\t\"./parents_royalty.jpg\": 79,\n\t\"./population_denslyPopulated.jpg\": 80,\n\t\"./population_mediumPopulation.jpg\": 81,\n\t\"./population_sparselyPopulated.jpg\": 82,\n\t\"./species_custom.jpg\": 83,\n\t\"./species_fantasy.jpg\": 84,\n\t\"./species_humans.jpg\": 85,\n\t\"./species_none.jpg\": 86,\n\t\"./technology_prehistoric.jpg\": 87,\n\t\"./technology_stoneAge.jpg\": 88,\n\t\"./uniqueMagic.jpg\": 89,\n\t\"./uniqueRace.jpg\": 90\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 48;","module.exports = __webpack_public_path__ + \"static/media/age_adult.fc86563e.jpg\";","module.exports = __webpack_public_path__ + \"static/media/age_child.7c458804.jpg\";","module.exports = __webpack_public_path__ + \"static/media/age_teen.02ee5fb6.jpg\";","module.exports = __webpack_public_path__ + \"static/media/balanceOfPower_balanced.052010a1.jpg\";","module.exports = __webpack_public_path__ + \"static/media/balanceOfPower_hellish.a10d0c62.jpg\";","module.exports = __webpack_public_path__ + \"static/media/balanceOfPower_idyll.89ff8f19.jpg\";","module.exports = __webpack_public_path__ + \"static/media/balanceOfPower_natural.49737ff3.jpg\";","module.exports = __webpack_public_path__ + \"static/media/balanceOfPower_strained.822db632.jpg\";","module.exports = __webpack_public_path__ + \"static/media/body_heroic.5eb907cc.jpg\";","module.exports = __webpack_public_path__ + \"static/media/body_normal.f11b8203.jpg\";","module.exports = __webpack_public_path__ + \"static/media/body_peak.c2c1cb88.jpg\";","module.exports = __webpack_public_path__ + \"static/media/geography_island.ba3ef13f.jpg\";","module.exports = __webpack_public_path__ + \"static/media/geography_megaWorld.12f48870.jpg\";","module.exports = __webpack_public_path__ + \"static/media/geography_world.38b9d24c.jpg\";","module.exports = __webpack_public_path__ + \"static/media/intro.b7b8affc.jpg\";","module.exports = __webpack_public_path__ + \"static/media/magicPower_convenience.eb652fd9.jpg\";","module.exports = __webpack_public_path__ + \"static/media/magicPower_heroic.a6dfdead.jpg\";","module.exports = __webpack_public_path__ + \"static/media/magicPower_powerfull.1656b12c.jpg\";","module.exports = __webpack_public_path__ + \"static/media/magicPower_worldShattering.8800eca2.jpg\";","module.exports = __webpack_public_path__ + \"static/media/magicSituation_casual.b7641aa4.jpg\";","module.exports = __webpack_public_path__ + \"static/media/magicSituation_feared.7a119553.jpg\";","module.exports = __webpack_public_path__ + \"static/media/magicSituation_hidden.cdfac04f.jpg\";","module.exports = __webpack_public_path__ + \"static/media/magicSituation_revered.e5b37e5c.jpg\";","module.exports = __webpack_public_path__ + \"static/media/magicSituation_worshipped.a575695d.jpg\";","module.exports = __webpack_public_path__ + \"static/media/markings_demigod.b0bc3a86.jpg\";","module.exports = __webpack_public_path__ + \"static/media/markings_doom.d61d696b.jpg\";","module.exports = __webpack_public_path__ + \"static/media/markings_saviour.5bba0f7c.jpg\";","module.exports = __webpack_public_path__ + \"static/media/parents_abandoned.46490d23.jpg\";","module.exports = __webpack_public_path__ + \"static/media/parents_highStatus.3943ec18.jpg\";","module.exports = __webpack_public_path__ + \"static/media/parents_random.62ee246b.jpg\";","module.exports = __webpack_public_path__ + \"static/media/parents_royalty.303deda0.jpg\";","module.exports = __webpack_public_path__ + \"static/media/population_denslyPopulated.bac216f6.jpg\";","module.exports = __webpack_public_path__ + \"static/media/population_mediumPopulation.e2f11b36.jpg\";","module.exports = __webpack_public_path__ + \"static/media/population_sparselyPopulated.eef30694.jpg\";","module.exports = __webpack_public_path__ + \"static/media/species_custom.8a499bdc.jpg\";","module.exports = __webpack_public_path__ + \"static/media/species_fantasy.01f5beb5.jpg\";","module.exports = __webpack_public_path__ + \"static/media/species_humans.04039750.jpg\";","module.exports = __webpack_public_path__ + \"static/media/species_none.f2781cff.jpg\";","module.exports = __webpack_public_path__ + \"static/media/technology_prehistoric.76c81ad3.jpg\";","module.exports = __webpack_public_path__ + \"static/media/technology_stoneAge.9120001b.jpg\";","module.exports = __webpack_public_path__ + \"static/media/uniqueMagic.36c91ecf.jpg\";","module.exports = __webpack_public_path__ + \"static/media/uniqueRace.302a8a44.jpg\";","const pipe = {};\r\n\r\nexport default pipe;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nfunction Checkbox(props) {\r\n  return <div\r\n    className={classNames(\r\n      \"Checkbox\",\r\n      { CheckboxSelected: props.selected }\r\n    )}\r\n    onClick={() => {\r\n      if (props.selected) props.sell();\r\n      else props.buy();\r\n    }}\r\n  >\r\n    <svg viewBox=\"0 0 100 100\">\r\n      <path d=\"M17 53L42 83L77 23\" />\r\n    </svg>\r\n  </div>\r\n}\r\n\r\nCheckbox.propTypes = {\r\n  selected: PropTypes.bool,\r\n  sell: PropTypes.func,\r\n  buy: PropTypes.func,\r\n};\r\n\r\nexport default Checkbox;","import React, { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport $ from 'cash-dom';\r\n\r\nfunction handleBlur(setCurrentVal, event) {\r\n  let value = Math.max(event.target.value, this.min);\r\n  if (this.max !== false) value = Math.min(value, this.max);\r\n  setCurrentVal(value);\r\n  this.trade(value);\r\n}\r\n\r\nfunction Spinbox(props) {\r\n  const [currenVal, setCurrentVal] = useState(props.selected);\r\n  useEffect(() => {\r\n    setCurrentVal(props.selected);\r\n  }, [props.selected]);\r\n\r\n  const attr = {};\r\n  if (props.max !== false) attr.max = props.max;\r\n  return <div className=\"Spinbox\">\r\n    <button onClick={props.sell}>\r\n      <svg viewBox=\"0 0 100 100\">\r\n        <path d=\"M20 50L80 50\" />\r\n      </svg>\r\n    </button>\r\n    <input\r\n      type=\"number\"\r\n      value={currenVal}\r\n      min={props.min}\r\n      {...attr}\r\n      onChange={event => setCurrentVal(event.target.value)}\r\n      onBlur={handleBlur.bind(props, setCurrentVal)}\r\n      onKeyDown={event => {\r\n        if (event.which === 13) {\r\n          $(event.currentTarget).trigger('blur');\r\n        }\r\n      }}\r\n    />\r\n    <button onClick={props.buy}>\r\n      <svg viewBox=\"0 0 100 100\">\r\n        <path d=\"M20 50L80 50\" />\r\n        <path d=\"M50 20L50 80\" />\r\n      </svg>\r\n    </button>\r\n  </div>\r\n}\r\n\r\nSpinbox.propTypes = {\r\n  selected: PropTypes.number,\r\n  sell: PropTypes.func,\r\n  buy: PropTypes.func,\r\n  trade: PropTypes.func,\r\n  min: PropTypes.number,\r\n  max: PropTypes.oneOfType([\r\n    PropTypes.number,\r\n    PropTypes.bool,\r\n  ]),\r\n};\r\n\r\nexport default Spinbox;","import PropTypes from 'prop-types';\r\n\r\nconst propShapes = {};\r\n\r\npropShapes.userFunction = PropTypes.shape({\r\n  isUserFunction: PropTypes.bool,\r\n  functionId: PropTypes.number,\r\n  value: PropTypes.any,\r\n});\r\n\r\npropShapes.text = PropTypes.oneOfType([\r\n  PropTypes.node,\r\n  propShapes.userFunction,\r\n]);\r\n\r\npropShapes.currency = PropTypes.objectOf(PropTypes.shape({\r\n  name: PropTypes.string,\r\n  value: PropTypes.number,\r\n  currentValue: PropTypes.number,\r\n}));\r\n\r\npropShapes.cost = PropTypes.objectOf(PropTypes.object);\r\n\r\npropShapes.option = PropTypes.shape({\r\n  type: PropTypes.oneOf(['option', 'group', 'story', 'optionsContainer']),\r\n  name: PropTypes.node,\r\n  text: propShapes.text,\r\n  link: PropTypes.string,\r\n  min: PropTypes.number,\r\n  max: PropTypes.oneOfType([\r\n    PropTypes.number,\r\n    PropTypes.bool,\r\n  ]),\r\n  image: PropTypes.string,\r\n  cost: propShapes.cost,\r\n  options: PropTypes.object,\r\n  test: propShapes.userFunction,\r\n  optionCurrency: propShapes.currency,\r\n  hasIndividualChildren: PropTypes.bool,\r\n  individualOptions: PropTypes.object,\r\n  childOptionCurrency: propShapes.currency,\r\n  slug: PropTypes.string,\r\n  path: PropTypes.string,\r\n  selected: PropTypes.oneOfType([\r\n    PropTypes.number,\r\n    PropTypes.objectOf(PropTypes.object),\r\n  ]),\r\n  isChild: PropTypes.bool,\r\n  isSynthetic: PropTypes.bool,\r\n  functionalChildren: PropTypes.object,\r\n});\r\n\r\nexport default propShapes;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nfunction AddChild(props) {\r\n  return <div\r\n    className=\"AddChild\"\r\n    onClick={props.buy}\r\n  >\r\n    add new\r\n  </div>\r\n}\r\n\r\nAddChild.propTypes = {\r\n  buy: PropTypes.func,\r\n};\r\n\r\nexport default AddChild;","import getOption from \"./getOption\";\r\nimport isOptionDisabled from \"./isOptionDisabled\";\r\n\r\nexport default function getSelected(option, options, skipDisabled = false) {\r\n\r\n  const selected = [];\r\n  let suboptions;\r\n  if (option.options !== undefined && option.options.isUserFunction) {\r\n    suboptions = option.functionalChildren;\r\n  }\r\n  else {\r\n    option = getOption(option, options);\r\n    if (option.options === undefined) return false;\r\n    suboptions = option.options;\r\n  }\r\n\r\n  for (const slug in suboptions) {\r\n    const suboption = suboptions[slug];\r\n    if (\r\n      suboption.type === 'option' &&\r\n      suboption.max === 1 &&\r\n      !suboption.disableUseAsSelect &&\r\n      suboption.selected\r\n    ) {\r\n      selected.push(suboption);\r\n    }\r\n  }\r\n\r\n  if (skipDisabled) {\r\n    return selected.filter(suboption => !isOptionDisabled(suboption, options));\r\n  }\r\n  return selected;\r\n}\r\n","import isOptionDisabled from \"./isOptionDisabled\";\r\nimport getSelected from \"./getSelected\";\r\n\r\nexport default function getSelectedCount(option, options) {\r\n  if (isOptionDisabled(option, options)) return false;\r\n\r\n  if (option.type === 'option') {\r\n    if (typeof option.selected === 'number') return option.selected;\r\n    return Object.getOwnPropertyNames(option.selected).length;\r\n  }\r\n  return getSelected(option, options, true).length;\r\n}\r\n","const userFunctions = [];\r\n\r\nexport default userFunctions;","import userFunctions from \"./../userFunctions\";\r\nimport pipe from './../pipe';\r\n\r\nexport default function getUserFunctionValue(userFunction, data, propName = 'value') {\r\n  if (userFunction === undefined) return undefined;\r\n  if (!userFunction.isUserFunction) return userFunction;\r\n\r\n  if (propName === false) {\r\n    return userFunctions[userFunction.functionId]({\r\n      ...data,\r\n      ...pipe.state\r\n    });\r\n  }\r\n\r\n  if (userFunction[propName] === undefined) {\r\n    userFunction[propName] = userFunctions[userFunction.functionId]({\r\n      ...data,\r\n      ...pipe.state\r\n    });\r\n  }\r\n\r\n  return userFunction[propName];\r\n}\r\n","import getSelectedCount from \"./getSelectedCount\";\r\nimport getUserFunctionValue from \"./getUserFunctionValue\";\r\nimport { getParent } from \"./helpers\";\r\n\r\nexport default function isOptionDisabled(option, options) {\r\n  const parent = getParent(option, options);\r\n  if (parent) {\r\n    if (isOptionDisabled(parent, options)) return true;\r\n    if (parent.type === 'option') {\r\n      if (getSelectedCount(parent, options) === 0) return true;\r\n    }\r\n  }\r\n  if (option.test !== undefined) {\r\n    return !getUserFunctionValue(option.test, { option });\r\n  }\r\n  return false;\r\n}\r\n","import isOptionDisabled from './isOptionDisabled';\r\n\r\n/**\r\n * Finds suboptions, children or synthetic suboptions of the given option.\r\n * @param {object} option Option to get suboptions of.\r\n * @param {object} options Global options.\r\n * @param {boolean} skipDisabled Remove disabled options from the return value.\r\n * @returns {object} An object containing suboptions, or an empty object.\r\n */\r\nexport default function getSubptions(option, options, skipDisabled = false) {\r\n  let currentOptions;\r\n  if (option.hasIndividualChildren) {\r\n    currentOptions = option.selected;\r\n  }\r\n  else if (option.options !== undefined && option.options.isUserFunction) {\r\n    currentOptions = option.functionalChildren;\r\n  }\r\n  else {\r\n    currentOptions = option.options;\r\n  }\r\n  if (!currentOptions) return {};\r\n\r\n  if (skipDisabled) {\r\n    const result = {};\r\n    for (const slug in currentOptions) {\r\n      if (isOptionDisabled(currentOptions[slug], options))\r\n        continue;\r\n      result[slug] = currentOptions[slug];\r\n    }\r\n    return result;\r\n  }\r\n  return currentOptions;\r\n}\r\n","import getSubptions from \"./getSubptions\";\r\nimport { clone } from \"./helpers\";\r\n\r\nfunction getReversedPath(path) {\r\n  if (typeof path === 'object') {\r\n    if (!Array.isArray(path)) {\r\n      path = path.path.split('/');\r\n    }\r\n  }\r\n  else {\r\n    path = path.split('/');\r\n  }\r\n  return path.reverse().filter(e => e !== '');\r\n}\r\n\r\n/**\r\n * Gets options from the options object\r\n * @param {Array | Object} path \r\n * @param {Object} options \r\n */\r\nexport default function getOption(path, options) {\r\n  const tempPath = getReversedPath(clone(path));\r\n\r\n  let option = { options };\r\n  while (tempPath.length) {\r\n    option = getSubptions(option, options)[tempPath.pop()];\r\n  }\r\n  return option;\r\n}\r\n","import getOption from \"./getOption\";\r\n\r\nexport function clone(object) {\r\n  return JSON.parse(JSON.stringify(object));\r\n}\r\n\r\nexport function deepClone(object) {\r\n  if (\r\n    !object ||\r\n    (\r\n      object.$$typeof !== undefined &&\r\n      object.$$typeof.toString() === 'Symbol(react.element)'\r\n    )\r\n  ) return object;\r\n\r\n  let v;\r\n  let bObject = Array.isArray(object) ? [] : {};\r\n  for (const k in object) {\r\n    v = object[k];\r\n    bObject[k] = (typeof v === \"object\") ? deepClone(v) : v;\r\n  }\r\n\r\n  return bObject;\r\n}\r\n\r\nexport function getParent(option, options) {\r\n  let pathArray = option.path.split('/');\r\n  if (pathArray.length <= 1) return false;\r\n  pathArray.pop();\r\n  return getOption(pathArray, options);\r\n}\r\n\r\n/**\r\n * Checks if the provided value is an object.\r\n * @param {*} value Value to be checked.\r\n * @returns {bool} `true` if `value` was an object. `false` otheriwise.\r\n */\r\nexport function isObject(value) {\r\n  if (value === null) return false;\r\n  return ((typeof value === 'function') || (typeof value === 'object'));\r\n}\r\n\r\n/**\r\n * Transforms path into a nice readable form.\r\n * @param {string} path Path to transform.\r\n * @param {object} options Global options.\r\n */\r\nexport function getReadablePath(path, options) {\r\n  const pathArray = path.split('/');\r\n  const readableArray = [];\r\n  for (let i = 0; i < pathArray.length; i++) {\r\n    readableArray.push(getOption(pathArray.slice(0, i + 1), options).name);\r\n  }\r\n  return readableArray.join(' / ');\r\n}","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nfunction Delete(props) {\r\n  return <div\r\n    className=\"Delete\"\r\n    onClick={props.sell}\r\n  >\r\n    <svg viewBox=\"0 0 100 100\">\r\n      <path d=\"M20 20L80 80\" />\r\n      <path d=\"M20 80L80 20\" />\r\n    </svg>\r\n  </div>\r\n}\r\n\r\nDelete.propTypes = {\r\n  sell: PropTypes.func,\r\n};\r\n\r\nexport default Delete;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport propShapes from './../propShapes';\r\nimport { isObject } from '../functions/helpers';\r\n\r\nfunction handleNextClick(props, event) {\r\n  if (!isObject(event.detail)) event.detail = {};\r\n  event.detail.fromOptionControl = true;\r\n\r\n  if (props.selectedId === undefined) {\r\n    props.buy(props.selectable[0]);\r\n    return;\r\n  }\r\n\r\n  if (props.selectedId < props.selectable.length - 1) {\r\n    props.buy(props.selectable[props.selectedId + 1]);\r\n  }\r\n  else if (!props.includeEmpty) {\r\n    props.buy(props.selectable[0]);\r\n  }\r\n  else {\r\n    props.sell(props.selectable[props.selectedId]);\r\n  }\r\n}\r\n\r\nfunction handlePrevClick(props, event) {\r\n  if (!isObject(event.detail)) event.detail = {};\r\n  event.detail.fromOptionControl = true;\r\n\r\n  if (props.selectedId === undefined) {\r\n    props.buy(props.selectable[props.selectable.length - 1]);\r\n    return;\r\n  }\r\n\r\n  if (props.selectedId > 0) {\r\n    props.buy(props.selectable[props.selectedId - 1]);\r\n  }\r\n  else if (!props.includeEmpty) {\r\n    props.buy(props.selectable[props.selectable.length - 1]);\r\n  }\r\n  else {\r\n    props.sell(props.selectable[props.selectedId]);\r\n  }\r\n}\r\n\r\nfunction SelectControls(props) {\r\n  let name = 'none';\r\n  if (props.selectedId !== undefined) {\r\n    name = props.selectable[props.selectedId].name;\r\n  }\r\n\r\n  return <div className=\"SelectControls\">\r\n    <button onClick={handlePrevClick.bind(null, props)}>\r\n      <svg viewBox=\"0 0 100 100\">\r\n        <path d=\"M70 10L10 50L70 90z\" />\r\n      </svg>\r\n    </button>\r\n    <div className=\"SelectControlsCurrent\">{name}</div>\r\n    <button onClick={handleNextClick.bind(null, props)}>\r\n      <svg viewBox=\"0 0 100 100\">\r\n        <path d=\"M30 10L90 50L30 90z\" />\r\n      </svg>\r\n    </button>\r\n  </div>\r\n}\r\n\r\nSelectControls.propTypes = {\r\n  selectedId: PropTypes.number,\r\n  selectable: PropTypes.arrayOf(propShapes.option),\r\n  sell: PropTypes.func,\r\n  buy: PropTypes.func,\r\n  includeEmpty: PropTypes.bool,\r\n};\r\n\r\nexport default SelectControls;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Checkbox from './Checkbox';\r\nimport Spinbox from './Spinbox';\r\nimport propShapes from '../propShapes';\r\nimport AddChild from './AddChild';\r\nimport { isObject } from '../functions/helpers';\r\nimport Delete from './Delete';\r\nimport SelectControls from './SelectControls';\r\n\r\nfunction OptionControls(props) {\r\n  if (\r\n    props.option.info.isDisabled ||\r\n    props.isSummaryMode\r\n  ) return false;\r\n  let controls;\r\n  switch (props.optionInfo.controlType) {\r\n    case 'checkbox':\r\n      controls = <Checkbox\r\n        selected={!!props.option.selected}\r\n        sell={props.sell.bind(null, props.option)}\r\n        buy={props.buy.bind(null, props.option)}\r\n      />;\r\n      break;\r\n    case 'spinbox':\r\n      controls = <Spinbox\r\n        selected={props.option.selected}\r\n        sell={props.sell.bind(null, props.option)}\r\n        buy={props.buy.bind(null, props.option)}\r\n        trade={props.trade.bind(null, props.option)}\r\n        min={props.option.min}\r\n        max={props.option.max}\r\n      />\r\n      break;\r\n    case 'addChild':\r\n      controls = <AddChild buy={props.buy.bind(null, props.option)} />;\r\n      break;\r\n    case 'delete':\r\n      controls = <Delete sell={props.sell.bind(null, props.option)} />;\r\n      break;\r\n    case 'select':\r\n      controls = <SelectControls\r\n        selectedId={props.optionInfo.selectedSuboptionId}\r\n        selectable={props.optionInfo.selectableSuboptions}\r\n        sell={props.sell}\r\n        buy={props.buy}\r\n        includeEmpty={props.option.min === 0}\r\n      />;\r\n      break;\r\n    default:\r\n      return false;\r\n  }\r\n\r\n  return <div\r\n    className=\"OptionControls\"\r\n    onClick={event => {\r\n      if (!isObject(event.detail)) event.detail = {};\r\n      event.detail.fromOptionControl = true;\r\n    }}\r\n  >\r\n    {controls}\r\n  </div>\r\n}\r\n\r\nOptionControls.propTypes = {\r\n  option: propShapes.option,\r\n  sell: PropTypes.func,\r\n  buy: PropTypes.func,\r\n  trade: PropTypes.func,\r\n  optionInfo: PropTypes.object,\r\n  isSummaryMode: PropTypes.bool,\r\n};\r\n\r\nexport default OptionControls;\r\n","export default function getControlType(option) {\r\n  if (option.type === 'option') {\r\n    if (option.hasIndividualChildren) {\r\n      return 'addChild';\r\n    }\r\n    if (option.max === 1) {\r\n      return 'checkbox';\r\n    }\r\n    if (option.max > 1 || option.max === false) {\r\n      return 'spinbox';\r\n    }\r\n  }\r\n  if (option.type === 'group') {\r\n    if (option.isChild) {\r\n      return 'delete';\r\n    }\r\n    if (option.max === 1 && !option.disableUseAsSelect) {\r\n      // has an additional test in getOptionsInfo\r\n      return 'select';\r\n    }\r\n  }\r\n  return false;\r\n}","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nfunction Name(props) {\r\n  if (props.isChangeable) {\r\n    return <div className=\"Name title\">\r\n      <input\r\n        value={props.name}\r\n        onChange={event => props.change('name', event.target.value)}\r\n        placeholder=\"name\"\r\n      />\r\n    </div>;\r\n  }\r\n  return <div className=\"Name title\">\r\n    {props.name}\r\n  </div>;\r\n}\r\n\r\nName.propTypes = {\r\n  name: PropTypes.string,\r\n  isChangeable: PropTypes.bool,\r\n  change: PropTypes.func,\r\n};\r\n\r\nexport default Name;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Hyphenated from 'react-hyphen';\r\nimport propShapes from '../propShapes';\r\n\r\nfunction Text(props) {\r\n  if (props.isChangeable) {\r\n    return <div className=\"Text\">\r\n      <textarea\r\n        value={props.text}\r\n        onChange={event => props.change('text', event.target.value)}\r\n        placeholder=\"description\"\r\n      />\r\n    </div>;\r\n  }\r\n\r\n  if (!props.text) return false;\r\n\r\n  return <div className=\"Text\">\r\n    <Hyphenated>\r\n      {props.text}\r\n    </Hyphenated>\r\n  </div>;\r\n}\r\n\r\nText.propTypes = {\r\n  text: propShapes.text,\r\n  isChangeable: PropTypes.bool,\r\n  change: PropTypes.func,\r\n};\r\n\r\nexport default Text;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport classNames from 'classnames';\r\nimport PropTypes from 'prop-types';\r\nimport propShapes from './../propShapes';\r\nimport Name from './Name';\r\nimport Text from './Text';\r\n\r\nfunction Select(props) {\r\n  if (props.optionInfo.controlType !== 'select') return false;\r\n\r\n  const selected = props.optionInfo.selectableSuboptions[props.optionInfo.selectedSuboptionId];\r\n  if (selected === undefined) return false;\r\n\r\n  let text = selected.text;\r\n  if (selected.info.isDisabled) {\r\n    text = selected.disabledText;\r\n  }\r\n\r\n  return <div className={classNames(\r\n    'Select',\r\n    { SelectDisabled: selected.info.isDisabled }\r\n  )}>\r\n    <Name\r\n      name={selected.name}\r\n      isChangeable={false}\r\n    />\r\n    <Text\r\n      text={text}\r\n      isChangeable={false}\r\n    />\r\n  </div>\r\n}\r\n\r\nSelect.propTypes = {\r\n  option: propShapes.option,\r\n  optionInfo: PropTypes.object,\r\n};\r\n\r\nexport default connect()(Select);","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nfunction Image(props) {\r\n  if (props.src === undefined) return false;\r\n\r\n  return <div className=\"Image\">\r\n    <div className=\"ImageContent\"\r\n      style={{\r\n        backgroundImage: `url(${props.src})`,\r\n        backgroundPositionY: (props.cy === undefined ? 50 : props.cy) + '%',\r\n        backgroundPositionX: (props.cx === undefined ? 50 : props.cx) + '%',\r\n      }}\r\n    ></div>\r\n  </div>\r\n}\r\n\r\nImage.propTypes = {\r\n  src: PropTypes.string,\r\n  cx: PropTypes.number,\r\n  cy: PropTypes.number,\r\n};\r\n\r\nexport default Image;","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport propShapes from '../propShapes';\r\n\r\nfunction CurrencyStats(props) {\r\n  if (props.currency === undefined) return false;\r\n  const currencies = [];\r\n  for (const currencySlug in props.currency) {\r\n    const currency = props.currency[currencySlug];\r\n    currencies.push(\r\n      <div className={\r\n        classNames(\r\n          'CurrencyStatSingle',\r\n          { CurrencyStatPositive: currency.currentValue >= 0 }\r\n        )}\r\n        key={`currency-${currencySlug}`}>\r\n        <div className=\"CurrencyStats-name\">{currency.name}</div>\r\n        <div className=\"CurrencyStats-value\">{currency.currentValue}</div>\r\n      </div>\r\n    );\r\n  }\r\n  return <div className=\"CurrencyStats\">\r\n    {currencies}\r\n  </div>\r\n}\r\n\r\nCurrencyStats.propTypes = {\r\n  currency: propShapes.currency,\r\n};\r\n\r\nexport default CurrencyStats;","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport propShapes from '../propShapes';\r\n\r\nfunction OptionCost(props) {\r\n  if (props.cost === undefined) return false;\r\n\r\n  const costs = [];\r\n  for (const costSlug in props.cost) {\r\n    const cost = props.cost[costSlug];\r\n    costs.push(\r\n      <div className={classNames(\r\n        'OptionCostSingle',\r\n        { OptionCostPositive: cost.nextValue < 0 }\r\n      )} key={`cost-${costSlug}`}>\r\n        <div className=\"OptionCost-name\">{cost.name}</div>\r\n        <div className=\"OptionCost-value\">\r\n          {(cost.nextValue > 0 ? '' : '+') + (-cost.nextValue)}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  return <div className=\"OptionCost\">\r\n    {costs}\r\n  </div>\r\n}\r\n\r\nOptionCost.propTypes = {\r\n  cost: propShapes.cost,\r\n};\r\n\r\nexport default OptionCost;","import React from 'react';\r\nimport propShapes from '../propShapes';\r\nimport CurrencyStats from './CurrencyStats';\r\nimport OptionCost from './OptionCost';\r\n\r\nfunction OptionStats(props) {\r\n  if (\r\n    props.option.cost === undefined &&\r\n    props.option.optionCurrency === undefined\r\n  ) return false;\r\n\r\n  return <div className=\"OptionStats\">\r\n    <OptionCost cost={props.option.cost} />\r\n    <CurrencyStats currency={props.option.optionCurrency} />\r\n  </div>\r\n}\r\n\r\nOption.propTypes = {\r\n  option: propShapes.option,\r\n};\r\n\r\nexport default OptionStats;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { isObject } from '../functions/helpers';\r\n\r\nfunction PathLink(props) {\r\n  return (\r\n    <div className=\"PathLink\" onClick={event => {\r\n      if (!isObject(event.detail)) event.detail = {};\r\n      event.detail.fromLink = true;\r\n      props.dispatch({\r\n        type: 'CHANGE_PATH',\r\n        path: props.path === undefined ? props.path : props.path.split('/'),\r\n        scroll: window.scrollY,\r\n        isChangingStage: props.isChangingStage,\r\n        previous: props.previous,\r\n      });\r\n    }}>\r\n      {props.text}\r\n    </div>\r\n  );\r\n}\r\n\r\nPathLink.propTypes = {\r\n  text: PropTypes.oneOfType([\r\n    PropTypes.string,\r\n    PropTypes.node,\r\n  ]),\r\n  path: PropTypes.string,\r\n  isChangingStage: PropTypes.bool,\r\n  previous: PropTypes.bool,\r\n};\r\n\r\nexport default connect()(PathLink);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport propShapes from '../propShapes';\r\nimport PathLink from './PathLink';\r\nimport getOption from '../functions/getOption';\r\n\r\nfunction getOpenLink(props) {\r\n  if (props.depth <= 1 || props.option.disableOpenButton) return false;\r\n  return <PathLink text=\"open\" path={props.option.path} />\r\n}\r\n\r\nfunction getOptionLink(props) {\r\n  if (props.option.link === undefined) return false;\r\n  const target = getOption(props.option.link, props.options);\r\n  return <PathLink text={`open ${target.name}`} path={target.path} />\r\n}\r\n\r\nfunction OptionLinks(props) {\r\n  const openLink = getOpenLink(props);\r\n  const optionLink = getOptionLink(props);\r\n  if (\r\n    openLink === false &&\r\n    optionLink === false\r\n  ) return false;\r\n\r\n  return <div className=\"OptionLinks\">\r\n    {optionLink}\r\n    {openLink}\r\n  </div>\r\n}\r\n\r\nOptionLinks.propTypes = {\r\n  option: propShapes.option,\r\n  depth: PropTypes.number,\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    options: state.options,\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(OptionLinks);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport propShapes from '../propShapes';\r\n\r\nfunction OptionFoot(props) {\r\n  const errors = [];\r\n  for (const error of props.errors) {\r\n    if (error.path !== props.option.path) continue;\r\n    errors.push(<div className=\"error\" key={`option-error-${error.code}`}>\r\n      {error.text}\r\n    </div>);\r\n  }\r\n  if (errors.length === 0) return false;\r\n\r\n  return <div className=\"OptionFoot\">\r\n    {errors}\r\n  </div>\r\n}\r\n\r\nOptionFoot.propTypes = {\r\n  option: propShapes.option,\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    options: state.options,\r\n    errors: state.errors,\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(OptionFoot);","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport propShapes from '../propShapes';\r\nimport OptionStats from './OptionStats';\r\nimport Name from './Name';\r\nimport Text from './Text';\r\nimport OptionLinks from '../containers/OptionLinks';\r\nimport OptionFoot from '../containers/OptionFoot';\r\nimport getUserFunctionValue from \"./../functions/getUserFunctionValue\";\r\n\r\nfunction OptionBox(props) {\r\n\r\n  return <div className=\"OptionBox\">\r\n    <div className=\"OptionHead\">\r\n      <OptionStats\r\n        option={props.getStastsFrom}\r\n      />\r\n    </div>\r\n    <Name\r\n      name={props.option.name}\r\n      isChangeable={props.option.isChild}\r\n      change={props.change.bind(null, props.option)}\r\n    />\r\n    <Text\r\n      text={getUserFunctionValue(props.option.text, { option: props.option })}\r\n      isChangeable={props.option.isChild}\r\n      change={props.change.bind(null, props.option)}\r\n    />\r\n    <OptionLinks\r\n      option={props.option}\r\n      depth={props.optionInfo.depth}\r\n    />\r\n    <OptionFoot option={props.option} />\r\n  </div>\r\n}\r\n\r\nOption.propTypes = {\r\n  option: propShapes.option,\r\n  getStastsFrom: propShapes.option,\r\n  change: PropTypes.func,\r\n  optionInfo: PropTypes.object,\r\n};\r\n\r\nexport default OptionBox;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport propShapes from '../propShapes';\r\n\r\nfunction DisabledOverlay(props) {\r\n  if (!props.option.info.isDisabled) return false;\r\n\r\n  return <div className=\"OptionDisabledInfo\" >\r\n    {props.option.image ? <div\r\n      className=\"OptionDisabledImage\"\r\n      style={{\r\n        backgroundImage: `url(${props.option.image})`,\r\n      }}\r\n    ></div> : false}\r\n    <div className=\"OptionDisabledNameContainer\">\r\n      <div className=\"OptionDisabledName\">{props.option.name}</div>\r\n      <div className=\"OptionDisabledMessage\">disabled</div>\r\n    </div>\r\n    <div className=\"OptionDisabledReason\">{props.option.disabledText}</div>\r\n  </div>;\r\n}\r\n\r\nDisabledOverlay.propTypes = {\r\n  option: propShapes.option,\r\n  optionInfo: PropTypes.object,\r\n};\r\n\r\nexport default DisabledOverlay;","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport PropTypes from 'prop-types';\r\nimport propShapes from '../propShapes';\r\nimport OptionControls from './OptionControls';\r\nimport Select from './Select';\r\nimport Image from './Image';\r\nimport OptionBox from './OptionBox';\r\nimport DisabledOverlay from './DisabledOverlay';\r\n\r\nfunction Suboption(props) {\r\n  const optionInfo = props.optionInfo;\r\n\r\n  return <div\r\n    className={classNames(\r\n      'Suboption',\r\n      `OptionControl-${optionInfo.controlType}`,\r\n      `OptionType-${props.option.type}`,\r\n      { OptionSelected: props.option.info.isSelected },\r\n      { OptionOpenable: optionInfo.isOpenable },\r\n      { SelectableSuboption: optionInfo.isSelectableSuboption },\r\n      { OptionHasImage: optionInfo.image },\r\n      { OptionDisabled: props.option.info.isDisabled }\r\n    )}\r\n  >\r\n    <OptionControls\r\n      option={props.option}\r\n      sell={props.sell}\r\n      buy={props.buy}\r\n      trade={props.trade}\r\n      optionInfo={optionInfo}\r\n    />\r\n    <div className=\"SuboptionWrap\">\r\n      <div className=\"SuboptionContent\">\r\n        <Image\r\n          src={optionInfo.image}\r\n          cx={optionInfo.imageCx}\r\n          cy={optionInfo.imageCy}\r\n        />\r\n        <OptionBox\r\n          option={props.option}\r\n          getStastsFrom={optionInfo.getStastsFrom}\r\n          change={props.change}\r\n          optionInfo={optionInfo}\r\n        />\r\n      </div>\r\n      <Select\r\n        option={props.option}\r\n        optionInfo={optionInfo}\r\n      />\r\n      <DisabledOverlay\r\n        option={props.option}\r\n        optionInfo={optionInfo}\r\n      />\r\n    </div>\r\n  </div>\r\n}\r\n\r\nSuboption.propTypes = {\r\n  option: propShapes.option,\r\n  buy: PropTypes.func,\r\n  sell: PropTypes.func,\r\n  change: PropTypes.func,\r\n  optionInfo: PropTypes.object,\r\n};\r\n\r\nexport default Suboption;","import React from 'react';\r\nimport { isObject } from '../functions/helpers';\r\n\r\nfunction SuboptionsPage(props) {\r\n  return <div\r\n    className=\"SuboptionsContainer\"\r\n    onClick={event => {\r\n      if (!isObject(event.detail)) event.detail = {};\r\n      event.detail.fromSuboptions = true;\r\n    }}\r\n  >\r\n    {props.children}\r\n  </div>\r\n}\r\n\r\nexport default SuboptionsPage;","import getSuboptions from './getSubptions';\r\n\r\nexport default function getDepth(option, options) {\r\n  const suboptions = getSuboptions(option, options, true);\r\n  if (Object.keys(suboptions).length === 0) return 1;\r\n  let depth = 0;\r\n  for (const slug in suboptions) {\r\n    const suboption = suboptions[slug];\r\n    depth = Math.max(getDepth(suboption, options), depth);\r\n  }\r\n  return depth + 1;\r\n}","import getControlType from './getControlType';\r\nimport getSubptions from './getSubptions';\r\nimport getDepth from './getDepth';\r\nimport isOptionDisabled from './isOptionDisabled';\r\n\r\nexport default function getOptionInfo(option, options) {\r\n  if (option.path === undefined) return { suboptions: options };\r\n  const optionInfo = {\r\n    controlType: getControlType(option),\r\n    suboptions: getSubptions(option, options),\r\n    depth: getDepth(option, options),\r\n  };\r\n  optionInfo.isOpenable = Object.keys(optionInfo.suboptions).length > 0;\r\n  optionInfo.image = option.image;\r\n  optionInfo.imageCy = option.imageCy;\r\n  optionInfo.imageCx = option.imageCx;\r\n  optionInfo.getStastsFrom = option;\r\n\r\n  // when controlType === select\r\n  optionInfo.isSelectableSuboption = option.type === 'option' &&\r\n    option.min === 0 &&\r\n    !option.disableUseAsSelect &&\r\n    option.max === 1;\r\n\r\n  if (optionInfo.controlType === 'select') {\r\n    optionInfo.selectableSuboptions = [];\r\n    for (const slug in optionInfo.suboptions) {\r\n      const suboption = optionInfo.suboptions[slug];\r\n      if (\r\n        suboption.type === 'option' &&\r\n        suboption.max === 1 &&\r\n        suboption.min === 0 &&\r\n        !suboption.disableUseAsSelect &&\r\n        (\r\n          !isOptionDisabled(suboption, options) ||\r\n          suboption.showWhenDisabled\r\n        )\r\n      ) {\r\n        optionInfo.selectableSuboptions.push(suboption);\r\n        if (suboption.selected) {\r\n          optionInfo.selectedSuboptionId = optionInfo.selectableSuboptions.length - 1;\r\n        }\r\n      }\r\n    }\r\n    if (optionInfo.selectableSuboptions.length <= 1) {\r\n      optionInfo.controlType = false;\r\n    }\r\n\r\n    const selected = optionInfo.selectableSuboptions[optionInfo.selectedSuboptionId];\r\n    if (selected !== undefined) {\r\n      optionInfo.getStastsFrom = selected;\r\n      if (!option.dontUseImageOfSelected) {\r\n        optionInfo.image = selected.image;\r\n        optionInfo.imageCy = selected.imageCy;\r\n        optionInfo.imageCx = selected.imageCx;\r\n      }\r\n    }\r\n  }\r\n\r\n  return optionInfo;\r\n}\r\n","export function handleBuy(option) {\r\n  this.dispatch({\r\n    type: 'BUY_OPTION',\r\n    option,\r\n  });\r\n}\r\n\r\nexport function handleSell(option) {\r\n  this.dispatch({\r\n    type: 'SELL_OPTION',\r\n    option,\r\n  });\r\n}\r\n\r\nexport function handleTrade(option, value) {\r\n  this.dispatch({\r\n    type: 'TRADE_OPTION',\r\n    value,\r\n    option,\r\n  });\r\n}\r\n\r\nexport function handleChange(option, textProp, text) {\r\n  this.dispatch({\r\n    type: 'CHANGE_TEXT',\r\n    option,\r\n    textProp,\r\n    text,\r\n  });\r\n}","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport propShapes from '../propShapes';\r\nimport Suboption from '../pages/Suboption';\r\nimport SuboptionsPage from '../pages/SuboptionsPage';\r\nimport getOptionInfo from '../functions/getOptionInfo';\r\nimport { handleBuy, handleSell, handleChange, handleTrade } from '../functions/handlers';\r\n\r\nfunction SuboptionsContainer(props) {\r\n  const suboptions = props.suboptions;\r\n  if (Object.keys(suboptions).length === 0) return false;\r\n  if (props.option.info.isDisabled) return false;\r\n\r\n  const suboptionsElements = [];\r\n  for (const slug in suboptions) {\r\n    const currentOption = suboptions[slug];\r\n    const optionInfo = getOptionInfo(currentOption, props.options);\r\n    if (\r\n      (\r\n        props.optionInfo.controlType === 'select' &&\r\n        optionInfo.isSelectableSuboption\r\n      ) ||\r\n      (\r\n        !currentOption.showWhenDisabled &&\r\n        currentOption.info.isDisabled\r\n      )\r\n    ) continue;\r\n    if (currentOption.type === 'option' || currentOption.type === 'group') {\r\n      suboptionsElements.push(<Suboption\r\n        key={`suboption-${currentOption.path}`}\r\n        option={currentOption}\r\n        buy={handleBuy.bind(props)}\r\n        sell={handleSell.bind(props)}\r\n        trade={handleTrade.bind(props)}\r\n        change={handleChange.bind(props)}\r\n        optionInfo={optionInfo}\r\n      />);\r\n    }\r\n  }\r\n  if (suboptionsElements.length === 0) return false;\r\n\r\n  return <SuboptionsPage>\r\n    {suboptionsElements}\r\n  </SuboptionsPage>;\r\n}\r\n\r\nSuboptionsContainer.propTypes = {\r\n  option: propShapes.option,\r\n  suboptions: PropTypes.objectOf(propShapes.option),\r\n  optionInfo: PropTypes.object,\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    options: state.options,\r\n    path: state.path,\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(SuboptionsContainer);","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport PropTypes from 'prop-types';\r\nimport OptionControls from './OptionControls';\r\nimport getControlType from '../functions/getControlType';\r\nimport propShapes from '../propShapes';\r\nimport SuboptionsContainer from '../containers/SuboptionsContainer';\r\nimport Select from './Select';\r\nimport Image from './Image';\r\nimport OptionBox from './OptionBox';\r\nimport DisabledOverlay from './DisabledOverlay';\r\n\r\nfunction handleClick(event) {\r\n  if (event.detail.fromOptionControl) return;\r\n  if (event.detail.fromSuboptions) return;\r\n  if (event.detail.fromLink) return;\r\n  if (this.option.info.isDisabled) return;\r\n\r\n  switch (getControlType(this.option)) {\r\n    case 'checkbox':\r\n      if (this.option.selected) this.sell(this.option);\r\n      else this.buy(this.option);\r\n      break;\r\n    case 'spinbox':\r\n      this.buy(this.option);\r\n      break;\r\n    default:\r\n  }\r\n}\r\n\r\nfunction Option(props) {\r\n  const optionInfo = props.optionInfo;\r\n\r\n  if (\r\n    props.isSummaryMode &&\r\n    ['option', 'group'].includes(props.option.type) &&\r\n    (\r\n      props.option.info.isDisabled ||\r\n      !props.option.info.isSelected\r\n    )\r\n  ) return false;\r\n\r\n  const controllClass = props.isSummaryMode ? false : `OptionControl-${optionInfo.controlType}`;\r\n  return <div\r\n    className={classNames(\r\n      'Option',\r\n      controllClass,\r\n      `OptionType-${props.option.type}`,\r\n      { OptionSelected: props.option.info.isSelected },\r\n      { OptionOpenable: optionInfo.isOpenable },\r\n      { OptionHasImage: optionInfo.image },\r\n      { OptionDisabled: props.option.info.isDisabled },\r\n      ...props.option.classes\r\n    )}\r\n  >\r\n    <OptionControls\r\n      option={props.option}\r\n      sell={props.sell}\r\n      buy={props.buy}\r\n      trade={props.trade}\r\n      optionInfo={optionInfo}\r\n      isSummaryMode={props.isSummaryMode}\r\n    />\r\n    <div\r\n      className=\"OptionWrap\"\r\n      onClick={props.isSummaryMode ? undefined : handleClick.bind(props)}\r\n    >\r\n      <div className=\"OptionContent\">\r\n        <Image\r\n          src={optionInfo.image}\r\n          cx={optionInfo.imageCx}\r\n          cy={optionInfo.imageCy}\r\n        />\r\n        <OptionBox\r\n          option={props.option}\r\n          getStastsFrom={optionInfo.getStastsFrom}\r\n          change={props.change}\r\n          optionInfo={optionInfo}\r\n        />\r\n      </div>\r\n      <Select\r\n        option={props.option}\r\n        optionInfo={optionInfo}\r\n        options={props.options}\r\n      />\r\n      <SuboptionsContainer\r\n        option={props.option}\r\n        suboptions={props.optionInfo.suboptions}\r\n        optionInfo={optionInfo}\r\n      />\r\n      <DisabledOverlay\r\n        option={props.option}\r\n        optionInfo={optionInfo}\r\n      />\r\n    </div>\r\n  </div>;\r\n}\r\n\r\nOption.propTypes = {\r\n  option: propShapes.option,\r\n  buy: PropTypes.func,\r\n  sell: PropTypes.func,\r\n  trade: PropTypes.func,\r\n  change: PropTypes.func,\r\n  optionInfo: PropTypes.object,\r\n  isSummaryMode: PropTypes.bool,\r\n};\r\n\r\nexport default Option;","import React from 'react';\r\nimport { TransitionGroup } from 'react-transition-group';\r\n\r\nfunction OptionsPage(props) {\r\n  return <TransitionGroup className=\"OptionsContainer\">\r\n    {props.children}\r\n  </TransitionGroup>;\r\n}\r\n\r\nexport default OptionsPage;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport Option from '../pages/Option';\r\nimport propShapes from '../propShapes';\r\nimport getOptionInfo from '../functions/getOptionInfo';\r\nimport getSubptions from '../functions/getSubptions';\r\nimport { handleBuy, handleSell, handleChange, handleTrade } from './../functions/handlers';\r\nimport OptionsPage from '../pages/OptionsPage';\r\nimport { CSSTransition } from 'react-transition-group';\r\n\r\nfunction OptionsContainer(props) {\r\n  const suboptions = getSubptions(props.option, props.options);\r\n\r\n  const optionsElements = [];\r\n  for (const slug in suboptions) {\r\n    const currentOption = suboptions[slug];\r\n\r\n    if (!currentOption.showWhenDisabled && currentOption.info.isDisabled) continue;\r\n    const optionInfo = getOptionInfo(currentOption, props.options);\r\n    optionsElements.push(<CSSTransition\r\n      key={`option-${currentOption.path}`}\r\n      timeout={300}\r\n      classNames=\"item\"\r\n    >\r\n      <Option\r\n        option={currentOption}\r\n        buy={handleBuy.bind(props)}\r\n        sell={handleSell.bind(props)}\r\n        trade={handleTrade.bind(props)}\r\n        change={handleChange.bind(props)}\r\n        optionInfo={optionInfo}\r\n        isSummaryMode={props.settings.isSummaryMode}\r\n      />\r\n    </CSSTransition>);\r\n  }\r\n\r\n  optionsElements.push(<CSSTransition\r\n    key={`option-after-${props.option.path}`}\r\n    timeout={300}\r\n    classNames=\"item\"\r\n  ><div style={{\r\n    width: '100%',\r\n  }}></div></CSSTransition>);\r\n\r\n  return <OptionsPage>\r\n    {optionsElements}\r\n  </OptionsPage>;\r\n}\r\n\r\nOptionsContainer.propTypes = {\r\n  option: propShapes.option,\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    settings: state.settings,\r\n    options: state.options,\r\n    path: state.path,\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(OptionsContainer);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport propShapes from '../propShapes';\r\nimport Name from './../pages/Name';\r\nimport OptionControls from './../pages/OptionControls';\r\nimport Text from '../pages/Text';\r\nimport OptionStats from './../pages/OptionStats';\r\nimport OptionFoot from './OptionFoot';\r\nimport getOptionInfo from '../functions/getOptionInfo';\r\nimport { handleBuy, handleSell, handleChange, handleTrade } from './../functions/handlers';\r\n\r\nfunction OptionWideHead(props) {\r\n  const optionInfo = getOptionInfo(props.option, props.options);\r\n\r\n  return <div className=\"OptionWideHead\">\r\n    <OptionControls\r\n      option={props.option}\r\n      buy={handleBuy.bind(props)}\r\n      sell={handleSell.bind(props)}\r\n      trade={handleTrade.bind(props)}\r\n      optionInfo={optionInfo}\r\n    />\r\n    <OptionStats\r\n      option={props.option}\r\n    />\r\n    <Name\r\n      name={props.option.name}\r\n      isChangeable={props.option.isChild}\r\n      change={handleChange.bind(props, props.option)}\r\n    />\r\n    <Text\r\n      text={props.option.text}\r\n      isChangeable={props.option.isChild}\r\n      change={props.change}\r\n    />\r\n    <OptionFoot option={props.option} />\r\n  </div>\r\n}\r\n\r\nOptionWideHead.propTypes = {\r\n  option: propShapes.option,\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    options: state.options,\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(OptionWideHead);","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport PathLink from '../containers/PathLink';\r\n\r\nfunction ReturnButton(props) {\r\n  if (props.path.length === 0) return false;\r\n\r\n  const text = <svg viewBox=\"0 0 133 100\">\r\n    <path d=\"M70 10L10 50L70 90z\" />\r\n    <path d=\"M75 50L123 50\" />\r\n  </svg>;\r\n  return <div className=\"ReturnButton\">\r\n    <PathLink\r\n      previous={true}\r\n      text={text}\r\n    />\r\n  </div>;\r\n}\r\n\r\nReturnButton.propTypes = {\r\n  path: PropTypes.arrayOf(PropTypes.string),\r\n};\r\n\r\nexport default ReturnButton;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PathLink from './PathLink';\r\nimport ReturnButton from '../pages/ReturnButton';\r\nimport getOption from '../functions/getOption';\r\n\r\nfunction getBreadcrumbsPage(path, props) {\r\n  if (\r\n    path.length === 0 ||\r\n    (props.settings.usesStages && path.length <= 1)\r\n  ) return false;\r\n\r\n  const breadcrumbs = [];\r\n  for (let i = 0; i < props.path.length; i++) {\r\n    const currentPath = props.path.slice(0, i + 1);\r\n    const optionName = getOption(currentPath, props.options).name;\r\n    breadcrumbs.push(\r\n      <React.Fragment key={`breadcrumb-${currentPath.join('-')}`}>\r\n        <PathLink path={currentPath.join('/')} text={optionName} />\r\n        {i === props.path.length - 1 ? false : <span> / </span>}\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  return <div className=\"BreadcrumbsPage\">\r\n    {props.settings.usesStages ? '' :\r\n      <React.Fragment>\r\n        <PathLink path=\"\" text=\"home\" />\r\n        <span> / </span>\r\n      </React.Fragment>\r\n    }\r\n    {breadcrumbs}\r\n  </div>;\r\n}\r\n\r\nfunction Breadcrumbs(props) {\r\n  const path = props.path.filter(e => e !== '');\r\n\r\n  return <nav className=\"Breadcrumbs\">\r\n    <ReturnButton path={props.path} />\r\n    {getBreadcrumbsPage(path, props)}\r\n  </nav>;\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    settings: state.settings,\r\n    options: state.options,\r\n    path: state.path,\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(Breadcrumbs);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport classNames from 'classnames';\r\nimport getSubptions from '../functions/getSubptions';\r\nimport getSelected from '../functions/getSelected';\r\nimport isOptionDisabled from '../functions/isOptionDisabled';\r\nimport { getReadablePath } from '../functions/helpers';\r\n\r\nfunction getValue(option, options) {\r\n  if (isOptionDisabled(option, options)) return false;\r\n  if (option.selected === undefined) {\r\n    const selected = getSelected(option, options);\r\n    if (selected === false || selected.length === 0) return false;\r\n    return selected[0];\r\n  }\r\n  return option.selected;\r\n}\r\n\r\nfunction getCost(option, count) {\r\n  if (option.cost === undefined) return false;\r\n  const result = [];\r\n  for (const currencySlug in option.cost) {\r\n    const currency = option.cost[currencySlug];\r\n    result.push(<div\r\n      className={classNames(\r\n        'list-option-cost',\r\n        { costPositive: currency.value < 0 }\r\n      )}\r\n      key={`list-option-cost-${option.path}-${currencySlug}`}\r\n    >\r\n      <div className=\"list-option-cost-name\">{currency.name}</div>\r\n      <div className=\"list-option-cost-value\">{\r\n        (currency.value > 0 ? '' : '+') + (-currency.value * count)\r\n      }</div>\r\n    </div>);\r\n  }\r\n  return result;\r\n}\r\n\r\nfunction getSelectedHierarchy(parentOption, options) {\r\n  let selected = [];\r\n  const suboptions = getSubptions(parentOption, options);\r\n  for (const slug in suboptions) {\r\n    const option = suboptions[slug];\r\n    if (isOptionDisabled(option, options)) continue;\r\n    const value = getValue(option, options);\r\n    const cost = getCost(option, value);\r\n    if (typeof value === 'number' && value > 0) {\r\n      selected.push(<tr\r\n        className=\"list-option\"\r\n        key={`list-option-${option.path}`}\r\n      >\r\n        <td>\r\n          {getReadablePath(option.path, options)}\r\n          {value > 1 ? ' × ' + value : ''}\r\n        </td>\r\n        <td>{cost}</td>\r\n      </tr>);\r\n    }\r\n    selected = selected.concat(getSelectedHierarchy(option, options));\r\n  }\r\n\r\n  return selected;\r\n}\r\n\r\nfunction SelectedOptions(props) {\r\n  const selected = getSelectedHierarchy({ options: props.options }, props.options);\r\n  return <table className=\"SelectedOptions\">\r\n    <tbody>\r\n      {selected}\r\n    </tbody>\r\n  </table>;\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    options: state.options,\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(SelectedOptions);","import React, { useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport classNames from 'classnames';\r\nimport PathLink from './PathLink';\r\nimport SelectedOptions from './selectedOptions';\r\n\r\nfunction Menu(props) {\r\n  const [opened, setOpened] = useState(false);\r\n\r\n  const errors = [];\r\n  for (const error of props.errors) {\r\n    errors.push(<div className=\"error\" key={`error-${error.code}`}>\r\n      {error.path === undefined ? error.text :\r\n        <PathLink text={error.text} path={error.path} />}\r\n    </div>);\r\n  }\r\n\r\n  return <div className={classNames(\r\n    'Menu',\r\n    { MenuOpened: opened },\r\n  )}>\r\n    <div className=\"burger\" onClick={() => setOpened(!opened)}>\r\n      <div></div>\r\n      <div></div>\r\n      <div></div>\r\n    </div>\r\n    <div className=\"MenuWrap\">\r\n      {errors.length > 0 ? <React.Fragment>\r\n        <div className=\"MenuHeading\">Errors</div>\r\n        {errors}\r\n      </React.Fragment> : ''}\r\n      <div className=\"MenuHeading\">Your options</div>\r\n      <SelectedOptions />\r\n    </div>\r\n  </div>\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    errors: state.errors,\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(Menu);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport CurrencyStats from '../pages/CurrencyStats';\r\nimport propShapes from '../propShapes';\r\nimport Breadcrumbs from './Breadcrumbs';\r\nimport getCurrencies from '../functions/getCurrencies';\r\nimport Menu from './Menu';\r\n\r\nfunction Nav(props) {\r\n  const currentCurrencies = getCurrencies(props, props.path);\r\n\r\n  return <div className=\"Nav\">\r\n    <CurrencyStats currency={currentCurrencies} />\r\n    <Breadcrumbs />\r\n    <Menu />\r\n  </div>\r\n}\r\n\r\nNav.propTypes = {\r\n  option: propShapes.option,\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    options: state.options,\r\n    path: state.path,\r\n    settings: state.settings,\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(Nav);","import getOption from '../functions/getOption';\r\nimport { clone } from '../functions/helpers';\r\n\r\n/**\r\n * Get all currencies option with provided path can have.\r\n * @param {object} props Global props.\r\n * @param {object} props.options Global options.\r\n * @param {object} props.settings Global settings.\r\n * @param {array} path Path of the option being checked.\r\n * @returns {object} Object containing possible currencies.\r\n */\r\nexport default function getCurrencies(props, path) {\r\n  const currencies = clone(props.settings.currency);\r\n  const tempPath = clone(path).reverse();\r\n  let currentPath = '';\r\n\r\n  while (tempPath.length > 0) {\r\n    currentPath += '/' + tempPath.pop();\r\n    const option = getOption(currentPath, props.options);\r\n    if (option.optionCurrency !== undefined) {\r\n      Object.assign(currencies, option.optionCurrency);\r\n    }\r\n  }\r\n  return currencies;\r\n}","import React, { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport $ from 'cash-dom';\r\nimport './styles/style.scss';\r\nimport pipe from './pipe';\r\nimport OptionsContainer from './containers/OptionsContainer';\r\nimport OptionWideHead from './containers/OptionWideHead';\r\nimport getOption from './functions/getOption';\r\nimport Nav from './containers/Nav';\r\n\r\nwindow.addEventListener('load', () => {\r\n  $('body').addClass('unlocked');\r\n  setTimeout(() => {\r\n    $('.MainOverlay').remove();\r\n  }, 300);\r\n});\r\n\r\nfunction getWideHead(option, props) {\r\n  if (props.settings.usesStages) {\r\n    if (props.path.length <= 1) return false;\r\n  }\r\n  if (props.path.length === 0) return false;\r\n  return <OptionWideHead option={option} />;\r\n}\r\n\r\nfunction App(props) {\r\n  useEffect(() => {\r\n    if (pipe.scroll !== undefined) {\r\n      window.scroll(0, pipe.scroll);\r\n      pipe.scroll = undefined;\r\n    }\r\n  });\r\n\r\n  const dispatch = props.dispatch;\r\n  useEffect(() => {\r\n    window.history.replaceState({\r\n      path: [],\r\n    }, \"\");\r\n    window.onpopstate = event => {\r\n      if (event.state) {\r\n        dispatch({\r\n          type: 'CHANGE_PATH',\r\n          scroll: window.scrollY,\r\n          path: event.state.path,\r\n          fromHistory: true,\r\n        });\r\n      }\r\n    };\r\n  }, [dispatch]);\r\n\r\n  const option = getOption(props.path, props.options);\r\n  return (\r\n    <div className=\"App\">\r\n      <div className=\"MainOverlay\">\r\n        <svg className=\"loader\" viewBox=\"0 0 100 100\">\r\n          <circle cx=\"50\" cy=\"50\" r=\"40\" />\r\n        </svg>\r\n      </div>\r\n      <Nav option={option} />\r\n      {getWideHead(option, props)}\r\n      <OptionsContainer option={option} />\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    settings: state.settings,\r\n    options: state.options,\r\n    path: state.path,\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(App);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\n\r\nfunction handleClick(state) {\r\n  this.dispatch({\r\n    type: 'CHANGE_SUMMARY_MODE',\r\n    state,\r\n  });\r\n}\r\n\r\nfunction EnterSummaryMode(props) {\r\n  const text = props.text === undefined ?\r\n    'Open summary' : props.text;\r\n\r\n  return <div\r\n    className=\"EnterSummaryMode\"\r\n    onClick={handleClick.bind(props, props.state)}\r\n  >\r\n    <div>{text}</div>\r\n  </div>;\r\n}\r\n\r\nEnterSummaryMode.propTypes = {\r\n  state: PropTypes.bool,\r\n};\r\n\r\nexport default connect()(EnterSummaryMode);","import React from 'react';\r\nimport getOption from './functions/getOption';\r\nimport getSelected from './functions/getSelected';\r\nimport isOptionDisabled from './functions/isOptionDisabled';\r\nimport introImg from './media/element/intro.jpg';\r\nimport EnterSummaryMode from './containers/EnterSummaryMode';\r\n\r\nfunction importAll(r) {\r\n  const obj = {};\r\n  r.keys().map(r).forEach((element, i) => {\r\n    const name = element.split('/').pop().split('.')[0];\r\n    obj[name] = element;\r\n  });\r\n  return obj;\r\n}\r\n\r\nlet images = {};\r\ntry {\r\n  images = importAll(require.context('./media/image_scaled', false, /\\.(png|jpe?g|svg|gif)$/));\r\n} catch (error) { }\r\nexport { images };\r\n\r\nfunction select(arr, def = false) {\r\n  for (const condition of arr) {\r\n    if (condition[0]) return condition[1];\r\n  }\r\n  return def;\r\n}\r\n\r\n// function roll(max, min = 0) {\r\n//   return Math.floor(Math.random() * (max - min + 1) + min);\r\n// }\r\n\r\nfunction _is(path, values, prepend = '') {\r\n  const option = getOption(prepend + path, this.options);\r\n  if (isOptionDisabled(option, this.options)) return false;\r\n  if (values === undefined) {\r\n    return option.selected > 0;\r\n  }\r\n  return values.includes(_val.call(this, option));\r\n}\r\n\r\nfunction _isnt(path, values, prepend = '') {\r\n  return !values.includes(_val.call(this, path, prepend));\r\n}\r\n\r\nfunction _val(path, prepend = '') {\r\n  let option;\r\n  if (typeof path === 'string') {\r\n    option = getOption(prepend + path, this.options);\r\n  }\r\n  else {\r\n    option = path;\r\n  }\r\n  if (isOptionDisabled(option, this.options)) return false;\r\n  if (option.selected === undefined) {\r\n    const selected = getSelected(option, this.options);\r\n    if (selected.length === 0) return false;\r\n    return selected[0].slug;\r\n  }\r\n  return option.selected;\r\n}\r\n\r\n// function bindData(data) {\r\n//   return {\r\n//     is: _is.bind(data),\r\n//     isnt: _isnt.bind(data),\r\n//     val: _val.bind(data),\r\n//   };\r\n// }\r\n\r\nconst options = {\r\n  intro: {\r\n    name: 'A quick trip',\r\n    type: 'story',\r\n    text: <React.Fragment>\r\n      <p>Due to some disturbances in spacetime you were ripped out of your reality. Your soul is currently hovering in an endless void. You have no senses to feel anything yet you realize you can steer yourself to any of the myriad of realities scattered around you. Each one of them branching into countless others. In what world will you end up depends solely on your choices.</p>\r\n    </React.Fragment>,\r\n    image: introImg,\r\n    classes: ['intro'],\r\n  },\r\n  self: {\r\n    name: 'Your New Self',\r\n    type: 'story',\r\n    text: <p>You will receive a new body. It will be healthy and void of any genetic defects.</p>,\r\n  },\r\n  age: {\r\n    name: 'Age',\r\n    type: 'group',\r\n    text: <p>At what age will your new body be?</p>,\r\n    min: 1,\r\n    disableOpenButton: true,\r\n    options: {\r\n      child: {\r\n        name: 'Child',\r\n        text: <p>Your soul will enter a body that would otherwise be a stillborn. Your parents will provide for your basic needs but you won't have much autonomy at first. Your mind and memory will be fully functional but you will have to adapt to your new body making you as clumsy as every other newborn.</p>,\r\n        imageCx: 30,\r\n        cost: {\r\n          gold: 1,\r\n        },\r\n      },\r\n      teen: {\r\n        name: 'Teen',\r\n        text: <p>You will appear in a secluded area in a body similar to people around but not belonging to anyone in praticular. You will have a body of a child around 12 years old which will limit your strating strength and possibilities.</p>,\r\n        selected: 1,\r\n      },\r\n      adult: {\r\n        name: 'Adult',\r\n        text: <p>You will appear in a secluded area in a body similar to people around but not belonging to anyone in praticular. You will have a body of a fully grown adult below 30 years of age.</p>,\r\n        cost: {\r\n          gold: 1,\r\n        },\r\n      },\r\n    },\r\n  },\r\n  parents: {\r\n    name: 'Parents',\r\n    text: <p>Who will your parents be?</p>,\r\n    type: 'group',\r\n    test: data => _is.call(data, 'age/child'),\r\n    image: images.parents_random,\r\n    min: 1,\r\n    disableOpenButton: true,\r\n    options: {\r\n      abandoned: {\r\n        name: 'Abandoned',\r\n        cost: {\r\n          gold: -1,\r\n        },\r\n      },\r\n      random: {\r\n        name: 'Random',\r\n        selected: 1,\r\n      },\r\n      highStatus: {\r\n        name: 'Hight Status',\r\n        cost: {\r\n          gold: 5,\r\n        },\r\n      },\r\n      royalty: {\r\n        name: 'Royalty',\r\n        cost: {\r\n          gold: 10,\r\n        },\r\n      },\r\n    },\r\n  },\r\n  body: {\r\n    name: 'Physical Prowess',\r\n    type: 'group',\r\n    disableOpenButton: true,\r\n    min: 1,\r\n    options: {\r\n      normal: {\r\n        name: 'Normal Body',\r\n        selected: 1,\r\n      },\r\n      peak: {\r\n        name: 'Peak Human',\r\n        cost: {\r\n          gold: 2,\r\n        },\r\n      },\r\n      heroic: {\r\n        name: 'Heroic',\r\n        imageCy: 0,\r\n        cost: {\r\n          gold: 5,\r\n        },\r\n      },\r\n      focus: {\r\n        name: 'Focus',\r\n        text: <p>To which type will your body belong? This affects your looks and abilities both initial and the natural tendency of your body.</p>,\r\n        type: 'group',\r\n        min: 1,\r\n        test: data => _isnt.call(data, 'body', ['normal', false]),\r\n        disableOpenButton: true,\r\n        options: {\r\n          agility: {\r\n            name: 'Agility',\r\n          },\r\n          balanced: {\r\n            name: 'Balanced',\r\n            selected: 1,\r\n          },\r\n          strength: {\r\n            name: 'Strength',\r\n          },\r\n        },\r\n      },\r\n    },\r\n  },\r\n  uniqueRace: {\r\n    name: 'Unique Race',\r\n    text: <p>You can choose your body to have any biologicaly possible traits. Otherwise you have to choose one of the races present in your new world.</p>,\r\n    cost: {\r\n      gold: 10,\r\n    },\r\n  },\r\n  markings: {\r\n    name: 'Foretold Mark',\r\n    text: <p>Your body will bear a marking passed down in legends. It won't do anything except changing people's perception of you. The mark will be possible to hide with some effort.</p>,\r\n    type: 'group',\r\n    image: images.markings_demigod,\r\n    disableOpenButton: true,\r\n    options: {\r\n      saviour: {\r\n        name: 'Mark of the Saviour',\r\n        cost: {\r\n          gold: 2,\r\n        },\r\n      },\r\n      demigod: {\r\n        name: 'Mark of the Demigod',\r\n        cost: {\r\n          gold: 5,\r\n        },\r\n      },\r\n      doom: {\r\n        name: 'Mark of Doom',\r\n        cost: {\r\n          gold: 2,\r\n        },\r\n      },\r\n    },\r\n  },\r\n  yourMagic: {\r\n    name: 'Magic',\r\n    type: 'group',\r\n    test: data => _isnt.call(data, 'magicFrequency', ['none', false]),\r\n    min: 1,\r\n    disableOpenButton: true,\r\n    options: {\r\n      none: {\r\n        name: 'None',\r\n        text: <React.Fragment><p>You won't be able to wield the magic of your new world no matter what.</p><p>Gained gold depends on the frequency of people with access to magic.</p></React.Fragment>,\r\n        cost: {\r\n          gold: data => -select([\r\n            [_is.call(data, 'magicFrequency/few'), 1],\r\n            [_is.call(data, 'magicFrequency/rare'), 2],\r\n            [_is.call(data, 'magicFrequency/common'), 5],\r\n            [_is.call(data, 'magicFrequency/half'), 10],\r\n            [_is.call(data, 'magicFrequency/everyone'), 15],\r\n          ]),\r\n        },\r\n      },\r\n      same: {\r\n        name: 'Same as Inhabitants',\r\n        text: <p>You will have the same chance of being able to use magic as every other denizen of your new world.</p>,\r\n        selected: 1,\r\n      },\r\n      guaranteed: {\r\n        name: 'Guaranteed',\r\n        text: <React.Fragment><p>You will be guaranteed to have the strongest form of magic possible on your new world.</p><p>Cost depends on the frequency of people with access to magic.</p></React.Fragment>,\r\n        cost: {\r\n          gold: data => select([\r\n            [_is.call(data, 'magicFrequency/few'), 15],\r\n            [_is.call(data, 'magicFrequency/rare'), 10],\r\n            [_is.call(data, 'magicFrequency/common'), 5],\r\n            [_is.call(data, 'magicFrequency/half'), 2],\r\n            [_is.call(data, 'magicFrequency/everyone'), 1],\r\n          ]),\r\n        },\r\n      },\r\n    },\r\n  },\r\n  uniqueMagic: {\r\n    name: 'Unique Magic',\r\n    cost: {\r\n      gold: 25,\r\n    },\r\n  },\r\n  world: {\r\n    name: 'Your New World',\r\n    type: 'story',\r\n  },\r\n  species: {\r\n    name: 'Sapient Species',\r\n    type: 'group',\r\n    text: <p>What king of sapient creatures will inhabit the world?</p>,\r\n    min: 1,\r\n    disableOpenButton: true,\r\n    options: {\r\n      none: {\r\n        name: 'None',\r\n        cost: {\r\n          gold: -10,\r\n        },\r\n      },\r\n      humans: {\r\n        name: 'Humans',\r\n        selected: 1,\r\n      },\r\n      fantasy: {\r\n        name: 'Fantasy Species',\r\n        text: <p>Assortment of standard fantasy races.</p>,\r\n        cost: {\r\n          gold: 5,\r\n        },\r\n      },\r\n      custom: {\r\n        name: 'Custom',\r\n        cost: {\r\n          gold: 10,\r\n        },\r\n      },\r\n    },\r\n  },\r\n  geography: {\r\n    name: 'Geography',\r\n    type: 'group',\r\n    disableOpenButton: true,\r\n    min: 1,\r\n    options: {\r\n      island: {\r\n        name: 'Island',\r\n      },\r\n      world: {\r\n        name: 'World',\r\n        selected: 1,\r\n      },\r\n      megaWorld: {\r\n        name: 'Mega World',\r\n        test: data => _is.call(data, 'technology/nearFuture'),\r\n        showWhenDisabled: true,\r\n        disabledText: <p>Technology level has to be \"near future\"</p>,\r\n      },\r\n    },\r\n  },\r\n  population: {\r\n    name: 'Population',\r\n    type: 'group',\r\n    min: 1,\r\n    disableOpenButton: true,\r\n    options: {\r\n      sparselyPopulated: {\r\n        name: 'Sparsely Populated',\r\n      },\r\n      mediumPopulation: {\r\n        name: 'Medium Population',\r\n        selected: 1,\r\n      },\r\n      denslyPopulated: {\r\n        name: 'Densly Populated',\r\n        test: data => _is.call(data, 'technology', ['ancient', 'medieval', 'industrial', 'modern', 'nearFuture']),\r\n        showWhenDisabled: true,\r\n        disabledText: <p>Technology level has to be at least ancient.</p>,\r\n      },\r\n    },\r\n  },\r\n  balanceOfPower: {\r\n    name: 'Balance of Power',\r\n    type: 'group',\r\n    text: <p>What are the realtions between races, countries and people?</p>,\r\n    test: data => _isnt.call(data, 'species', ['none', false]),\r\n    disableOpenButton: true,\r\n    min: 1,\r\n    options: {\r\n      idyll: {\r\n        name: 'Idyll',\r\n        text: <p>Mostly everyone lives in peace with themselves and each other. War and conflict practically does not exist.</p>,\r\n        cost: {\r\n          gold: 10,\r\n          test: -10,\r\n        },\r\n      },\r\n      balanced: {\r\n        name: 'Balanced',\r\n        text: <p>Forces of races and great nations exist in an equilibrium where everyone is discouraged from atacking each other. It doesn't seem like anything will change this balance anytime soon. This means conflicts on large scale are very rare.</p>,\r\n        cost: {\r\n          gold: 5,\r\n        },\r\n      },\r\n      natural: {\r\n        name: 'Natural',\r\n        text: <p>Similar to your previous world. Conflicts happen aplenty but usually, majority of the population manages to get by.</p>,\r\n        selected: 1,\r\n      },\r\n      strained: {\r\n        name: 'Strained',\r\n        text: <p>The world is on a verge of a revolution of some sort. When the war finally breaks out it will change the societal ladscape of the world.</p>,\r\n        cost: {\r\n          gold: -5,\r\n        },\r\n      },\r\n      hellish: {\r\n        name: 'Hellish',\r\n        text: <p>War is the default state of the world. Most of each country's budget is spent on warfare or repairing war losses. Alliances and peace are possible but will require significant effort.</p>,\r\n        cost: {\r\n          gold: -10,\r\n        },\r\n      },\r\n    },\r\n  },\r\n  technology: {\r\n    name: 'Technology',\r\n    type: 'group',\r\n    test: data => !_is.call(data, 'species/none'),\r\n    disableOpenButton: true,\r\n    min: 1,\r\n    options: {\r\n      prehistoric: {\r\n        name: 'Prehistoric',\r\n      },\r\n      stoneAge: {\r\n        name: 'Stone Age',\r\n      },\r\n      agricultural: {\r\n        name: 'Agricultural',\r\n      },\r\n      bronzeAge: {\r\n        name: 'Bronze Age',\r\n      },\r\n      ironAge: {\r\n        name: 'Iron Age',\r\n      },\r\n      ancient: {\r\n        name: 'Ancient',\r\n      },\r\n      medieval: {\r\n        name: 'Medieval',\r\n        selected: 1,\r\n      },\r\n      industrial: {\r\n        name: 'Industrial',\r\n      },\r\n      modern: {\r\n        name: 'Modern',\r\n      },\r\n      nearFuture: {\r\n        name: 'Near Future',\r\n      },\r\n    },\r\n  },\r\n  magicFrequency: {\r\n    name: 'Magic Frequency',\r\n    text: <p>How many sapient creatures on your new world will be able to use magic?</p>,\r\n    type: 'group',\r\n    test: data => !_is.call(data, 'species/none'),\r\n    min: 1,\r\n    disableOpenButton: true,\r\n    options: {\r\n      none: {\r\n        name: 'None',\r\n        text: <p>There is no magic at all.</p>,\r\n        selected: 1,\r\n      },\r\n      few: {\r\n        name: 'Very Few',\r\n        text: <p>There will be only a handfull of people with access to magic.</p>,\r\n      },\r\n      rare: {\r\n        name: 'Rare',\r\n        text: <p>Magic will be rare, only about 0.001% of population will have access to it.</p>,\r\n      },\r\n      common: {\r\n        name: 'Common',\r\n        text: <p>About one in twenty people will have access to magic.</p>,\r\n      },\r\n      half: {\r\n        name: 'Half',\r\n      },\r\n      everyone: {\r\n        name: 'Mostly Everyone',\r\n      },\r\n    },\r\n  },\r\n  magicPower: {\r\n    name: 'Magic Power',\r\n    text: <p>How powerfull will the magic be?</p>,\r\n    type: 'group',\r\n    test: data => !_is.call(data, 'species/none') && !_is.call(data, 'magicFrequency/none'),\r\n    disableOpenButton: true,\r\n    min: 1,\r\n    options: {\r\n      convenience: {\r\n        name: 'Convenience',\r\n        selected: 1,\r\n      },\r\n      heroic: {\r\n        name: 'Heroic',\r\n      },\r\n      powerfull: {\r\n        name: 'Powerfull',\r\n      },\r\n      worldShattering: {\r\n        name: 'World Shattering',\r\n      },\r\n    },\r\n  },\r\n  magicSituation: {\r\n    name: 'Situation of Mages',\r\n    type: 'group',\r\n    min: 1,\r\n    test: data => _isnt.call(data, 'magicFrequency', ['none', false]),\r\n    disableOpenButton: true,\r\n    options: {\r\n      feared: {\r\n        name: 'Feared',\r\n        test: data => !_is.call(data, 'magicFrequency/everyone'),\r\n        showWhenDisabled: true,\r\n        disabledText: <p>Mages cannot be feared if everyone is a mage.</p>,\r\n      },\r\n      hidden: {\r\n        name: 'Hidden',\r\n        test: data => !_is.call(data, 'magicFrequency/everyone'),\r\n        showWhenDisabled: true,\r\n        disabledText: <p>Mages cannot be hidden if everyone is a mage.</p>,\r\n      },\r\n      casual: {\r\n        name: 'Casual',\r\n        text: <p>Magic exists and is use like any other resource.</p>,\r\n        selected: 1,\r\n      },\r\n      revered: {\r\n        name: 'Revered',\r\n      },\r\n      worshipped: {\r\n        name: 'Worshipped',\r\n      },\r\n    },\r\n  },\r\n  epilogue: {\r\n    name: 'Epilogue',\r\n    type: 'story',\r\n    text: data => <React.Fragment>\r\n\r\n      {data.errors.length === 0 ? <p>This is the end, would you like to see the summary?</p> : <p>You cannot see the summary yet. Check the menu for errors.</p>}\r\n      {data.errors.length === 0 ? <EnterSummaryMode state={true} /> : ''}\r\n    </React.Fragment>,\r\n    test: data => !data.settings.isSummaryMode,\r\n  },\r\n};\r\n\r\nexport default options;\r\n","const settings = prepareSettings({\r\n  currency: {\r\n    gold: {\r\n      name: 'Gold',\r\n      value: 100,\r\n    },\r\n  },\r\n});\r\n\r\nfunction prepareSettings(sett) {\r\n  for (const slug in sett.currencies) {\r\n    const currency = sett.currencies[slug];\r\n    currency.slug = slug;\r\n  }\r\n  sett.hideDisabledOptions = sett.hideDisabledOptions === undefined ?\r\n    false : sett.hideDisabledOptions\r\n  sett.maxDepth = sett.maxDepth === undefined ? 2 : sett.maxDepth;\r\n  sett.usesStages = sett.usesStages === undefined ? false : sett.usesStages;\r\n  sett.isSummaryMode = sett.isSummaryMode === undefined ? false : sett.isSummaryMode;\r\n\r\n  return sett;\r\n}\r\n\r\nexport default settings;","import settings from \"./../settings\";\r\nimport { clone } from \"./../functions/helpers\";\r\nimport getSubptions from \"./../functions/getSubptions\";\r\nimport userFunctions from \"./../userFunctions\";\r\nimport { images } from \"./../options\";\r\n\r\nfunction getCurrencyName(searchedSlug, option, options) {\r\n  if (settings.currency !== undefined) {\r\n    for (const currencySlug in settings.currency) {\r\n      if (currencySlug === searchedSlug) {\r\n        return settings.currency[currencySlug].name;\r\n      }\r\n    }\r\n  }\r\n\r\n  const tempPath = clone(option.path).split('/').reverse().filter(e => e !== '');\r\n  let currentOption = { options };\r\n  while (tempPath.length) {\r\n    currentOption = getSubptions(currentOption, options)[tempPath.pop()];\r\n    if (currentOption === undefined) break;\r\n    const currencyGroup = currentOption.optionCurrency || currentOption.childOptionCurrency;\r\n    if (currencyGroup !== undefined) {\r\n      for (const currencySlug in currencyGroup) {\r\n        if (currencySlug === searchedSlug) {\r\n          return currencyGroup[currencySlug].name;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return searchedSlug;\r\n}\r\n\r\nfunction replaceFunction(userFunction) {\r\n  if (userFunction === undefined) return undefined;\r\n  if (typeof userFunction === 'function') {\r\n    userFunctions.push(userFunction);\r\n    userFunction = {\r\n      isUserFunction: true,\r\n      functionId: userFunctions.length - 1\r\n    };\r\n  }\r\n  return userFunction;\r\n}\r\n\r\nfunction replaceFunctions(option, options) {\r\n  option.text = replaceFunction(option.text);\r\n  option.test = replaceFunction(option.test);\r\n  option.options = replaceFunction(option.options);\r\n\r\n  if (option.cost !== undefined) {\r\n    for (const currencySlug in option.cost) {\r\n      if (option.cost[currencySlug] === null) continue;\r\n      option.cost[currencySlug] = replaceFunction(option.cost[currencySlug]);\r\n      if (!option.cost[currencySlug].isUserFunction) {\r\n        option.cost[currencySlug] = {\r\n          value: option.cost[currencySlug],\r\n          nextValue: option.cost[currencySlug],\r\n        };\r\n      }\r\n      option.cost[currencySlug].name = getCurrencyName(currencySlug, option, options);\r\n    }\r\n  }\r\n}\r\n\r\nexport default function prepareOptions(currentOptions, path, options = currentOptions) {\r\n  for (const slug in currentOptions) {\r\n    const option = currentOptions[slug];\r\n\r\n    option.type = option.type === undefined ? 'option' : option.type;\r\n\r\n    option.min = option.min === undefined ? 0 : Math.max(option.min, 0);\r\n    if (option.max !== false) {\r\n      option.max = option.max === undefined ? 1 : Math.max(option.max, 0);\r\n    }\r\n\r\n    option.slug = slug;\r\n    option.path = path === undefined ? slug : path + '/' + slug;\r\n    if (option.image === undefined) {\r\n      const imageName = option.path.replace(/\\//g, '_');\r\n      if (images[imageName] !== undefined) {\r\n        option.image = images[imageName];\r\n      }\r\n    }\r\n    option.classes = option.classes === undefined ? [] : option.classes;\r\n\r\n    if (option.options !== undefined && typeof option.options === 'function') {\r\n      option.functionalChildren = option.functionalChildren === undefined ?\r\n        {} : option.functionalChildren;\r\n    }\r\n\r\n    option.options = prepareOptions(option.options, option.path, options);\r\n    if (option.type === 'option') {\r\n      if (option.hasIndividualChildren) {\r\n        option.selected = option.selected === undefined ? {} : option.selected;\r\n        option.nextChildId = 0;\r\n      }\r\n      else {\r\n        option.selected = option.selected === undefined ? option.min : option.selected;\r\n      }\r\n    }\r\n\r\n    replaceFunctions(option, options);\r\n\r\n  }\r\n  return currentOptions;\r\n}\r\n","import prepareOptions from \"./prepareOptions\";\r\nimport { getParent, clone, deepClone } from \"../functions/helpers\";\r\nimport getOption from \"../functions/getOption\";\r\nimport getSelected from \"../functions/getSelected\";\r\nimport getSelectedCount from \"../functions/getSelectedCount\";\r\n\r\nfunction buyIndividualChild(option, options) {\r\n  if (option.max !== false && getSelectedCount(option, options) >= option.max) return;\r\n\r\n  const slug = option.nextChildId++;\r\n  const childOptions = option.individualOptions === undefined ?\r\n    {} : deepClone(option.individualOptions);\r\n  const childCurrency = option.childOptionCurrency === undefined ?\r\n    undefined : clone(option.childOptionCurrency);\r\n  const childName = option.defaultChildName || option.name;\r\n  const child = {\r\n    [slug]: {\r\n      type: 'group',\r\n      name: childName + ' - ' + slug,\r\n      options: childOptions,\r\n      isChild: true,\r\n      max: false,\r\n      optionCurrency: childCurrency,\r\n    }\r\n  };\r\n  option.selected[slug] = prepareOptions(child, option.path, options)[slug];\r\n}\r\n\r\nfunction deselectSiblings(option, options, parent) {\r\n  if (!option.disableUseAsSelect) {\r\n    if (parent === undefined) {\r\n      parent = getParent(option, options);\r\n    }\r\n\r\n    if (\r\n      !parent.disableUseAsSelect &&\r\n      parent && parent.type === 'group' &&\r\n      parent.max === 1 &&\r\n      option.max === 1\r\n    ) {\r\n      const selected = getSelected(parent, options);\r\n\r\n      for (const slug in selected) {\r\n        selected[slug].selected--;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction buySimpleChild(option, options) {\r\n  if (option.max !== false && option.selected >= option.max) return;\r\n\r\n  deselectSiblings(option, options);\r\n  option.selected++;\r\n}\r\n\r\nfunction buySyntheticOption(option, options) {\r\n  if (option.max !== false && option.selected >= option.max) return;\r\n\r\n  const parent = getParent(option, options);\r\n  deselectSiblings(option, options, parent);\r\n\r\n  parent.functionalChildren[option.slug].selected++;\r\n}\r\n\r\nexport default function buyOption(option, options) {\r\n  if (option.type === 'group') return;\r\n  if (option.isSynthetic) {\r\n    buySyntheticOption(option, options);\r\n  }\r\n  else {\r\n    option = getOption(option, options);\r\n    if (option.hasIndividualChildren) {\r\n      buyIndividualChild(option, options);\r\n    }\r\n    else {\r\n      buySimpleChild(option, options);\r\n    }\r\n  }\r\n}\r\n","import getOption from \"./../functions/getOption\";\r\nimport { getParent } from \"./../functions/helpers\";\r\n\r\nexport default function sellOption(option, options, path) {\r\n  if (option.isSynthetic) {\r\n    if (option.selected <= option.min) return;\r\n    const parent = getParent(option, options);\r\n    parent.functionalChildren[option.slug].selected--;\r\n    return;\r\n  }\r\n\r\n  option = getOption(option, options);\r\n  if (option.type === 'option') {\r\n    if (option.hasIndividualChildren) return;\r\n    if (option.selected <= option.min) return;\r\n    option.selected--;\r\n  }\r\n  else if (option.type === 'group') {\r\n    if (option.isChild) {\r\n      const parent = getParent(option, options);\r\n      delete parent.selected[option.slug];\r\n      if (option.path === path.join('/')) {\r\n        path.pop();\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { getParent } from \"../functions/helpers\";\r\nimport getOption from \"../functions/getOption\";\r\n\r\nfunction tradeSyntheticOption(option, options, value) {\r\n  const parent = getParent(option, options);\r\n  if (parent.functionalChildren[option.slug] === undefined) {\r\n    parent.functionalChildren[option.slug] = {\r\n      selected: 0,\r\n    };\r\n  }\r\n  parent.functionalChildren[option.slug].selected = value;\r\n}\r\n\r\nexport default function tradeOption(option, options, value) {\r\n  if (\r\n    option.type === 'group' ||\r\n    option.hasIndividualChildren ||\r\n    (option.max !== false && value > option.max) ||\r\n    value < option.min\r\n  ) return;\r\n\r\n  if (option.isSynthetic) {\r\n    tradeSyntheticOption(option, options);\r\n  }\r\n  else {\r\n    option = getOption(option, options);\r\n    option.selected = value;\r\n  }\r\n}\r\n","import getSubptions from \"./getSubptions\";\r\n\r\nexport default function forEachOption(parentOption, state, callback, prepareCallback) {\r\n  if (prepareCallback !== undefined) {\r\n    prepareCallback(parentOption, state);\r\n  }\r\n\r\n  if (\r\n    state.settings.usesStages &&\r\n    parentOption.path !== undefined &&\r\n    parentOption.path.split('/')[0] !== state.settings.currentStage\r\n  ) {\r\n    return;\r\n  }\r\n\r\n  const suboptions = getSubptions(parentOption, state.options);\r\n  for (const slug in suboptions) {\r\n    const option = suboptions[slug];\r\n    callback(option, parentOption, state);\r\n    forEachOption(option, state, callback, prepareCallback);\r\n  }\r\n}","import isOptionDisabled from '../functions/isOptionDisabled';\r\nimport getSelectedCount from '../functions/getSelectedCount';\r\nimport { getReadablePath } from './../functions/helpers';\r\nimport forEachOption from '../functions/forEachOption';\r\n\r\n/**\r\n * Checks if values of global currencies are less than minimum.\r\n * @param {object} settings Global settings.\r\n * @param {object} options Global options.\r\n * @param {array} errors Error array to push errors into.\r\n */\r\nfunction checkGlobalCurrencies(settings, options, errors) {\r\n  if (settings.currency === undefined) return;\r\n  for (const currencySlug in settings.currency) {\r\n    const currency = settings.currency[currencySlug];\r\n    let min = currency.min === undefined ? 0 : currency.min;\r\n    if (min !== false && currency.currentValue < min) {\r\n      errors.push({\r\n        text: `Currency ${currency.name} cannot be below ${min}.`,\r\n        code: `currency-${currency.slug}`,\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Checks if values of option's currencies are less than minimum.\r\n * @param {object} option The option to be checked.\r\n * @param {object} options Global options.\r\n * @param {array} errors Error array to push errors into.\r\n */\r\nfunction checkOptionCurrencies(option, options, errors) {\r\n  if (option.optionCurrency === undefined) return;\r\n  for (const currencySlug in option.optionCurrency) {\r\n    const currency = option.optionCurrency[currencySlug];\r\n    const min = currency.min === undefined ? 0 : currency.min;\r\n\r\n    if (min !== false && currency.currentValue < min) {\r\n      errors.push({\r\n        path: option.path,\r\n        text: `Currency ${currency.name} in ${getReadablePath(option.path, options)} cannot be below ${min}.`,\r\n        code: `currency-${option.path}-${currency.slug}`,\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\n/** Checks if an option is selected less than minimum or more than maximum times.\r\n * @param {object} option The option to be checked.\r\n * @param {object} options Global options.\r\n * @param {array} errors Error array to push errors into.\r\n */\r\nfunction checkMinMaxSelected(option, options, errors) {\r\n  if (option.min === false && option.max === false) return;\r\n  const selectedCount = getSelectedCount(option, options);\r\n  if (option.min !== false) {\r\n    if (selectedCount < option.min) {\r\n      errors.push({\r\n        path: option.path,\r\n        text: `Option ${getReadablePath(option.path, options)} cannot have less than ${option.min} selected.`,\r\n        code: `option-${option.path}-min`,\r\n      });\r\n    }\r\n  }\r\n  if (option.max !== false) {\r\n    if (selectedCount > option.max) {\r\n      errors.push({\r\n        path: option.path,\r\n        text: `Option ${getReadablePath(option.path, options)} cannot have more than ${option.max} selected.`,\r\n        code: `option-${option.path}-max`,\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Finds errors in selected options.\r\n * @param {object} state Global state.\r\n */\r\nexport default function findErrors(state) {\r\n  state.errors = [];\r\n  forEachOption({ options: state.options }, state, (option, parent, { options, errors }) => {\r\n    if (option.type === 'optionsContainer') return;\r\n    if (isOptionDisabled(option, options)) return;\r\n    checkMinMaxSelected(option, options, errors);\r\n    checkOptionCurrencies(option, options, errors);\r\n  });\r\n  checkGlobalCurrencies(state.settings, state.options, state.errors);\r\n}\r\n","import getSelectedCount from \"../functions/getSelectedCount\";\r\nimport getUserFunctionValue from \"../functions/getUserFunctionValue\";\r\n\r\nexport default function runUserFunctions(option, state, keys) {\r\n  for (const key of keys) {\r\n    if (key === 'cost') {\r\n      if (option.cost !== undefined) {\r\n        for (const currencySlug in option.cost) {\r\n          const currency = option.cost[currencySlug];\r\n\r\n          if (currency === null || !currency.isUserFunction) continue;\r\n          const selectedCount = getSelectedCount(option, state.options);\r\n          let cost = 0;\r\n          for (let i = 0; i < selectedCount; i++) {\r\n            cost += getUserFunctionValue(currency, {\r\n              index: i,\r\n              option,\r\n            }, false);\r\n          }\r\n          currency.value = cost;\r\n          getUserFunctionValue(currency, {\r\n            index: selectedCount,\r\n            option,\r\n          }, 'nextValue');\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      getUserFunctionValue(option[key], { option });\r\n    }\r\n  }\r\n}","function clearUserFunction(userFunction, propName = 'value') {\r\n  if (userFunction === undefined) return;\r\n  if (userFunction.isUserFunction) userFunction[propName] = undefined;\r\n}\r\n\r\nexport default function clearUserFunctions(option, keys) {\r\n  for (const key of keys) {\r\n    if (key === 'cost') {\r\n      if (option.cost !== undefined) {\r\n        for (const currencySlug in option.cost) {\r\n          const currency = option.cost[currencySlug];\r\n          if (currency === null || !currency.isUserFunction) continue;\r\n          clearUserFunction(currency);\r\n          clearUserFunction(currency, 'nextValue');\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      clearUserFunction(option[key]);\r\n    }\r\n  }\r\n}","import calculateCurrency from \"./calculateCurrency\";\r\nimport findErrors from './findErrors';\r\nimport isOptionDisabled from \"../functions/isOptionDisabled\";\r\nimport createSyntheticOptions from './createSyntheticOptions';\r\nimport runUserFunctions from \"./runUserFunctions\";\r\nimport clearUserFunctions from \"./clearUserFunctions\";\r\nimport getSelectedCount from \"../functions/getSelectedCount\";\r\nimport forEachOption from \"../functions/forEachOption\";\r\n\r\nfunction getInfo(option, parentOption, state) {\r\n  option.info = {\r\n    isDisabled: parentOption.info.isDisabled || isOptionDisabled(option, state.options),\r\n    isSelected: getSelectedCount(option, state.options) > 0,\r\n  };\r\n}\r\n\r\nfunction checkCurrencies(currentOptions, currencies, options) {\r\n  for (const currencySlug in currencies) {\r\n    currencies[currencySlug].currentValue = currencies[currencySlug].value;\r\n  }\r\n  calculateCurrency(currentOptions, currencies, options);\r\n}\r\n\r\nfunction checkStages(state) {\r\n  if (!state.settings.usesStages) return;\r\n  if (state.path.length === 0) {\r\n    state.path.push(state.settings.currentStage);\r\n  }\r\n}\r\n\r\nexport default function recalculateState(state) {\r\n  forEachOption({ options: state.options }, state, option => {\r\n    clearUserFunctions(option, ['test', 'cost', 'options']);\r\n  });\r\n  forEachOption({ options: state.options }, state, (option, parentOption, innerState) => {\r\n    getInfo(option, parentOption, innerState);\r\n    runUserFunctions(option, innerState, ['test', 'cost', 'options']);\r\n  }, (parentOption, innerState) => {\r\n    if (parentOption.info === undefined) {\r\n      parentOption.info = {};\r\n    }\r\n    createSyntheticOptions(parentOption, innerState.options);\r\n  });\r\n\r\n  forEachOption({ options: state.options }, state, (option, parentOption, innerState) => {\r\n    if (option.optionCurrency !== undefined) {\r\n      checkCurrencies(option.options, option.optionCurrency, innerState.options);\r\n    }\r\n  });\r\n  checkCurrencies(state.options, state.settings.currency, state.options);\r\n  checkStages(state);\r\n  findErrors(state);\r\n\r\n  forEachOption({ options: state.options }, state, option => {\r\n    clearUserFunctions(option, ['text']);\r\n  });\r\n  forEachOption({ options: state.options }, state, (option, parentOption, innerState) => {\r\n    runUserFunctions(option, innerState, ['text']);\r\n  });\r\n}","import isOptionDisabled from '../functions/isOptionDisabled';\r\nimport getSubptions from \"../functions/getSubptions\";\r\nimport getSelectedCount from '../functions/getSelectedCount';\r\n\r\n/**\r\n * Calculate how much of each currency is left.\r\n * @param {object} currentOptions Options to check.\r\n * @param {object} currentValues Current currency values.\r\n * @param {object} options Global options.\r\n */\r\nexport default function calculateCurrency(currentOptions, currentValues, options) {\r\n  for (const slug in currentOptions) {\r\n    const option = currentOptions[slug];\r\n    if (isOptionDisabled(option, options))\r\n      continue;\r\n    if (option.type === 'option') {\r\n      const selectedCount = getSelectedCount(option, options);\r\n      if (selectedCount > 0 && option.cost !== undefined) {\r\n        for (const currencySlug in option.cost) {\r\n          if (currentValues[currencySlug] === undefined)\r\n            continue;\r\n          let change = 0;\r\n          if (option.cost[currencySlug].isUserFunction) {\r\n            change = option.cost[currencySlug].value;\r\n          }\r\n          else {\r\n            change = option.cost[currencySlug].value * selectedCount;\r\n          }\r\n          currentValues[currencySlug].currentValue -= change;\r\n        }\r\n      }\r\n    }\r\n    const childOptions = getSubptions(option, options);\r\n    currentValues = calculateCurrency(childOptions, currentValues, options);\r\n  }\r\n  return currentValues;\r\n}\r\n","import prepareOptions from \"./prepareOptions\";\r\nimport { clone } from \"../functions/helpers\";\r\n\r\nexport default function createSyntheticOptions(option, options) {\r\n  if (option.options === undefined || !option.options.isUserFunction) return;\r\n\r\n  const syntheticOptions = clone(option.options.value);\r\n  for (const slug in syntheticOptions) {\r\n    syntheticOptions[slug] = {\r\n      ...syntheticOptions[slug],\r\n      isSynthetic: true,\r\n      selected: 0,\r\n    };\r\n    if (option.functionalChildren[slug] !== undefined) {\r\n      Object.assign(syntheticOptions[slug], option.functionalChildren[slug]);\r\n    }\r\n    if (syntheticOptions[slug].path === undefined) {\r\n      syntheticOptions[slug] = prepareOptions(\r\n        { [slug]: syntheticOptions[slug] },\r\n        option.path,\r\n        options\r\n      )[slug];\r\n    }\r\n  }\r\n\r\n  option.functionalChildren = syntheticOptions;\r\n}","import pipe from './../pipe';\r\nimport getOption from '../functions/getOption';\r\nimport { clone } from '../functions/helpers';\r\n\r\nexport default function changePath(action, state) {\r\n  let skipRecalculate = false;\r\n  if (action.previous) {\r\n    action.path = state.path.slice(0, state.path.length - 1);\r\n  }\r\n  // save the current scroll pos\r\n  if (state.path.length === 0) {\r\n    state.settings.scroll = action.scroll;\r\n  }\r\n  else {\r\n    const option = getOption(state.path, state.options);\r\n    option.scroll = action.scroll;\r\n  }\r\n  // save new path to the state\r\n  state.path = action.path.filter(e => e !== '');\r\n\r\n  if (!action.fromHistory) {\r\n    // push state to the browser's history\r\n    const historyState = { path: clone(state.path) };\r\n    window.history.pushState(historyState, \"\");\r\n  }\r\n\r\n  // change stage if necessary\r\n  if (action.isChangingStage) {\r\n    state.settings.currentStage = state.path[0];\r\n  }\r\n  else skipRecalculate = true;\r\n\r\n  // inform about new scroll position\r\n  if (state.path.length === 0) {\r\n    pipe.scroll = state.settings.scroll;\r\n  }\r\n  else {\r\n    pipe.scroll = getOption(state.path, state.options).scroll;\r\n  }\r\n  pipe.scroll = pipe.scroll ?? 0;\r\n\r\n  return skipRecalculate;\r\n}","import { createStore } from 'redux';\r\nimport produce from 'immer';\r\nimport options from './options';\r\nimport settings from './settings';\r\nimport prepareOptions from './reducer/prepareOptions';\r\nimport buyOption from \"./reducer/buyOption\";\r\nimport sellOption from \"./reducer/sellOption\";\r\nimport tradeOption from './reducer/tradeOption';\r\nimport getOption from './functions/getOption';\r\nimport recalculateState from './reducer/recalculateState';\r\nimport pipe from './pipe';\r\nimport changePath from './reducer/changePath';\r\n\r\nconst initialState = {\r\n  path: [],\r\n  settings,\r\n  options: prepareOptions(options, undefined),\r\n  errors: [],\r\n};\r\n\r\nfunction rootReducer(state = initialState, action = '') {\r\n  return produce(state, newState => {\r\n    pipe.state = newState;\r\n    let skipRecalculate = false;\r\n    switch (action.type) {\r\n      case 'BUY_OPTION':\r\n        buyOption(action.option, newState.options);\r\n        break;\r\n      case 'SELL_OPTION':\r\n        sellOption(action.option, newState.options, newState.path);\r\n        break;\r\n      case 'TRADE_OPTION':\r\n        tradeOption(action.option, newState.options, action.value);\r\n        break;\r\n      case 'CHANGE_PATH':\r\n        skipRecalculate = changePath(action, newState);\r\n        break;\r\n      case 'CHANGE_TEXT':\r\n        const option = getOption(action.option, newState.options);\r\n        option[action.textProp] = action.text;\r\n        skipRecalculate = true;\r\n        break;\r\n      case 'CHANGE_SUMMARY_MODE':\r\n        newState.settings.isSummaryMode = action.state;\r\n        break;\r\n      default:\r\n    }\r\n\r\n    if (!skipRecalculate) recalculateState(newState);\r\n    return newState;\r\n  });\r\n}\r\n\r\nconst store = createStore(\r\n  rootReducer,\r\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\r\n);\r\n\r\nexport default store;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport App from './App';\r\nimport store from './store';\r\n\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);"],"sourceRoot":""}