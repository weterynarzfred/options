{"version":3,"sources":["media/image_scaled sync nonrecursive /.(png|jpe?g|svg|gif)$","media/image_scaled/age_adult.jpg","media/image_scaled/age_child.jpg","media/image_scaled/age_teen.jpg","media/image_scaled/body_heroic.jpg","media/image_scaled/body_normal.jpg","media/image_scaled/body_peak.jpg","media/image_scaled/geography_island.jpg","media/image_scaled/geography_megaWorld.jpg","media/image_scaled/geography_world.jpg","media/image_scaled/intro.jpg","media/image_scaled/markings_demigod.jpg","media/image_scaled/markings_doom.jpg","media/image_scaled/markings_saviour.jpg","media/image_scaled/parents_abandoned.jpg","media/image_scaled/parents_highStatus.jpg","media/image_scaled/parents_random.jpg","media/image_scaled/parents_royalty.jpg","media/image_scaled/species_custom.jpg","media/image_scaled/species_fantasy.jpg","media/image_scaled/species_humans.jpg","media/image_scaled/species_none.jpg","media/image_scaled/uniqueMagic.jpg","media/image_scaled/uniqueRace.jpg","pages/Checkbox.js","pages/Spinbox.js","propShapes.js","pages/AddChild.js","functions/getSelected.js","functions/getSelectedCount.js","userFunctions.js","pipe.js","functions/getUserFunctionValue.js","functions/isOptionDisabled.js","functions/getSubptions.js","functions/getOption.js","functions/helpers.js","pages/Delete.js","pages/SelectControls.js","pages/OptionControls.js","functions/getControlType.js","pages/Name.js","pages/Text.js","pages/Select.js","pages/Image.js","pages/CurrencyStats.js","pages/OptionCost.js","pages/OptionStats.js","containers/PathLink.js","containers/OptionLinks.js","containers/OptionFoot.js","pages/OptionBox.js","pages/DisabledOverlay.js","pages/Suboption.js","pages/SuboptionsPage.js","functions/getDepth.js","functions/getOptionInfo.js","functions/handlers.js","containers/SuboptionsContainer.js","pages/Option.js","pages/OptionsPage.js","containers/OptionsContainer.js","containers/OptionWideHead.js","containers/Breadcrumbs.js","containers/Nav.js","functions/getCurrencies.js","App.js","options.js","settings.js","reducer/prepareOptions.js","reducer/buyOption.js","reducer/sellOption.js","reducer/tradeOption.js","reducer/findErrors.js","reducer/runUserFunctions.js","reducer/clearUserFunctions.js","reducer/recalculateState.js","reducer/calculateCurrency.js","reducer/createSyntheticOptions.js","store.js","index.js"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","Checkbox","props","className","classNames","CheckboxSelected","selected","onClick","sell","buy","viewBox","d","handleBlur","setCurrentVal","event","value","Math","max","target","this","min","trade","Spinbox","useState","currenVal","useEffect","attr","type","onChange","onBlur","bind","onKeyDown","which","$","currentTarget","trigger","propShapes","userFunction","PropTypes","shape","isUserFunction","bool","functionId","number","any","text","oneOfType","node","currency","objectOf","name","string","currentValue","cost","object","option","oneOf","link","image","options","test","optionCurrency","hasIndividualChildren","individualOptions","childOptionCurrency","slug","path","isChild","isSynthetic","functionalChildren","AddChild","getSelected","suboptions","skipDisabled","undefined","getOption","suboption","disableUseAsSelect","push","filter","isOptionDisabled","getSelectedCount","getOwnPropertyNames","length","userFunctions","pipe","getUserFunctionValue","data","propName","state","parent","getParent","getSubptions","currentOptions","result","tempPath","Array","isArray","split","reverse","getReversedPath","clone","pop","JSON","parse","stringify","pathArray","isObject","Delete","handleNextClick","detail","fromOptionControl","selectedId","selectable","includeEmpty","handlePrevClick","SelectControls","OptionControls","info","isDisabled","controls","optionInfo","controlType","selectedSuboptionId","selectableSuboptions","getControlType","Name","isChangeable","change","Text","connect","disabledText","SelectDisabled","Image","src","style","backgroundImage","backgroundPositionY","cy","backgroundPositionX","cx","CurrencyStats","currencies","currencySlug","key","OptionCost","costs","costSlug","OptionCostPositive","nextValue","Option","propTypes","OptionStats","fromLink","dispatch","scroll","window","scrollY","openLink","depth","disableOpenButton","getOpenLink","errors","error","getStastsFrom","func","OptionBox","DisabledOverlay","Suboption","OptionSelected","isSelected","OptionOpenable","isOpenable","SelectableSuboption","isSelectableSuboption","OptionHasImage","OptionDisabled","imageCx","imageCy","SuboptionsPage","fromSuboptions","children","getDepth","getSuboptions","getOptionInfo","showWhenDisabled","dontUseImageOfSelected","handleBuy","handleSell","handleTrade","handleChange","textProp","suboptionsElements","currentOption","handleClick","OptionsPage","TransitionGroup","optionsElements","CSSTransition","timeout","width","breadCrumbs","i","currentPath","slice","optionName","Fragment","join","settings","currentCurrencies","assign","getCurrencies","on","addClass","setTimeout","remove","r","images","obj","forEach","element","importAll","require","select","arr","def","condition","_is","_isnt","values","includes","_val","call","intro","count","a","b","c","group","group2","self","age","child","gold","teen","adult","parents","abandoned","random","highStatus","royalty","body","normal","peak","heroic","focus","agility","balanced","strength","uniqueRace","markings","markings_demigod","saviour","demigod","doom","yourMagic","none","same","guaranteed","uniqueMagic","world","species","humans","fantasy","custom","geography","island","megaWorld","technology","prehistoric","stoneAge","agricultural","bronzeAge","ironAge","ancient","medieval","industrial","modern","nearFuture","magicFrequency","few","rare","common","half","everyone","magicPower","convenience","powerfull","worldShattering","magicSituation","hidden","casual","revered","worshipped","currentSettings","hideDisabledOptions","maxDepth","prepareSettings","getCurrencyName","searchedSlug","replaceFunction","replaceFunctions","prepareOptions","imageName","replace","nextChildId","buyIndividualChild","childOptions","deepClone","$$typeof","toString","v","bObject","k","childCurrency","childName","defaultChildName","deselectSiblings","buyOption","buySyntheticOption","buySimpleChild","sellOption","tradeOption","tradeSyntheticOption","getReadablePath","readableArray","checkOptionCurrencies","checkMinMaxSelected","selectedCount","findErrors","checkOptions","checkGlobalCurrencies","runUserFunctions","index","clearUserFunction","clearUserFunctions","forEachOption","parentOption","callback","prepareCallback","checkCurrencies","calculateCurrency","currentValues","recalculateState","innerState","getInfo","syntheticOptions","createSyntheticOptions","initialState","store","createStore","action","produce","newState","skipRecalculate","newPath","splice","__REDUX_DEVTOOLS_EXTENSION__","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.9ff03a6a.chunk.js","sourcesContent":["var map = {\n\t\"./age_adult.jpg\": 47,\n\t\"./age_child.jpg\": 48,\n\t\"./age_teen.jpg\": 49,\n\t\"./body_heroic.jpg\": 50,\n\t\"./body_normal.jpg\": 51,\n\t\"./body_peak.jpg\": 52,\n\t\"./geography_island.jpg\": 53,\n\t\"./geography_megaWorld.jpg\": 54,\n\t\"./geography_world.jpg\": 55,\n\t\"./intro.jpg\": 56,\n\t\"./markings_demigod.jpg\": 57,\n\t\"./markings_doom.jpg\": 58,\n\t\"./markings_saviour.jpg\": 59,\n\t\"./parents_abandoned.jpg\": 60,\n\t\"./parents_highStatus.jpg\": 61,\n\t\"./parents_random.jpg\": 62,\n\t\"./parents_royalty.jpg\": 63,\n\t\"./species_custom.jpg\": 64,\n\t\"./species_fantasy.jpg\": 65,\n\t\"./species_humans.jpg\": 66,\n\t\"./species_none.jpg\": 67,\n\t\"./uniqueMagic.jpg\": 68,\n\t\"./uniqueRace.jpg\": 69\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 46;","module.exports = __webpack_public_path__ + \"static/media/age_adult.fc86563e.jpg\";","module.exports = __webpack_public_path__ + \"static/media/age_child.7c458804.jpg\";","module.exports = __webpack_public_path__ + \"static/media/age_teen.02ee5fb6.jpg\";","module.exports = __webpack_public_path__ + \"static/media/body_heroic.5eb907cc.jpg\";","module.exports = __webpack_public_path__ + \"static/media/body_normal.f11b8203.jpg\";","module.exports = __webpack_public_path__ + \"static/media/body_peak.c2c1cb88.jpg\";","module.exports = __webpack_public_path__ + \"static/media/geography_island.ba3ef13f.jpg\";","module.exports = __webpack_public_path__ + \"static/media/geography_megaWorld.12f48870.jpg\";","module.exports = __webpack_public_path__ + \"static/media/geography_world.38b9d24c.jpg\";","module.exports = __webpack_public_path__ + \"static/media/intro.b7b8affc.jpg\";","module.exports = __webpack_public_path__ + \"static/media/markings_demigod.b0bc3a86.jpg\";","module.exports = __webpack_public_path__ + \"static/media/markings_doom.d61d696b.jpg\";","module.exports = __webpack_public_path__ + \"static/media/markings_saviour.5bba0f7c.jpg\";","module.exports = __webpack_public_path__ + \"static/media/parents_abandoned.46490d23.jpg\";","module.exports = __webpack_public_path__ + \"static/media/parents_highStatus.3943ec18.jpg\";","module.exports = __webpack_public_path__ + \"static/media/parents_random.62ee246b.jpg\";","module.exports = __webpack_public_path__ + \"static/media/parents_royalty.303deda0.jpg\";","module.exports = __webpack_public_path__ + \"static/media/species_custom.8a499bdc.jpg\";","module.exports = __webpack_public_path__ + \"static/media/species_fantasy.01f5beb5.jpg\";","module.exports = __webpack_public_path__ + \"static/media/species_humans.04039750.jpg\";","module.exports = __webpack_public_path__ + \"static/media/species_none.f2781cff.jpg\";","module.exports = __webpack_public_path__ + \"static/media/uniqueMagic.36c91ecf.jpg\";","module.exports = __webpack_public_path__ + \"static/media/uniqueRace.302a8a44.jpg\";","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nfunction Checkbox(props) {\r\n  return <div\r\n    className={classNames(\r\n      \"Checkbox\",\r\n      { CheckboxSelected: props.selected }\r\n    )}\r\n    onClick={() => {\r\n      if (props.selected) props.sell();\r\n      else props.buy();\r\n    }}\r\n  >\r\n    <svg viewBox=\"0 0 100 100\">\r\n      <path d=\"M17 53L42 83L77 23\" />\r\n    </svg>\r\n  </div>\r\n}\r\n\r\nCheckbox.propTypes = {\r\n  selected: PropTypes.bool,\r\n  sell: PropTypes.func,\r\n  buy: PropTypes.func,\r\n};\r\n\r\nexport default Checkbox;","import React, { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport $ from 'cash-dom';\r\n\r\nfunction handleBlur(setCurrentVal, event) {\r\n  let value = Math.max(event.target.value, this.min);\r\n  if (this.max !== false) value = Math.min(value, this.max);\r\n  setCurrentVal(value);\r\n  this.trade(value);\r\n}\r\n\r\nfunction Spinbox(props) {\r\n  const [currenVal, setCurrentVal] = useState(props.selected);\r\n  useEffect(() => {\r\n    setCurrentVal(props.selected);\r\n  }, [props.selected]);\r\n\r\n  const attr = {};\r\n  if (props.max !== false) attr.max = props.max;\r\n  return <div className=\"Spinbox\">\r\n    <button onClick={props.sell}>\r\n      <svg viewBox=\"0 0 100 100\">\r\n        <path d=\"M20 50L80 50\" />\r\n      </svg>\r\n    </button>\r\n    <input\r\n      type=\"number\"\r\n      value={currenVal}\r\n      min={props.min}\r\n      {...attr}\r\n      onChange={event => setCurrentVal(event.target.value)}\r\n      onBlur={handleBlur.bind(props, setCurrentVal)}\r\n      onKeyDown={event => {\r\n        if (event.which === 13) {\r\n          $(event.currentTarget).trigger('blur');\r\n        }\r\n      }}\r\n    />\r\n    <button onClick={props.buy}>\r\n      <svg viewBox=\"0 0 100 100\">\r\n        <path d=\"M20 50L80 50\" />\r\n        <path d=\"M50 20L50 80\" />\r\n      </svg>\r\n    </button>\r\n  </div>\r\n}\r\n\r\nSpinbox.propTypes = {\r\n  selected: PropTypes.number,\r\n  sell: PropTypes.func,\r\n  buy: PropTypes.func,\r\n  trade: PropTypes.func,\r\n  min: PropTypes.number,\r\n  max: PropTypes.oneOfType([\r\n    PropTypes.number,\r\n    PropTypes.bool,\r\n  ]),\r\n};\r\n\r\nexport default Spinbox;","import PropTypes from 'prop-types';\r\n\r\nconst propShapes = {};\r\n\r\npropShapes.userFunction = PropTypes.shape({\r\n  isUserFunction: PropTypes.bool,\r\n  functionId: PropTypes.number,\r\n  value: PropTypes.any,\r\n});\r\n\r\npropShapes.text = PropTypes.oneOfType([\r\n  PropTypes.node,\r\n  propShapes.userFunction,\r\n]);\r\n\r\npropShapes.currency = PropTypes.objectOf(PropTypes.shape({\r\n  name: PropTypes.string,\r\n  value: PropTypes.number,\r\n  currentValue: PropTypes.number,\r\n}));\r\n\r\npropShapes.cost = PropTypes.objectOf(PropTypes.object);\r\n\r\npropShapes.option = PropTypes.shape({\r\n  type: PropTypes.oneOf(['option', 'group', 'story']),\r\n  name: PropTypes.node,\r\n  text: propShapes.text,\r\n  link: PropTypes.string,\r\n  min: PropTypes.number,\r\n  max: PropTypes.oneOfType([\r\n    PropTypes.number,\r\n    PropTypes.bool,\r\n  ]),\r\n  image: PropTypes.string,\r\n  cost: propShapes.cost,\r\n  options: PropTypes.object,\r\n  test: propShapes.userFunction,\r\n  optionCurrency: propShapes.currency,\r\n  hasIndividualChildren: PropTypes.bool,\r\n  individualOptions: PropTypes.object,\r\n  childOptionCurrency: propShapes.currency,\r\n  slug: PropTypes.string,\r\n  path: PropTypes.string,\r\n  selected: PropTypes.oneOfType([\r\n    PropTypes.number,\r\n    PropTypes.objectOf(PropTypes.object),\r\n  ]),\r\n  isChild: PropTypes.bool,\r\n  isSynthetic: PropTypes.bool,\r\n  functionalChildren: PropTypes.object,\r\n});\r\n\r\nexport default propShapes;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nfunction AddChild(props) {\r\n  return <div\r\n    className=\"AddChild\"\r\n    onClick={props.buy}\r\n  >\r\n    add new\r\n  </div>\r\n}\r\n\r\nAddChild.propTypes = {\r\n  buy: PropTypes.func,\r\n};\r\n\r\nexport default AddChild;","import getOption from \"./getOption\";\r\nimport isOptionDisabled from \"./isOptionDisabled\";\r\n\r\nexport default function getSelected(option, options, skipDisabled = false) {\r\n\r\n  const selected = [];\r\n  let suboptions;\r\n  if (option.options !== undefined && option.options.isUserFunction) {\r\n    suboptions = option.functionalChildren;\r\n  }\r\n  else {\r\n    option = getOption(option, options);\r\n    if (option.options === undefined) return false;\r\n    suboptions = option.options;\r\n  }\r\n\r\n  for (const slug in suboptions) {\r\n    const suboption = suboptions[slug];\r\n    if (\r\n      suboption.type === 'option' &&\r\n      suboption.max === 1 &&\r\n      !suboption.disableUseAsSelect &&\r\n      suboption.selected\r\n    ) {\r\n      selected.push(suboption);\r\n    }\r\n  }\r\n\r\n  if (skipDisabled) {\r\n    return selected.filter(suboption => !isOptionDisabled(suboption, options));\r\n  }\r\n  return selected;\r\n}\r\n","import isOptionDisabled from \"./isOptionDisabled\";\r\nimport getSelected from \"./getSelected\";\r\n\r\nexport default function getSelectedCount(option, options) {\r\n  if (isOptionDisabled(option, options)) return false;\r\n\r\n  if (option.type === 'option') {\r\n    if (typeof option.selected === 'number') return option.selected;\r\n    return Object.getOwnPropertyNames(option.selected).length;\r\n  }\r\n  return getSelected(option, options, true).length;\r\n}\r\n","const userFunctions = [];\r\n\r\nexport default userFunctions;","const pipe = {};\r\n\r\nexport default pipe;","import userFunctions from \"./../userFunctions\";\r\nimport pipe from './../pipe';\r\n\r\nexport default function getUserFunctionValue(userFunction, data, propName = 'value') {\r\n  if (userFunction === undefined) return undefined;\r\n  if (!userFunction.isUserFunction) return userFunction;\r\n\r\n  if (propName === false) {\r\n    return userFunctions[userFunction.functionId]({\r\n      ...data,\r\n      ...pipe.state\r\n    });\r\n  }\r\n\r\n  if (userFunction[propName] === undefined) {\r\n    userFunction[propName] = userFunctions[userFunction.functionId]({\r\n      ...data,\r\n      ...pipe.state\r\n    });\r\n  }\r\n\r\n  return userFunction[propName];\r\n}\r\n","import getSelectedCount from \"./getSelectedCount\";\r\nimport getUserFunctionValue from \"./getUserFunctionValue\";\r\nimport { getParent } from \"./helpers\";\r\n\r\nexport default function isOptionDisabled(option, options) {\r\n  const parent = getParent(option, options);\r\n  if (parent) {\r\n    if (isOptionDisabled(parent, options)) return true;\r\n    if (parent.type === 'option') {\r\n      if (getSelectedCount(parent, options) === 0) return true;\r\n    }\r\n  }\r\n  if (option.test !== undefined) {\r\n    return !getUserFunctionValue(option.test, { option });\r\n  }\r\n  return false;\r\n}\r\n","import isOptionDisabled from './isOptionDisabled';\r\n\r\n/**\r\n * Finds suboptions, children or synthetic suboptions of the given option.\r\n * @param {object} option Option to get suboptions of.\r\n * @param {object} options Global options.\r\n * @param {boolean} skipDisabled Remove disabled options from the return value.\r\n * @returns {object} An object containing suboptions, or an empty object.\r\n */\r\nexport default function getSubptions(option, options, skipDisabled = false) {\r\n  let currentOptions;\r\n  if (option.hasIndividualChildren) {\r\n    currentOptions = option.selected;\r\n  }\r\n  else if (option.options !== undefined && option.options.isUserFunction) {\r\n    currentOptions = option.functionalChildren;\r\n  }\r\n  else {\r\n    currentOptions = option.options;\r\n  }\r\n  if (!currentOptions) return {};\r\n\r\n  if (skipDisabled) {\r\n    const result = {};\r\n    for (const slug in currentOptions) {\r\n      if (isOptionDisabled(currentOptions[slug], options))\r\n        continue;\r\n      result[slug] = currentOptions[slug];\r\n    }\r\n    return result;\r\n  }\r\n  return currentOptions;\r\n}\r\n","import getSubptions from \"./getSubptions\";\r\nimport { clone } from \"./helpers\";\r\n\r\nfunction getReversedPath(path) {\r\n  if (typeof path === 'object') {\r\n    if (!Array.isArray(path)) {\r\n      path = path.path.split('/');\r\n    }\r\n  }\r\n  else {\r\n    path = path.split('/');\r\n  }\r\n  return path.reverse().filter(e => e !== '');\r\n}\r\n\r\n/**\r\n * Gets options from the options object\r\n * @param {Array | Object} path \r\n * @param {Object} options \r\n */\r\nexport default function getOption(path, options) {\r\n  const tempPath = getReversedPath(clone(path));\r\n\r\n  let option = { options };\r\n  while (tempPath.length) {\r\n    option = getSubptions(option, options)[tempPath.pop()];\r\n  }\r\n  return option;\r\n}\r\n","import getOption from \"./getOption\";\r\nimport getSelectedCount from \"./getSelectedCount\";\r\n\r\nexport function clone(object) {\r\n  return JSON.parse(JSON.stringify(object));\r\n}\r\n\r\nexport function deepClone(object) {\r\n  if (\r\n    !object ||\r\n    (\r\n      object.$$typeof !== undefined &&\r\n      object.$$typeof.toString() === 'Symbol(react.element)'\r\n    )\r\n  ) return object;\r\n\r\n  let v;\r\n  let bObject = Array.isArray(object) ? [] : {};\r\n  for (const k in object) {\r\n    v = object[k];\r\n    bObject[k] = (typeof v === \"object\") ? deepClone(v) : v;\r\n  }\r\n\r\n  return bObject;\r\n}\r\n\r\nexport function getParent(option, options) {\r\n  let pathArray = option.path.split('/');\r\n  if (pathArray.length <= 1) return false;\r\n  pathArray.pop();\r\n  return getOption(pathArray, options);\r\n}\r\n\r\n/**\r\n * Creates options from children of another option.\r\n * @param {object} sourceOption Option to copy children from (with hasIndividualChildren).\r\n * @param {function} forEach Function to pass each option through.\r\n * @param {*} data Data to pass to the forEach function.\r\n */\r\nexport function optionsFromChildren(sourceOption, forEach, data) {\r\n  const result = {};\r\n  for (const slug in sourceOption.selected) {\r\n    const source = sourceOption.selected[slug];\r\n    result[slug] = {\r\n      name: source.name,\r\n    };\r\n    if (typeof forEach === 'function') {\r\n      result[slug] = forEach(result[slug], source, data);\r\n    }\r\n  }\r\n  return result;\r\n}\r\n\r\n/**\r\n * Checks if the option at the specified path is selected.\r\n * @param {string} path Path to check.\r\n * @param {object} options Global options.\r\n */\r\nexport function checkIfPathSelected(path, options) {\r\n  return getSelectedCount(getOption(path, options), options) > 0;\r\n}\r\n\r\n/**\r\n * Checks if the provided value is an object.\r\n * @param {*} value Value to be checked.\r\n * @returns {bool} `true` if `value` was an object. `false` otheriwise.\r\n */\r\nexport function isObject(value) {\r\n  if (value === null) return false;\r\n  return ((typeof value === 'function') || (typeof value === 'object'));\r\n}","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nfunction Delete(props) {\r\n  return <div\r\n    className=\"Delete\"\r\n    onClick={props.sell}\r\n  >\r\n    <svg viewBox=\"0 0 100 100\">\r\n      <path d=\"M20 20L80 80\" />\r\n      <path d=\"M20 80L80 20\" />\r\n    </svg>\r\n  </div>\r\n}\r\n\r\nDelete.propTypes = {\r\n  sell: PropTypes.func,\r\n};\r\n\r\nexport default Delete;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport propShapes from './../propShapes';\r\nimport { isObject } from '../functions/helpers';\r\n\r\nfunction handleNextClick(props, event) {\r\n  if (!isObject(event.detail)) event.detail = {};\r\n  event.detail.fromOptionControl = true;\r\n\r\n  if (props.selectedId === undefined) {\r\n    props.buy(props.selectable[0]);\r\n    return;\r\n  }\r\n\r\n  if (props.selectedId < props.selectable.length - 1) {\r\n    props.buy(props.selectable[props.selectedId + 1]);\r\n  }\r\n  else if (!props.includeEmpty) {\r\n    props.buy(props.selectable[0]);\r\n  }\r\n  else {\r\n    props.sell(props.selectable[props.selectedId]);\r\n  }\r\n}\r\n\r\nfunction handlePrevClick(props, event) {\r\n  if (!isObject(event.detail)) event.detail = {};\r\n  event.detail.fromOptionControl = true;\r\n\r\n  if (props.selectedId === undefined) {\r\n    props.buy(props.selectable[props.selectable.length - 1]);\r\n    return;\r\n  }\r\n\r\n  if (props.selectedId > 0) {\r\n    props.buy(props.selectable[props.selectedId - 1]);\r\n  }\r\n  else if (!props.includeEmpty) {\r\n    props.buy(props.selectable[props.selectable.length - 1]);\r\n  }\r\n  else {\r\n    props.sell(props.selectable[props.selectedId]);\r\n  }\r\n}\r\n\r\nfunction SelectControls(props) {\r\n  let name = 'none';\r\n  if (props.selectedId !== undefined) {\r\n    name = props.selectable[props.selectedId].name;\r\n  }\r\n\r\n  return <div className=\"SelectControls\">\r\n    <button onClick={handlePrevClick.bind(null, props)}>\r\n      <svg viewBox=\"0 0 100 100\">\r\n        <path d=\"M70 10L10 50L70 90z\" />\r\n      </svg>\r\n    </button>\r\n    <div className=\"SelectControlsCurrent\">{name}</div>\r\n    <button onClick={handleNextClick.bind(null, props)}>\r\n      <svg viewBox=\"0 0 100 100\">\r\n        <path d=\"M30 10L90 50L30 90z\" />\r\n      </svg>\r\n    </button>\r\n  </div>\r\n}\r\n\r\nSelectControls.propTypes = {\r\n  selectedId: PropTypes.number,\r\n  selectable: PropTypes.arrayOf(propShapes.option),\r\n  sell: PropTypes.func,\r\n  buy: PropTypes.func,\r\n  includeEmpty: PropTypes.bool,\r\n};\r\n\r\nexport default SelectControls;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Checkbox from './Checkbox';\r\nimport Spinbox from './Spinbox';\r\nimport propShapes from '../propShapes';\r\nimport AddChild from './AddChild';\r\nimport { isObject } from '../functions/helpers';\r\nimport Delete from './Delete';\r\nimport SelectControls from './SelectControls';\r\n\r\nfunction OptionControls(props) {\r\n  if (props.option.info.isDisabled) return false;\r\n  let controls;\r\n  switch (props.optionInfo.controlType) {\r\n    case 'checkbox':\r\n      controls = <Checkbox\r\n        selected={!!props.option.selected}\r\n        sell={props.sell.bind(null, props.option)}\r\n        buy={props.buy.bind(null, props.option)}\r\n      />;\r\n      break;\r\n    case 'spinbox':\r\n      controls = <Spinbox\r\n        selected={props.option.selected}\r\n        sell={props.sell.bind(null, props.option)}\r\n        buy={props.buy.bind(null, props.option)}\r\n        trade={props.trade.bind(null, props.option)}\r\n        min={props.option.min}\r\n        max={props.option.max}\r\n      />\r\n      break;\r\n    case 'addChild':\r\n      controls = <AddChild buy={props.buy.bind(null, props.option)} />;\r\n      break;\r\n    case 'delete':\r\n      controls = <Delete sell={props.sell.bind(null, props.option)} />;\r\n      break;\r\n    case 'select':\r\n      controls = <SelectControls\r\n        selectedId={props.optionInfo.selectedSuboptionId}\r\n        selectable={props.optionInfo.selectableSuboptions}\r\n        sell={props.sell}\r\n        buy={props.buy}\r\n        includeEmpty={props.option.min === 0}\r\n      />;\r\n      break;\r\n    default:\r\n      return false;\r\n  }\r\n\r\n  return <div\r\n    className=\"OptionControls\"\r\n    onClick={event => {\r\n      if (!isObject(event.detail)) event.detail = {};\r\n      event.detail.fromOptionControl = true;\r\n    }}\r\n  >\r\n    {controls}\r\n  </div>\r\n}\r\n\r\nOptionControls.propTypes = {\r\n  option: propShapes.option,\r\n  sell: PropTypes.func,\r\n  buy: PropTypes.func,\r\n  trade: PropTypes.func,\r\n  optionInfo: PropTypes.object,\r\n};\r\n\r\nexport default OptionControls;\r\n","export default function getControlType(option) {\r\n  if (option.type === 'option') {\r\n    if (option.hasIndividualChildren) {\r\n      return 'addChild';\r\n    }\r\n    if (option.max === 1) {\r\n      return 'checkbox';\r\n    }\r\n    if (option.max > 1 || option.max === false) {\r\n      return 'spinbox';\r\n    }\r\n  }\r\n  if (option.type === 'group') {\r\n    if (option.isChild) {\r\n      return 'delete';\r\n    }\r\n    if (option.max === 1 && !option.disableUseAsSelect) {\r\n      // has an additional test in getOptionsInfo\r\n      return 'select';\r\n    }\r\n  }\r\n  return false;\r\n}","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nfunction Name(props) {\r\n  if (props.isChangeable) {\r\n    return <div className=\"Name title\">\r\n      <input\r\n        value={props.name}\r\n        onChange={event => props.change('name', event.target.value)}\r\n      />\r\n    </div>;\r\n  }\r\n  return <div className=\"Name title\">\r\n    {props.name}\r\n  </div>;\r\n}\r\n\r\nName.propTypes = {\r\n  name: PropTypes.string,\r\n  isChangeable: PropTypes.bool,\r\n  change: PropTypes.func,\r\n};\r\n\r\nexport default Name;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Hyphenated from 'react-hyphen';\r\nimport propShapes from '../propShapes';\r\n\r\nfunction Text(props) {\r\n  if (props.isChangeable) {\r\n    return <div className=\"Text\">\r\n      <input\r\n        value={props.text}\r\n        onChange={event => props.change('text', event.target.value)}\r\n      />\r\n    </div>;\r\n  }\r\n\r\n  if (!props.text) return false;\r\n\r\n  return <div className=\"Text\">\r\n    <Hyphenated>\r\n      {props.text}\r\n    </Hyphenated>\r\n  </div>;\r\n}\r\n\r\nText.propTypes = {\r\n  text: propShapes.text,\r\n  isChangeable: PropTypes.bool,\r\n  change: PropTypes.func,\r\n};\r\n\r\nexport default Text;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport classNames from 'classnames';\r\nimport PropTypes from 'prop-types';\r\nimport propShapes from './../propShapes';\r\nimport Name from './Name';\r\nimport Text from './Text';\r\n\r\nfunction Select(props) {\r\n  if (props.optionInfo.controlType !== 'select') return false;\r\n\r\n  const selected = props.optionInfo.selectableSuboptions[props.optionInfo.selectedSuboptionId];\r\n  if (selected === undefined) return false;\r\n\r\n  let text = selected.text;\r\n  if (selected.info.isDisabled) {\r\n    text = selected.disabledText;\r\n  }\r\n\r\n  return <div className={classNames(\r\n    'Select',\r\n    { SelectDisabled: selected.info.isDisabled }\r\n  )}>\r\n    <Name\r\n      name={selected.name}\r\n      isChangeable={false}\r\n    />\r\n    <Text\r\n      text={text}\r\n      isChangeable={false}\r\n    />\r\n  </div>\r\n}\r\n\r\nSelect.propTypes = {\r\n  option: propShapes.option,\r\n  optionInfo: PropTypes.object,\r\n};\r\n\r\nexport default connect()(Select);","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nfunction Image(props) {\r\n  if (props.src === undefined) return false;\r\n\r\n  return <div className=\"Image\">\r\n    <div className=\"ImageContent\"\r\n      style={{\r\n        backgroundImage: `url(${props.src})`,\r\n        backgroundPositionY: (props.cy === undefined ? 50 : props.cy) + '%',\r\n        backgroundPositionX: (props.cx === undefined ? 50 : props.cx) + '%',\r\n      }}\r\n    ></div>\r\n  </div>\r\n}\r\n\r\nImage.propTypes = {\r\n  src: PropTypes.string,\r\n  cx: PropTypes.number,\r\n  cy: PropTypes.number,\r\n};\r\n\r\nexport default Image;","import React from 'react';\r\nimport propShapes from '../propShapes';\r\n\r\nfunction CurrencyStats(props) {\r\n  if (props.currency === undefined) return false;\r\n  const currencies = [];\r\n  for (const currencySlug in props.currency) {\r\n    const currency = props.currency[currencySlug];\r\n    currencies.push(\r\n      <div className=\"CurrencyStatSingle\" key={`currency-${currencySlug}`}>\r\n        <div className=\"CurrencyStats-name\">{currency.name}</div>\r\n        <div className=\"CurrencyStats-value\">{currency.currentValue}</div>\r\n      </div>\r\n    );\r\n  }\r\n  return <div className=\"CurrencyStats\">\r\n    {currencies}\r\n  </div>\r\n}\r\n\r\nCurrencyStats.propTypes = {\r\n  currency: propShapes.currency,\r\n};\r\n\r\nexport default CurrencyStats;","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport propShapes from '../propShapes';\r\n\r\nfunction OptionCost(props) {\r\n  if (props.cost === undefined) return false;\r\n\r\n  const costs = [];\r\n  for (const costSlug in props.cost) {\r\n    const cost = props.cost[costSlug];\r\n    costs.push(\r\n      <div className={classNames(\r\n        'OptionCostSingle',\r\n        { OptionCostPositive: cost.nextValue < 0 }\r\n      )} key={`cost-${costSlug}`}>\r\n        <div className=\"OptionCost-name\">{cost.name}</div>\r\n        <div className=\"OptionCost-value\">\r\n          {(cost.nextValue > 0 ? '' : '+') + (-cost.nextValue)}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  return <div className=\"OptionCost\">\r\n    {costs}\r\n  </div>\r\n}\r\n\r\nOptionCost.propTypes = {\r\n  cost: propShapes.cost,\r\n};\r\n\r\nexport default OptionCost;","import React from 'react';\r\nimport propShapes from '../propShapes';\r\nimport CurrencyStats from './CurrencyStats';\r\nimport OptionCost from './OptionCost';\r\n\r\nfunction OptionStats(props) {\r\n  if (\r\n    props.option.cost === undefined &&\r\n    props.option.optionCurrency === undefined\r\n  ) return false;\r\n\r\n  return <div className=\"OptionStats\">\r\n    <OptionCost cost={props.option.cost} />\r\n    <CurrencyStats currency={props.option.optionCurrency} />\r\n  </div>\r\n}\r\n\r\nOption.propTypes = {\r\n  option: propShapes.option,\r\n};\r\n\r\nexport default OptionStats;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { isObject } from '../functions/helpers';\r\n\r\nfunction PathLink(props) {\r\n  return (\r\n    <span className=\"PathLink\" onClick={event => {\r\n      if (!isObject(event.detail)) event.detail = {};\r\n      event.detail.fromLink = true;\r\n      props.dispatch({\r\n        type: 'CHANGE_PATH',\r\n        path: props.path.split('/'),\r\n        scroll: window.scrollY,\r\n      });\r\n    }}>\r\n      {props.text}\r\n    </span>\r\n  );\r\n}\r\n\r\nexport default connect()(PathLink);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport propShapes from '../propShapes';\r\nimport PathLink from './PathLink';\r\n\r\nfunction getOpenLink(props) {\r\n  if (props.depth <= 1 || props.option.disableOpenButton) return false;\r\n  return <PathLink text=\"open\" path={props.option.path} />\r\n}\r\n\r\nfunction OptionLinks(props) {\r\n  const openLink = getOpenLink(props);\r\n  if (openLink === false) return false;\r\n\r\n  return <div className=\"OptionLinks\">\r\n    {openLink}\r\n  </div>\r\n}\r\n\r\nOptionLinks.propTypes = {\r\n  option: propShapes.option,\r\n  depth: PropTypes.number,\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    options: state.options,\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(OptionLinks);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport propShapes from '../propShapes';\r\n\r\nfunction OptionFoot(props) {\r\n  const errors = [];\r\n  for (const error of props.errors) {\r\n    if (error.path !== props.option.path) continue;\r\n    errors.push(<div className=\"error\" key={`option-error-${error.code}`}>\r\n      {error.text}\r\n    </div>);\r\n  }\r\n  if (errors.length === 0) return false;\r\n\r\n  return <div className=\"OptionFoot\">\r\n    {errors}\r\n  </div>\r\n}\r\n\r\nOptionFoot.propTypes = {\r\n  option: propShapes.option,\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    options: state.options,\r\n    errors: state.errors,\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(OptionFoot);","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport propShapes from '../propShapes';\r\nimport OptionStats from './OptionStats';\r\nimport Name from './Name';\r\nimport Text from './Text';\r\nimport OptionLinks from '../containers/OptionLinks';\r\nimport OptionFoot from '../containers/OptionFoot';\r\nimport getUserFunctionValue from \"./../functions/getUserFunctionValue\";\r\n\r\nfunction OptionBox(props) {\r\n\r\n  return <div className=\"OptionBox\">\r\n    <div className=\"OptionHead\">\r\n      <OptionStats\r\n        option={props.getStastsFrom}\r\n      />\r\n    </div>\r\n    <Name\r\n      name={props.option.name}\r\n      isChangeable={props.option.isChild}\r\n      change={props.change.bind(null, props.option)}\r\n    />\r\n    <Text\r\n      text={getUserFunctionValue(props.option.text, { option: props.option })}\r\n      isChangeable={props.option.isChild}\r\n      change={props.change.bind(null, props.option)}\r\n    />\r\n    <OptionLinks\r\n      option={props.option}\r\n      depth={props.optionInfo.depth}\r\n    />\r\n    <OptionFoot option={props.option} />\r\n  </div>\r\n}\r\n\r\nOption.propTypes = {\r\n  option: propShapes.option,\r\n  getStastsFrom: propShapes.option,\r\n  change: PropTypes.func,\r\n  optionInfo: PropTypes.object,\r\n};\r\n\r\nexport default OptionBox;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport propShapes from '../propShapes';\r\n\r\nfunction DisabledOverlay(props) {\r\n  if (!props.option.info.isDisabled) return false;\r\n\r\n  return <div className=\"OptionDisabledInfo\" >\r\n    {props.option.image ? <div\r\n      className=\"OptionDisabledImage\"\r\n      style={{\r\n        backgroundImage: `url(${props.option.image})`,\r\n      }}\r\n    ></div> : false}\r\n    <div className=\"OptionDisabledNameContainer\">\r\n      <div className=\"OptionDisabledName\">{props.option.name}</div>\r\n      <div className=\"OptionDisabledMessage\">disabled</div>\r\n    </div>\r\n    <div className=\"OptionDisabledReason\">{props.option.disabledText}</div>\r\n  </div>;\r\n}\r\n\r\nDisabledOverlay.propTypes = {\r\n  option: propShapes.option,\r\n  optionInfo: PropTypes.object,\r\n};\r\n\r\nexport default DisabledOverlay;","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport PropTypes from 'prop-types';\r\nimport propShapes from '../propShapes';\r\nimport OptionControls from './OptionControls';\r\nimport Select from './Select';\r\nimport Image from './Image';\r\nimport OptionBox from './OptionBox';\r\nimport DisabledOverlay from './DisabledOverlay';\r\n\r\nfunction Suboption(props) {\r\n  const optionInfo = props.optionInfo;\r\n\r\n  return <div\r\n    className={classNames(\r\n      'Suboption',\r\n      `OptionControl-${optionInfo.controlType}`,\r\n      `OptionType-${props.option.type}`,\r\n      { OptionSelected: props.option.info.isSelected },\r\n      { OptionOpenable: optionInfo.isOpenable },\r\n      { SelectableSuboption: optionInfo.isSelectableSuboption },\r\n      { OptionHasImage: optionInfo.image },\r\n      { OptionDisabled: props.option.info.isDisabled }\r\n    )}\r\n  >\r\n    <OptionControls\r\n      option={props.option}\r\n      sell={props.sell}\r\n      buy={props.buy}\r\n      trade={props.trade}\r\n      optionInfo={optionInfo}\r\n    />\r\n    <div className=\"SuboptionWrap\">\r\n      <div className=\"SuboptionContent\">\r\n        <Image\r\n          src={optionInfo.image}\r\n          cx={optionInfo.imageCx}\r\n          cy={optionInfo.imageCy}\r\n        />\r\n        <OptionBox\r\n          option={props.option}\r\n          getStastsFrom={optionInfo.getStastsFrom}\r\n          change={props.change}\r\n          optionInfo={optionInfo}\r\n        />\r\n      </div>\r\n      <Select\r\n        option={props.option}\r\n        optionInfo={optionInfo}\r\n      />\r\n      <DisabledOverlay\r\n        option={props.option}\r\n        optionInfo={optionInfo}\r\n      />\r\n    </div>\r\n  </div>\r\n}\r\n\r\nSuboption.propTypes = {\r\n  option: propShapes.option,\r\n  buy: PropTypes.func,\r\n  sell: PropTypes.func,\r\n  change: PropTypes.func,\r\n  optionInfo: PropTypes.object,\r\n};\r\n\r\nexport default Suboption;","import React from 'react';\r\nimport { isObject } from '../functions/helpers';\r\n\r\nfunction SuboptionsPage(props) {\r\n  return <div\r\n    className=\"SuboptionsContainer\"\r\n    onClick={event => {\r\n      if (!isObject(event.detail)) event.detail = {};\r\n      event.detail.fromSuboptions = true;\r\n    }}\r\n  >\r\n    {props.children}\r\n  </div>\r\n}\r\n\r\nexport default SuboptionsPage;","import getSuboptions from './getSubptions';\r\n\r\nexport default function getDepth(option, options) {\r\n  const suboptions = getSuboptions(option, options, true);\r\n  if (Object.keys(suboptions).length === 0) return 1;\r\n  let depth = 0;\r\n  for (const slug in suboptions) {\r\n    const suboption = suboptions[slug];\r\n    depth = Math.max(getDepth(suboption, options), depth);\r\n  }\r\n  return depth + 1;\r\n}","import getControlType from './getControlType';\r\nimport getSubptions from './getSubptions';\r\nimport getDepth from './getDepth';\r\nimport isOptionDisabled from './isOptionDisabled';\r\n\r\nexport default function getOptionInfo(option, options) {\r\n  if (option.path === undefined) return { suboptions: options };\r\n  const optionInfo = {\r\n    controlType: getControlType(option),\r\n    suboptions: getSubptions(option, options),\r\n    depth: getDepth(option, options),\r\n  };\r\n  optionInfo.isOpenable = Object.keys(optionInfo.suboptions).length > 0;\r\n  optionInfo.image = option.image;\r\n  optionInfo.imageCy = option.imageCy;\r\n  optionInfo.imageCx = option.imageCx;\r\n  optionInfo.getStastsFrom = option;\r\n\r\n  // when controlType === select\r\n  optionInfo.isSelectableSuboption = option.type === 'option' &&\r\n    option.min === 0 &&\r\n    !option.disableUseAsSelect &&\r\n    option.max === 1;\r\n\r\n  if (optionInfo.controlType === 'select') {\r\n    optionInfo.selectableSuboptions = [];\r\n    for (const slug in optionInfo.suboptions) {\r\n      const suboption = optionInfo.suboptions[slug];\r\n      if (\r\n        suboption.type === 'option' &&\r\n        suboption.max === 1 &&\r\n        suboption.min === 0 &&\r\n        !suboption.disableUseAsSelect &&\r\n        (\r\n          !isOptionDisabled(suboption, options) ||\r\n          suboption.showWhenDisabled\r\n        )\r\n      ) {\r\n        optionInfo.selectableSuboptions.push(suboption);\r\n        if (suboption.selected) {\r\n          optionInfo.selectedSuboptionId = optionInfo.selectableSuboptions.length - 1;\r\n        }\r\n      }\r\n    }\r\n    if (optionInfo.selectableSuboptions.length <= 1) {\r\n      optionInfo.controlType = false;\r\n    }\r\n\r\n    const selected = optionInfo.selectableSuboptions[optionInfo.selectedSuboptionId];\r\n    if (selected !== undefined) {\r\n      optionInfo.getStastsFrom = selected;\r\n      if (!option.dontUseImageOfSelected) {\r\n        optionInfo.image = selected.image;\r\n        optionInfo.imageCy = selected.imageCy;\r\n        optionInfo.imageCx = selected.imageCx;\r\n      }\r\n    }\r\n  }\r\n\r\n  return optionInfo;\r\n}\r\n","export function handleBuy(option) {\r\n  this.dispatch({\r\n    type: 'BUY_OPTION',\r\n    option,\r\n  });\r\n}\r\n\r\nexport function handleSell(option) {\r\n  this.dispatch({\r\n    type: 'SELL_OPTION',\r\n    option,\r\n  });\r\n}\r\n\r\nexport function handleTrade(option, value) {\r\n  this.dispatch({\r\n    type: 'TRADE_OPTION',\r\n    value,\r\n    option,\r\n  });\r\n}\r\n\r\nexport function handleChange(option, textProp, text) {\r\n  this.dispatch({\r\n    type: 'CHANGE_TEXT',\r\n    option,\r\n    textProp,\r\n    text,\r\n  });\r\n}","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport propShapes from '../propShapes';\r\nimport Suboption from '../pages/Suboption';\r\nimport SuboptionsPage from '../pages/SuboptionsPage';\r\nimport getOptionInfo from '../functions/getOptionInfo';\r\nimport { handleBuy, handleSell, handleChange, handleTrade } from '../functions/handlers';\r\n\r\nfunction SuboptionsContainer(props) {\r\n  const suboptions = props.suboptions;\r\n  if (Object.keys(suboptions).length === 0) return false;\r\n  if (props.option.info.isDisabled) return false;\r\n\r\n  const suboptionsElements = [];\r\n  for (const slug in suboptions) {\r\n    const currentOption = suboptions[slug];\r\n    const optionInfo = getOptionInfo(currentOption, props.options);\r\n    if (\r\n      (\r\n        props.optionInfo.controlType === 'select' &&\r\n        optionInfo.isSelectableSuboption\r\n      ) ||\r\n      (\r\n        !currentOption.showWhenDisabled &&\r\n        currentOption.info.isDisabled\r\n      )\r\n    ) continue;\r\n    if (currentOption.type === 'option' || currentOption.type === 'group') {\r\n      suboptionsElements.push(<Suboption\r\n        key={`suboption-${currentOption.path}`}\r\n        option={currentOption}\r\n        buy={handleBuy.bind(props)}\r\n        sell={handleSell.bind(props)}\r\n        trade={handleTrade.bind(props)}\r\n        change={handleChange.bind(props)}\r\n        optionInfo={optionInfo}\r\n      />);\r\n    }\r\n  }\r\n  if (suboptionsElements.length === 0) return false;\r\n\r\n  return <SuboptionsPage>\r\n    {suboptionsElements}\r\n  </SuboptionsPage>;\r\n}\r\n\r\nSuboptionsContainer.propTypes = {\r\n  option: propShapes.option,\r\n  suboptions: PropTypes.objectOf(propShapes.option),\r\n  optionInfo: PropTypes.object,\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    options: state.options,\r\n    path: state.path.map(e => e.slug),\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(SuboptionsContainer);","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport PropTypes from 'prop-types';\r\nimport OptionControls from './OptionControls';\r\nimport getControlType from '../functions/getControlType';\r\nimport propShapes from '../propShapes';\r\nimport SuboptionsContainer from '../containers/SuboptionsContainer';\r\nimport Select from './Select';\r\nimport Image from './Image';\r\nimport OptionBox from './OptionBox';\r\nimport DisabledOverlay from './DisabledOverlay';\r\n\r\nfunction handleClick(event) {\r\n  if (event.detail.fromOptionControl) return;\r\n  if (event.detail.fromSuboptions) return;\r\n  if (event.detail.fromLink) return;\r\n  if (this.option.info.isDisabled) return;\r\n\r\n  switch (getControlType(this.option)) {\r\n    case 'checkbox':\r\n      if (this.option.selected) this.sell(this.option);\r\n      else this.buy(this.option);\r\n      break;\r\n    case 'spinbox':\r\n      this.buy(this.option);\r\n      break;\r\n    default:\r\n  }\r\n}\r\n\r\nfunction Option(props) {\r\n  const optionInfo = props.optionInfo;\r\n\r\n  return <div\r\n    className={classNames(\r\n      'Option',\r\n      `OptionControl-${optionInfo.controlType}`,\r\n      `OptionType-${props.option.type}`,\r\n      { OptionSelected: props.option.info.isSelected },\r\n      { OptionOpenable: optionInfo.isOpenable },\r\n      { OptionHasImage: optionInfo.image },\r\n      { OptionDisabled: props.option.info.isDisabled }\r\n    )}\r\n  >\r\n    <OptionControls\r\n      option={props.option}\r\n      sell={props.sell}\r\n      buy={props.buy}\r\n      trade={props.trade}\r\n      optionInfo={optionInfo}\r\n    />\r\n    <div\r\n      className=\"OptionWrap\"\r\n      onClick={handleClick.bind(props)}\r\n    >\r\n      <div className=\"OptionContent\">\r\n        <Image\r\n          src={optionInfo.image}\r\n          cx={optionInfo.imageCx}\r\n          cy={optionInfo.imageCy}\r\n        />\r\n        <OptionBox\r\n          option={props.option}\r\n          getStastsFrom={optionInfo.getStastsFrom}\r\n          change={props.change}\r\n          optionInfo={optionInfo}\r\n        />\r\n      </div>\r\n      <Select\r\n        option={props.option}\r\n        optionInfo={optionInfo}\r\n        options={props.options}\r\n      />\r\n      <SuboptionsContainer\r\n        option={props.option}\r\n        suboptions={props.optionInfo.suboptions}\r\n        optionInfo={optionInfo}\r\n      />\r\n      <DisabledOverlay\r\n        option={props.option}\r\n        optionInfo={optionInfo}\r\n      />\r\n    </div>\r\n  </div>;\r\n}\r\n\r\nOption.propTypes = {\r\n  option: propShapes.option,\r\n  buy: PropTypes.func,\r\n  sell: PropTypes.func,\r\n  trade: PropTypes.func,\r\n  change: PropTypes.func,\r\n  optionInfo: PropTypes.object,\r\n};\r\n\r\nexport default Option;","import React from 'react';\r\nimport { TransitionGroup } from 'react-transition-group';\r\n\r\nfunction OptionsPage(props) {\r\n  return <TransitionGroup className=\"OptionsContainer\">\r\n    {props.children}\r\n  </TransitionGroup>;\r\n}\r\n\r\nexport default OptionsPage;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport Option from '../pages/Option';\r\nimport propShapes from '../propShapes';\r\nimport getOptionInfo from '../functions/getOptionInfo';\r\nimport getSubptions from '../functions/getSubptions';\r\nimport { handleBuy, handleSell, handleChange, handleTrade } from './../functions/handlers';\r\nimport OptionsPage from '../pages/OptionsPage';\r\nimport { CSSTransition } from 'react-transition-group';\r\n\r\nfunction OptionsContainer(props) {\r\n  const suboptions = getSubptions(props.option, props.options);\r\n\r\n  const optionsElements = [];\r\n  for (const slug in suboptions) {\r\n    const currentOption = suboptions[slug];\r\n    const optionInfo = getOptionInfo(currentOption, props.options);\r\n    if (!currentOption.showWhenDisabled && currentOption.info.isDisabled) continue;\r\n    optionsElements.push(<CSSTransition\r\n      key={`option-${currentOption.path}`}\r\n      timeout={300}\r\n      classNames=\"item\"\r\n    >\r\n      <Option\r\n        option={currentOption}\r\n        buy={handleBuy.bind(props)}\r\n        sell={handleSell.bind(props)}\r\n        trade={handleTrade.bind(props)}\r\n        change={handleChange.bind(props)}\r\n        optionInfo={optionInfo}\r\n      />\r\n    </CSSTransition>);\r\n  }\r\n\r\n  optionsElements.push(<CSSTransition\r\n    key={`option-after-${props.option.path}`}\r\n    timeout={300}\r\n    classNames=\"item\"\r\n  ><div style={{\r\n    width: '100%',\r\n  }}></div></CSSTransition>);\r\n\r\n  return <OptionsPage>\r\n    {optionsElements}\r\n  </OptionsPage>;\r\n}\r\n\r\nOptionsContainer.propTypes = {\r\n  option: propShapes.option,\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    options: state.options,\r\n    path: state.path.map(e => e.slug),\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(OptionsContainer);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport propShapes from '../propShapes';\r\nimport Name from './../pages/Name';\r\nimport OptionControls from './../pages/OptionControls';\r\nimport Text from '../pages/Text';\r\nimport OptionStats from './../pages/OptionStats';\r\nimport OptionFoot from './OptionFoot';\r\nimport getOptionInfo from '../functions/getOptionInfo';\r\nimport { handleBuy, handleSell, handleChange, handleTrade } from './../functions/handlers';\r\n\r\nfunction OptionWideHead(props) {\r\n  const optionInfo = getOptionInfo(props.option, props.options);\r\n\r\n  return <div className=\"OptionWideHead\">\r\n    <OptionControls\r\n      option={props.option}\r\n      buy={handleBuy.bind(props)}\r\n      sell={handleSell.bind(props)}\r\n      trade={handleTrade.bind(props)}\r\n      optionInfo={optionInfo}\r\n    />\r\n    <OptionStats\r\n      option={props.option}\r\n    />\r\n    <Name\r\n      name={props.option.name}\r\n      isChangeable={props.option.isChild}\r\n      change={handleChange.bind(props, props.option)}\r\n    />\r\n    <Text\r\n      text={props.option.text}\r\n      isChangeable={props.option.isChild}\r\n      change={props.change}\r\n    />\r\n    <OptionFoot option={props.option} />\r\n  </div>\r\n}\r\n\r\nOptionWideHead.propTypes = {\r\n  option: propShapes.option,\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    options: state.options,\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(OptionWideHead);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport getOption from '../functions/getOption';\r\nimport PathLink from './PathLink';\r\n\r\nfunction Breadcrumbs(props) {\r\n  const path = props.path.filter(e => e !== '');\r\n  const breadCrumbs = [];\r\n  for (let i = 0; i < path.length; i++) {\r\n    const currentPath = path.slice(0, i + 1);\r\n    const optionName = getOption(currentPath, props.options).name;\r\n    breadCrumbs.push(\r\n      <React.Fragment key={`breadcrumb-${currentPath.join('-')}`}>\r\n        <PathLink path={currentPath.join('/')} text={optionName} /> /&nbsp;\r\n      </React.Fragment>\r\n    );\r\n  }\r\n  return <div className=\"Breadcrumbs\">\r\n    <PathLink path=\"\" text=\"home\" /> /&nbsp;\r\n    {breadCrumbs}\r\n  </div>;\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    path: state.path.map(e => e.slug),\r\n    options: state.options,\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(Breadcrumbs);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport Breadcrumbs from './Breadcrumbs';\r\nimport CurrencyStats from '../pages/CurrencyStats';\r\nimport propShapes from '../propShapes';\r\nimport getCurrencies from '../functions/getCurrencies';\r\n\r\nfunction Nav(props) {\r\n  const currentCurrencies = getCurrencies(props, props.path);\r\n\r\n  return <nav>\r\n    <Breadcrumbs />\r\n    <CurrencyStats currency={currentCurrencies} />\r\n  </nav>\r\n}\r\n\r\nNav.propTypes = {\r\n  option: propShapes.option,\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    options: state.options,\r\n    path: state.path.map(e => e.slug),\r\n    settings: state.settings,\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(Nav);","import getOption from '../functions/getOption';\r\nimport { clone } from '../functions/helpers';\r\n\r\n/**\r\n * Get all currencies option with provided path can have.\r\n * @param {object} props Global props.\r\n * @param {object} props.options Global options.\r\n * @param {object} props.settings Global settings.\r\n * @param {array} path Path of the option being checked.\r\n * @returns {object} Object containing possible currencies.\r\n */\r\nexport default function getCurrencies(props, path) {\r\n  const currencies = clone(props.settings.currency);\r\n  const tempPath = clone(path).reverse();\r\n  let currentPath = '';\r\n  while (tempPath.length > 0) {\r\n    currentPath += '/' + tempPath.pop();\r\n    const option = getOption(currentPath, props.options);\r\n    if (option.optionCurrency !== undefined) {\r\n      Object.assign(currencies, option.optionCurrency);\r\n    }\r\n  }\r\n  return currencies;\r\n}","import React, { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport './styles/style.scss';\r\nimport OptionsContainer from './containers/OptionsContainer';\r\nimport OptionWideHead from './containers/OptionWideHead';\r\nimport getOption from './functions/getOption';\r\nimport Nav from './containers/Nav';\r\nimport $ from 'cash-dom';\r\nimport pipe from './pipe';\r\n\r\n$(window).on('load', () => {\r\n  $('body').addClass('unlocked');\r\n  setTimeout(() => {\r\n    $('.MainOverlay').remove();\r\n  }, 300);\r\n});\r\n\r\nfunction App(props) {\r\n  useEffect(() => {\r\n    if (pipe.scroll !== undefined) {\r\n      window.scroll(0, pipe.scroll);\r\n      pipe.scroll = undefined;\r\n    }\r\n  });\r\n\r\n  const option = getOption(props.path, props.options);\r\n  return (\r\n    <div className=\"App\">\r\n      <div className=\"MainOverlay\">\r\n        <svg className=\"loader\" viewBox=\"0 0 100 100\">\r\n          <circle cx=\"50\" cy=\"50\" r=\"40\" />\r\n        </svg>\r\n      </div>\r\n      <Nav option={option} />\r\n      {props.path.length === 0 ? false :\r\n        <OptionWideHead option={option} />\r\n      }\r\n      <OptionsContainer option={option} />\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    path: state.path.map(e => e.slug),\r\n    options: state.options,\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(App);\r\n","import React from 'react';\r\nimport getOption from './functions/getOption';\r\nimport getSelected from './functions/getSelected';\r\nimport isOptionDisabled from './functions/isOptionDisabled';\r\n\r\nfunction importAll(r) {\r\n  const obj = {};\r\n  r.keys().map(r).forEach((element, i) => {\r\n    const name = element.split('/').pop().split('.')[0];\r\n    obj[name] = element;\r\n  });\r\n  return obj;\r\n}\r\n\r\nexport const images = importAll(require.context('./media/image_scaled', false, /\\.(png|jpe?g|svg|gif)$/));\r\n\r\n\r\n\r\nfunction select(arr, def = false) {\r\n  for (const condition of arr) {\r\n    if (condition[0]) return condition[1];\r\n  }\r\n  return def;\r\n}\r\n\r\nfunction _is(path) {\r\n  const option = getOption(path, this.options);\r\n  if (isOptionDisabled(option, this.options)) return false;\r\n  return option.selected > 0;\r\n}\r\n\r\nfunction _isnt(path, values) {\r\n  return !values.includes(_val.call(this, path));\r\n}\r\n\r\nfunction _val(path) {\r\n  const option = getOption(path, this.options);\r\n  if (isOptionDisabled(option, this.options)) return false;\r\n  if (option.selected === undefined) {\r\n    const selected = getSelected(option, this.options);\r\n    if (selected.length === 0) return false;\r\n    return selected[0].slug;\r\n  }\r\n  return option.selected;\r\n}\r\n\r\n// function bindData(data) {\r\n//   return {\r\n//     is: _is.bind(data),\r\n//     isnt: _isnt.bind(data),\r\n//     val: _val.bind(data),\r\n//   };\r\n// }\r\n\r\nconst options = {\r\n  intro: {\r\n    name: 'A quick trip',\r\n    type: 'story',\r\n    text: <React.Fragment>\r\n      <p>Due to some disturbances in spacetime you were ripped out of your reality. Your soul is currently hovering in an endless void. You have no senses to feel anything yet you realize you can steer yourself to any of the myriad of realities scattered around you. Each one of them branching into countless others. In what world will you end up depends solely on your choices.</p>\r\n    </React.Fragment>,\r\n  },\r\n  count: {\r\n    name: 'Count',\r\n    max: 5,\r\n    options: {\r\n      a: {\r\n        name: 'A',\r\n        options: {\r\n          b: {\r\n            name: 'B',\r\n          },\r\n        },\r\n      },\r\n      c: {\r\n        name: 'C',\r\n        max: false,\r\n      },\r\n    },\r\n  },\r\n  group: {\r\n    name: 'Group',\r\n    type: 'group',\r\n    max: false,\r\n    options: data => {\r\n      const count = _val.call(data, 'count') + 1;\r\n      const suboptions = {};\r\n      for (let i = 0; i < count; i++) {\r\n        suboptions[`option${i + 1}`] = {\r\n          name: `Option ${i + 1}`,\r\n        };\r\n      }\r\n      return suboptions;\r\n    },\r\n  },\r\n  group2: {\r\n    name: 'Group 2',\r\n    type: 'group',\r\n    min: 1,\r\n    options: data => {\r\n      const count = _val.call(data, 'count') + 1;\r\n      const suboptions = {};\r\n      for (let i = 0; i < count; i++) {\r\n        suboptions[`option${i + 1}`] = {\r\n          name: `Option ${i + 1}`,\r\n        };\r\n      }\r\n      return suboptions;\r\n    },\r\n  },\r\n  option: {\r\n    name: 'Option',\r\n    options: data => {\r\n      const count = _val.call(data, 'count') + 1;\r\n      const suboptions = {};\r\n      for (let i = 0; i < count; i++) {\r\n        suboptions[`option${i + 1}`] = {\r\n          name: `Option ${i + 1}`,\r\n        };\r\n      }\r\n      return suboptions;\r\n    },\r\n  },\r\n  self: {\r\n    name: 'Your New Self',\r\n    type: 'story',\r\n    text: <p>You will receive a new body. It will be healthy and void of any genetic defects.</p>,\r\n  },\r\n  age: {\r\n    name: 'Age',\r\n    type: 'group',\r\n    text: <p>At what age will your new body be?</p>,\r\n    min: 1,\r\n    disableOpenButton: true,\r\n    options: {\r\n      child: {\r\n        name: 'Child',\r\n        text: <p>Your soul will enter a body that would otherwise be a stillborn. Your parents will provide for your basic needs but you won't have much autonomy at first. Your mind and memory will be fully functional but you will have to adapt to your new body making you as clumsy as every other newborn.</p>,\r\n        imageCx: 30,\r\n        cost: {\r\n          gold: 1,\r\n        },\r\n      },\r\n      teen: {\r\n        name: 'Teen',\r\n        text: <p>You will appear in a secluded area in a body similar to people around but not belonging to anyone in praticular. You will have a body of a child around 12 years old which will limit your strating strength and possibilities.</p>,\r\n        selected: 1,\r\n      },\r\n      adult: {\r\n        name: 'Adult',\r\n        text: <p>You will appear in a secluded area in a body similar to people around but not belonging to anyone in praticular. You will have a body of a fully grown adult below 30 years of age.</p>,\r\n        cost: {\r\n          gold: 1,\r\n        },\r\n      },\r\n    },\r\n  },\r\n  parents: {\r\n    name: 'Parents',\r\n    text: <p>Who will your parents be?</p>,\r\n    type: 'group',\r\n    test: data => _is.call(data, 'age/child'),\r\n    min: 1,\r\n    disableOpenButton: true,\r\n    options: {\r\n      abandoned: {\r\n        name: 'Abandoned',\r\n        cost: {\r\n          gold: -1,\r\n        },\r\n      },\r\n      random: {\r\n        name: 'Random',\r\n        selected: 1,\r\n      },\r\n      highStatus: {\r\n        name: 'Hight Status',\r\n        cost: {\r\n          gold: 5,\r\n        },\r\n      },\r\n      royalty: {\r\n        name: 'Royalty',\r\n        cost: {\r\n          gold: 10,\r\n        },\r\n      },\r\n    },\r\n  },\r\n  body: {\r\n    name: 'Physical Prowess',\r\n    type: 'group',\r\n    disableOpenButton: true,\r\n    min: 1,\r\n    options: {\r\n      normal: {\r\n        name: 'Normal Body',\r\n        selected: 1,\r\n      },\r\n      peak: {\r\n        name: 'Peak Human',\r\n        cost: {\r\n          gold: 2,\r\n        },\r\n      },\r\n      heroic: {\r\n        name: 'Heroic',\r\n        imageCy: 0,\r\n        cost: {\r\n          gold: 5,\r\n        },\r\n      },\r\n      focus: {\r\n        name: 'Focus',\r\n        text: <p>To which type will your body belong? This affects your looks and abilities both initial and the natural tendency of your body.</p>,\r\n        type: 'group',\r\n        min: 1,\r\n        test: data => _isnt.call(data, 'body', ['normal', false]),\r\n        disableOpenButton: true,\r\n        options: {\r\n          agility: {\r\n            name: 'Agility',\r\n          },\r\n          balanced: {\r\n            name: 'Balanced',\r\n            selected: 1,\r\n          },\r\n          strength: {\r\n            name: 'Strength',\r\n          },\r\n        },\r\n      },\r\n    },\r\n  },\r\n  uniqueRace: {\r\n    name: 'Unique Race',\r\n    text: <p>You can choose your body to have any biologicaly possible traits. Otherwise you have to choose one of the races present in your new world.</p>,\r\n    cost: {\r\n      gold: 10,\r\n    },\r\n  },\r\n  markings: {\r\n    name: 'Foretold Mark',\r\n    text: <p>Your body will bear a marking passed down in legends. It won't do anything except changing people's perception of you. The mark will be possible to hide with some effort.</p>,\r\n    type: 'group',\r\n    image: images.markings_demigod,\r\n    disableOpenButton: true,\r\n    options: {\r\n      saviour: {\r\n        name: 'Mark of the Saviour',\r\n        cost: {\r\n          gold: 2,\r\n        },\r\n      },\r\n      demigod: {\r\n        name: 'Mark of the Demigod',\r\n        cost: {\r\n          gold: 5,\r\n        },\r\n      },\r\n      doom: {\r\n        name: 'Mark of Doom',\r\n        cost: {\r\n          gold: 2,\r\n        },\r\n      },\r\n    },\r\n  },\r\n  yourMagic: {\r\n    name: 'Magic',\r\n    type: 'group',\r\n    test: data => _isnt.call(data, 'magicFrequency', ['none', false]),\r\n    min: 1,\r\n    disableOpenButton: true,\r\n    options: {\r\n      none: {\r\n        name: 'None',\r\n        text: <React.Fragment><p>You won't be able to wield the magic of your new world no matter what.</p><p>Gained gold depends on the frequency of people with access to magic.</p></React.Fragment>,\r\n        cost: {\r\n          gold: data => -select([\r\n            [_is.call(data, 'magicFrequency/few'), 1],\r\n            [_is.call(data, 'magicFrequency/rare'), 2],\r\n            [_is.call(data, 'magicFrequency/common'), 5],\r\n            [_is.call(data, 'magicFrequency/half'), 10],\r\n            [_is.call(data, 'magicFrequency/everyone'), 15],\r\n          ]),\r\n        },\r\n      },\r\n      same: {\r\n        name: 'Same as Inhabitants',\r\n        text: <p>You will have the same chance of being able to use magic as every other denizen of your new world.</p>,\r\n        selected: 1,\r\n      },\r\n      guaranteed: {\r\n        name: 'Guaranteed',\r\n        text: <React.Fragment><p>You will be guaranteed to have the strongest form of magic possible on your new world.</p><p>Cost depends on the frequency of people with access to magic.</p></React.Fragment>,\r\n        cost: {\r\n          gold: data => select([\r\n            [_is.call(data, 'magicFrequency/few'), 15],\r\n            [_is.call(data, 'magicFrequency/rare'), 10],\r\n            [_is.call(data, 'magicFrequency/common'), 5],\r\n            [_is.call(data, 'magicFrequency/half'), 2],\r\n            [_is.call(data, 'magicFrequency/everyone'), 1],\r\n          ]),\r\n        },\r\n      },\r\n    },\r\n  },\r\n  uniqueMagic: {\r\n    name: 'Unique Magic',\r\n    cost: {\r\n      gold: 25,\r\n    },\r\n  },\r\n  world: {\r\n    name: 'Your New World',\r\n    type: 'story',\r\n  },\r\n  species: {\r\n    name: 'Sapient Species',\r\n    type: 'group',\r\n    min: 1,\r\n    disableOpenButton: true,\r\n    options: {\r\n      none: {\r\n        name: 'None',\r\n        cost: {\r\n          gold: -10,\r\n        },\r\n      },\r\n      humans: {\r\n        name: 'Humans',\r\n        selected: 1,\r\n      },\r\n      fantasy: {\r\n        name: 'Fantasy Species',\r\n        cost: {\r\n          gold: 5,\r\n        },\r\n      },\r\n      custom: {\r\n        name: 'Custom',\r\n        cost: {\r\n          gold: 10,\r\n        },\r\n      },\r\n    },\r\n  },\r\n  geography: {\r\n    name: 'Geography',\r\n    type: 'group',\r\n    disableOpenButton: true,\r\n    min: 1,\r\n    options: {\r\n      island: {\r\n        name: 'Island',\r\n      },\r\n      world: {\r\n        name: 'World',\r\n        selected: 1,\r\n      },\r\n      megaWorld: {\r\n        name: 'Mega World',\r\n        test: data => _is.call(data, 'technology/nearFuture'),\r\n        showWhenDisabled: true,\r\n        disabledText: <p>Technology level has to be \"near future\"</p>,\r\n      },\r\n    },\r\n  },\r\n  technology: {\r\n    name: 'Technology',\r\n    type: 'group',\r\n    test: data => !_is.call(data, 'species/none'),\r\n    disableOpenButton: true,\r\n    min: 1,\r\n    options: {\r\n      prehistoric: {\r\n        name: 'Prehistoric',\r\n      },\r\n      stoneAge: {\r\n        name: 'Stone Age',\r\n      },\r\n      agricultural: {\r\n        name: 'Agricultural',\r\n      },\r\n      bronzeAge: {\r\n        name: 'Bronze Age',\r\n      },\r\n      ironAge: {\r\n        name: 'Iron Age',\r\n      },\r\n      ancient: {\r\n        name: 'Ancient',\r\n      },\r\n      medieval: {\r\n        name: 'Medieval',\r\n        selected: 1,\r\n      },\r\n      industrial: {\r\n        name: 'Industrial',\r\n      },\r\n      modern: {\r\n        name: 'Modern',\r\n      },\r\n      nearFuture: {\r\n        name: 'Near Future',\r\n      },\r\n    },\r\n  },\r\n  magicFrequency: {\r\n    name: 'Magic Frequency',\r\n    text: <p>How many sapient creatures on your new world will be able to use magic?</p>,\r\n    type: 'group',\r\n    test: data => !_is.call(data, 'species/none'),\r\n    min: 1,\r\n    disableOpenButton: true,\r\n    options: {\r\n      none: {\r\n        name: 'None',\r\n        text: <p>There is no magic at all.</p>,\r\n        selected: 1,\r\n      },\r\n      few: {\r\n        name: 'Very Few',\r\n        text: <p>There will be only a handfull of people with access to magic.</p>,\r\n      },\r\n      rare: {\r\n        name: 'Rare',\r\n        text: <p>Magic will be rare, only about 0.001% of population will have access to it.</p>,\r\n      },\r\n      common: {\r\n        name: 'Common',\r\n        text: <p>About one in twenty people will have access to magic.</p>,\r\n      },\r\n      half: {\r\n        name: 'Half',\r\n      },\r\n      everyone: {\r\n        name: 'Mostly Everyone',\r\n      },\r\n    },\r\n  },\r\n  magicPower: {\r\n    name: 'Magic Power',\r\n    text: <p>How powerfull will the magic be?</p>,\r\n    type: 'group',\r\n    test: data => !_is.call(data, 'species/none') && !_is.call(data, 'magicFrequency/none'),\r\n    disableOpenButton: true,\r\n    min: 1,\r\n    options: {\r\n      convenience: {\r\n        name: 'Convenience',\r\n        selected: 1,\r\n      },\r\n      heroic: {\r\n        name: 'Heroic',\r\n      },\r\n      powerfull: {\r\n        name: 'Powerfull',\r\n      },\r\n      worldShattering: {\r\n        name: 'World Shattering',\r\n      },\r\n    },\r\n  },\r\n  magicSituation: {\r\n    name: 'Situation of Mages',\r\n    type: 'group',\r\n    min: 1,\r\n    test: data => _isnt.call(data, 'magicFrequency', ['none', false]),\r\n    disableOpenButton: true,\r\n    options: {\r\n      hidden: {\r\n        name: 'Hidden',\r\n        test: data => !_is.call(data, 'magicFrequency/everyone'),\r\n        showWhenDisabled: true,\r\n        disabledText: <p>Mages cannot be hidden if everyone is a mage.</p>,\r\n      },\r\n      casual: {\r\n        name: 'Casual',\r\n        text: <p>Magic exists and is use like any other resource.</p>,\r\n        selected: 1,\r\n      },\r\n      revered: {\r\n        name: 'Revered',\r\n      },\r\n      worshipped: {\r\n        name: 'Worshipped',\r\n      },\r\n    },\r\n  },\r\n};\r\n\r\nexport default options;\r\n","const settings = prepareSettings({\r\n  currency: {\r\n    gold: {\r\n      name: 'Gold',\r\n      value: 100,\r\n    },\r\n  },\r\n});\r\n\r\nfunction prepareSettings(currentSettings) {\r\n  for (const slug in currentSettings.currencies) {\r\n    const currency = currentSettings.currencies[slug];\r\n    currency.slug = slug;\r\n  }\r\n  currentSettings.hideDisabledOptions = currentSettings.hideDisabledOptions === undefined ?\r\n    false : currentSettings.hideDisabledOptions\r\n  currentSettings.maxDepth = currentSettings.maxDepth === undefined ? 2 : currentSettings.maxDepth;\r\n  return currentSettings;\r\n}\r\n\r\nexport default settings;","import settings from \"./../settings\";\r\nimport { clone } from \"./../functions/helpers\";\r\nimport getSubptions from \"./../functions/getSubptions\";\r\nimport userFunctions from \"./../userFunctions\";\r\nimport { images } from \"./../options\";\r\n\r\nfunction getCurrencyName(searchedSlug, option, options) {\r\n  if (settings.currency !== undefined) {\r\n    for (const currencySlug in settings.currency) {\r\n      if (currencySlug === searchedSlug) {\r\n        return settings.currency[currencySlug].name;\r\n      }\r\n    }\r\n  }\r\n\r\n  const tempPath = clone(option.path).split('/').reverse().filter(e => e !== '');\r\n  let currentOption = { options };\r\n  while (tempPath.length) {\r\n    currentOption = getSubptions(currentOption, options)[tempPath.pop()];\r\n    if (currentOption === undefined) break;\r\n    if (currentOption.optionCurrency !== undefined) {\r\n      for (const currencySlug in currentOption.optionCurrency) {\r\n        if (currencySlug === searchedSlug) {\r\n          return currentOption.optionCurrency[currencySlug].name;\r\n        }\r\n      }\r\n    }\r\n    if (currentOption.childOptionCurrency !== undefined) {\r\n      for (const currencySlug in currentOption.childOptionCurrency) {\r\n        if (currencySlug === searchedSlug) {\r\n          return currentOption.childOptionCurrency[currencySlug].name;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return searchedSlug;\r\n}\r\n\r\nfunction replaceFunction(userFunction) {\r\n  if (userFunction === undefined) return undefined;\r\n  if (typeof userFunction === 'function') {\r\n    userFunctions.push(userFunction);\r\n    userFunction = {\r\n      isUserFunction: true,\r\n      functionId: userFunctions.length - 1\r\n    };\r\n  }\r\n  return userFunction;\r\n}\r\n\r\nfunction replaceFunctions(option, options) {\r\n  option.text = replaceFunction(option.text);\r\n  option.test = replaceFunction(option.test);\r\n  option.options = replaceFunction(option.options);\r\n\r\n  if (option.cost !== undefined) {\r\n    for (const currencySlug in option.cost) {\r\n      if (option.cost[currencySlug] === null) continue;\r\n      option.cost[currencySlug] = replaceFunction(option.cost[currencySlug]);\r\n      if (!option.cost[currencySlug].isUserFunction) {\r\n        option.cost[currencySlug] = {\r\n          value: option.cost[currencySlug],\r\n          nextValue: option.cost[currencySlug],\r\n        };\r\n      }\r\n      option.cost[currencySlug].name = getCurrencyName(currencySlug, option, options);\r\n    }\r\n  }\r\n}\r\n\r\nexport default function prepareOptions(currentOptions, path, options = currentOptions) {\r\n  for (const slug in currentOptions) {\r\n    const option = currentOptions[slug];\r\n\r\n    option.type = option.type === undefined ? 'option' : option.type;\r\n\r\n    option.min = option.min === undefined ? 0 : Math.max(option.min, 0);\r\n    if (option.max !== false) {\r\n      option.max = option.max === undefined ? 1 : Math.max(option.max, 0);\r\n    }\r\n\r\n    option.slug = slug;\r\n    option.path = path === undefined ? slug : path + '/' + slug;\r\n    if (option.image === undefined) {\r\n      const imageName = option.path.replace('/', '_');\r\n      if (images[imageName] !== undefined) {\r\n        option.image = images[imageName];\r\n      }\r\n    }\r\n\r\n\r\n    if (option.options !== undefined && typeof option.options === 'function') {\r\n      option.functionalChildren = option.functionalChildren === undefined ?\r\n        {} : option.functionalChildren;\r\n    }\r\n\r\n    option.options = prepareOptions(option.options, option.path, options);\r\n    if (option.type === 'option') {\r\n      if (option.hasIndividualChildren) {\r\n        option.selected = option.selected === undefined ? {} : option.selected;\r\n        option.nextChildId = 0;\r\n      }\r\n      else {\r\n        option.selected = option.selected === undefined ? option.min : option.selected;\r\n      }\r\n    }\r\n\r\n    replaceFunctions(option, options);\r\n\r\n  }\r\n  return currentOptions;\r\n}\r\n","import prepareOptions from \"./prepareOptions\";\r\nimport { getParent, clone, deepClone } from \"../functions/helpers\";\r\nimport getOption from \"../functions/getOption\";\r\nimport getSelected from \"../functions/getSelected\";\r\nimport getSelectedCount from \"../functions/getSelectedCount\";\r\n\r\nfunction buyIndividualChild(option, options) {\r\n  if (option.max !== false && getSelectedCount(option, options) >= option.max) return;\r\n\r\n  const slug = option.nextChildId++;\r\n  const childOptions = option.individualOptions === undefined ?\r\n    {} : deepClone(option.individualOptions);\r\n  const childCurrency = option.childOptionCurrency === undefined ?\r\n    undefined : clone(option.childOptionCurrency);\r\n  const childName = option.defaultChildName || option.name;\r\n  const child = {\r\n    [slug]: {\r\n      type: 'group',\r\n      name: childName + ' - ' + slug,\r\n      options: childOptions,\r\n      isChild: true,\r\n      max: false,\r\n      optionCurrency: childCurrency,\r\n    }\r\n  };\r\n  option.selected[slug] = prepareOptions(child, option.path, options)[slug];\r\n}\r\n\r\nfunction deselectSiblings(option, options, parent) {\r\n  if (!option.disableUseAsSelect) {\r\n    if (parent === undefined) {\r\n      parent = getParent(option, options);\r\n    }\r\n\r\n    if (\r\n      !parent.disableUseAsSelect &&\r\n      parent && parent.type === 'group' &&\r\n      parent.max === 1 &&\r\n      option.max === 1\r\n    ) {\r\n      const selected = getSelected(parent, options);\r\n\r\n      for (const slug in selected) {\r\n        selected[slug].selected--;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction buySimpleChild(option, options) {\r\n  if (option.max !== false && option.selected >= option.max) return;\r\n\r\n  deselectSiblings(option, options);\r\n  option.selected++;\r\n}\r\n\r\nfunction buySyntheticOption(option, options) {\r\n  if (option.max !== false && option.selected >= option.max) return;\r\n\r\n  const parent = getParent(option, options);\r\n  deselectSiblings(option, options, parent);\r\n\r\n  parent.functionalChildren[option.slug].selected++;\r\n}\r\n\r\nexport default function buyOption(option, options) {\r\n  if (option.type === 'group') return;\r\n  if (option.isSynthetic) {\r\n    buySyntheticOption(option, options);\r\n  }\r\n  else {\r\n    option = getOption(option, options);\r\n    if (option.hasIndividualChildren) {\r\n      buyIndividualChild(option, options);\r\n    }\r\n    else {\r\n      buySimpleChild(option, options);\r\n    }\r\n  }\r\n}\r\n","import getOption from \"./../functions/getOption\";\r\nimport { getParent } from \"./../functions/helpers\";\r\n\r\nexport default function sellOption(option, options, path) {\r\n  if (option.isSynthetic) {\r\n    if (option.selected <= option.min) return;\r\n    const parent = getParent(option, options);\r\n    parent.functionalChildren[option.slug].selected--;\r\n    return;\r\n  }\r\n\r\n  option = getOption(option, options);\r\n  if (option.type === 'option') {\r\n    if (option.hasIndividualChildren) return;\r\n    if (option.selected <= option.min) return;\r\n    option.selected--;\r\n  }\r\n  else if (option.type === 'group') {\r\n    if (option.isChild) {\r\n      const parent = getParent(option, options);\r\n      delete parent.selected[option.slug];\r\n      if (option.path === path.join('/')) {\r\n        path.pop();\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { getParent } from \"../functions/helpers\";\r\nimport getOption from \"../functions/getOption\";\r\n\r\nfunction tradeSyntheticOption(option, options, value) {\r\n  const parent = getParent(option, options);\r\n  if (parent.functionalChildren[option.slug] === undefined) {\r\n    parent.functionalChildren[option.slug] = {\r\n      selected: 0,\r\n    };\r\n  }\r\n  parent.functionalChildren[option.slug].selected = value;\r\n}\r\n\r\nexport default function tradeOption(option, options, value) {\r\n  if (\r\n    option.type === 'group' ||\r\n    option.hasIndividualChildren ||\r\n    (option.max !== false && value > option.max) ||\r\n    value < option.min\r\n  ) return;\r\n\r\n  if (option.isSynthetic) {\r\n    tradeSyntheticOption(option, options);\r\n  }\r\n  else {\r\n    option = getOption(option, options);\r\n    option.selected = value;\r\n  }\r\n}\r\n","import isOptionDisabled from '../functions/isOptionDisabled';\r\nimport getSubptions from '../functions/getSubptions';\r\nimport getSelectedCount from '../functions/getSelectedCount';\r\nimport getOption from '../functions/getOption';\r\n\r\n/**\r\n * Transforms path into a nice readable form.\r\n * @param {string} path Path to transform.\r\n * @param {object} options Global options.\r\n */\r\nfunction getReadablePath(path, options) {\r\n  const pathArray = path.split('/');\r\n  const readableArray = [];\r\n  for (let i = 0; i < pathArray.length; i++) {\r\n    readableArray.push(getOption(pathArray.slice(0, i + 1), options).name);\r\n  }\r\n  return readableArray.join(' / ');\r\n}\r\n\r\n/**\r\n * Checks if values of global currencies are less than minimum.\r\n * @param {object} settings Global settings.\r\n * @param {object} options Global options.\r\n * @param {array} errors Error array to push errors into.\r\n */\r\nfunction checkGlobalCurrencies(settings, options, errors) {\r\n  if (settings.currency === undefined) return;\r\n  for (const currencySlug in settings.currency) {\r\n    const currency = settings.currency[currencySlug];\r\n    let min = currency.min === undefined ? 0 : currency.min;\r\n    if (min !== false && currency.currentValue < min) {\r\n      errors.push({\r\n        text: `Currency ${currency.name} cannot be below ${min}.`,\r\n        code: `currency-${currency.slug}`,\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Checks if values of option's currencies are less than minimum.\r\n * @param {object} option The option to be checked.\r\n * @param {object} options Global options.\r\n * @param {array} errors Error array to push errors into.\r\n */\r\nfunction checkOptionCurrencies(option, options, errors) {\r\n  if (option.optionCurrency === undefined) return;\r\n  for (const currencySlug in option.optionCurrency) {\r\n    const currency = option.optionCurrency[currencySlug];\r\n    const min = currency.min === undefined ? 0 : currency.min;\r\n\r\n    if (min !== false && currency.currentValue < min) {\r\n      errors.push({\r\n        path: option.path,\r\n        text: `Currency ${currency.name} in ${getReadablePath(option.path, options)} cannot be below ${min}.`,\r\n        code: `currency-${option.path}-${currency.slug}`,\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\n/** Checks if an option is selected less than minimum or more than maximum times.\r\n * @param {object} option The option to be checked.\r\n * @param {object} options Global options.\r\n * @param {array} errors Error array to push errors into.\r\n */\r\nfunction checkMinMaxSelected(option, options, errors) {\r\n  if (option.min === false && option.max === false) return;\r\n  const selectedCount = getSelectedCount(option, options);\r\n  if (option.min !== false) {\r\n    if (selectedCount < option.min) {\r\n      errors.push({\r\n        path: option.path,\r\n        text: `Option ${getReadablePath(option.path, options)} cannot have less than ${option.min} selected.`,\r\n        code: `option-${option.path}-min`,\r\n      });\r\n    }\r\n  }\r\n  if (option.max !== false) {\r\n    if (selectedCount > option.max) {\r\n      errors.push({\r\n        path: option.path,\r\n        text: `Option ${getReadablePath(option.path, options)} cannot have more than ${option.max} selected.`,\r\n        code: `option-${option.path}-max`,\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Checks options for errors.\r\n * @param {object} options Global options.\r\n * @param {object} currentOptions Options to be checked.\r\n * @param {array} errors Error array to push errors into.\r\n */\r\nfunction checkOptions(options, errors, currentOptions = options) {\r\n  for (const slug in currentOptions) {\r\n    const option = currentOptions[slug];\r\n    if (isOptionDisabled(option, options)) continue;\r\n    checkMinMaxSelected(option, options, errors);\r\n    checkOptionCurrencies(option, options, errors);\r\n    const childOptions = getSubptions(option, options);\r\n    if (childOptions !== undefined) {\r\n      checkOptions(options, errors, childOptions);\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Finds errors in selected options.\r\n * @param {object} state Global state.\r\n */\r\nexport default function findErrors(state) {\r\n  state.errors = [];\r\n  checkOptions(state.options, state.errors);\r\n  checkGlobalCurrencies(state.settings, state.options, state.errors);\r\n}\r\n","import getSelectedCount from \"../functions/getSelectedCount\";\r\nimport getUserFunctionValue from \"../functions/getUserFunctionValue\";\r\n\r\nexport default function runUserFunctions(option, state, keys) {\r\n  for (const key of keys) {\r\n    if (key === 'cost') {\r\n      if (option.cost !== undefined) {\r\n        for (const currencySlug in option.cost) {\r\n          const currency = option.cost[currencySlug];\r\n\r\n          if (currency === null || !currency.isUserFunction) continue;\r\n          const selectedCount = getSelectedCount(option, state.options);\r\n          let cost = 0;\r\n          for (let i = 0; i < selectedCount; i++) {\r\n            cost += getUserFunctionValue(currency, {\r\n              index: i,\r\n              option,\r\n            }, false);\r\n          }\r\n          currency.value = cost;\r\n          getUserFunctionValue(currency, {\r\n            index: selectedCount,\r\n            option,\r\n          }, 'nextValue');\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      getUserFunctionValue(option[key], { option });\r\n    }\r\n  }\r\n}","function clearUserFunction(userFunction, propName = 'value') {\r\n  if (userFunction === undefined) return;\r\n  if (userFunction.isUserFunction) userFunction[propName] = undefined;\r\n}\r\n\r\nexport default function clearUserFunctions(option, keys) {\r\n  for (const key of keys) {\r\n    if (key === 'cost') {\r\n      if (option.cost !== undefined) {\r\n        for (const currencySlug in option.cost) {\r\n          const currency = option.cost[currencySlug];\r\n          if (currency === null || !currency.isUserFunction) continue;\r\n          clearUserFunction(currency);\r\n          clearUserFunction(currency, 'nextValue');\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      clearUserFunction(option[key]);\r\n    }\r\n  }\r\n}","import calculateCurrency from \"./calculateCurrency\";\r\nimport findErrors from './findErrors';\r\nimport getSubptions from \"../functions/getSubptions\";\r\nimport isOptionDisabled from \"../functions/isOptionDisabled\";\r\nimport createSyntheticOptions from './createSyntheticOptions';\r\nimport runUserFunctions from \"./runUserFunctions\";\r\nimport clearUserFunctions from \"./clearUserFunctions\";\r\nimport getSelectedCount from \"../functions/getSelectedCount\";\r\n\r\nfunction getInfo(option, parentOption, state) {\r\n  option.info = {\r\n    isDisabled: parentOption.info.isDisabled || isOptionDisabled(option, state.options),\r\n    isSelected: getSelectedCount(option, state.options) > 0,\r\n  };\r\n}\r\n\r\nfunction forEachOption(parentOption, state, callback, prepareCallback) {\r\n  if (prepareCallback !== undefined) {\r\n    prepareCallback(parentOption, state);\r\n  }\r\n  const suboptions = getSubptions(parentOption, state.options);\r\n\r\n  for (const slug in suboptions) {\r\n    const option = suboptions[slug];\r\n    callback(option, parentOption, state);\r\n    forEachOption(option, state, callback, prepareCallback);\r\n  }\r\n}\r\n\r\nfunction checkCurrencies(currentOptions, currencies, options) {\r\n  for (const currencySlug in currencies) {\r\n    currencies[currencySlug].currentValue = currencies[currencySlug].value;\r\n  }\r\n  calculateCurrency(currentOptions, currencies, options);\r\n}\r\n\r\nexport default function recalculateState(state) {\r\n  forEachOption(state, state, option => {\r\n    clearUserFunctions(option, ['test', 'cost', 'options']);\r\n  });\r\n  forEachOption(state, state, (option, parentOption, innerState) => {\r\n    getInfo(option, parentOption, innerState);\r\n    runUserFunctions(option, innerState, ['test', 'cost', 'options']);\r\n  }, (parentOption, innerState) => {\r\n    if (parentOption.info === undefined) {\r\n      parentOption.info = {};\r\n    }\r\n    createSyntheticOptions(parentOption, innerState.options);\r\n  });\r\n\r\n  forEachOption(state, state, (option, parentOption, innerState) => {\r\n    if (option.optionCurrency !== undefined) {\r\n      checkCurrencies(option.options, option.optionCurrency, innerState.options);\r\n    }\r\n  });\r\n  checkCurrencies(state.options, state.settings.currency, state.options);\r\n  findErrors(state);\r\n\r\n  forEachOption(state, state, option => {\r\n    clearUserFunctions(option, ['text']);\r\n  });\r\n  forEachOption(state, state, (option, parentOption, innerState) => {\r\n    runUserFunctions(option, innerState, ['text']);\r\n  });\r\n}","import isOptionDisabled from '../functions/isOptionDisabled';\r\nimport getSubptions from \"../functions/getSubptions\";\r\nimport getSelectedCount from '../functions/getSelectedCount';\r\n\r\n/**\r\n * Calculate how much of each currency is left.\r\n * @param {object} currentOptions Options to check.\r\n * @param {object} currentValues Current currency values.\r\n * @param {object} options Global options.\r\n */\r\nexport default function calculateCurrency(currentOptions, currentValues, options) {\r\n  for (const slug in currentOptions) {\r\n    const option = currentOptions[slug];\r\n    if (isOptionDisabled(option, options))\r\n      continue;\r\n    if (option.type === 'option') {\r\n      const selectedCount = getSelectedCount(option, options);\r\n      if (selectedCount > 0 && option.cost !== undefined) {\r\n        for (const currencySlug in option.cost) {\r\n          if (currentValues[currencySlug] === undefined)\r\n            continue;\r\n          let change = 0;\r\n          if (option.cost[currencySlug].isUserFunction) {\r\n            change = option.cost[currencySlug].value;\r\n          }\r\n          else {\r\n            change = option.cost[currencySlug].value * selectedCount;\r\n          }\r\n          currentValues[currencySlug].currentValue -= change;\r\n        }\r\n      }\r\n    }\r\n    const childOptions = getSubptions(option, options);\r\n    currentValues = calculateCurrency(childOptions, currentValues, options);\r\n  }\r\n  return currentValues;\r\n}\r\n","import prepareOptions from \"./prepareOptions\";\r\nimport { clone } from \"../functions/helpers\";\r\n\r\nexport default function createSyntheticOptions(option, options) {\r\n  if (option.options === undefined || !option.options.isUserFunction) return;\r\n\r\n  const syntheticOptions = clone(option.options.value);\r\n  for (const slug in syntheticOptions) {\r\n    syntheticOptions[slug] = {\r\n      ...syntheticOptions[slug],\r\n      isSynthetic: true,\r\n      selected: 0,\r\n    };\r\n    if (option.functionalChildren[slug] !== undefined) {\r\n      Object.assign(syntheticOptions[slug], option.functionalChildren[slug]);\r\n    }\r\n    if (syntheticOptions[slug].path === undefined) {\r\n      syntheticOptions[slug] = prepareOptions(\r\n        { [slug]: syntheticOptions[slug] },\r\n        option.path,\r\n        options\r\n      )[slug];\r\n    }\r\n  }\r\n\r\n  option.functionalChildren = syntheticOptions;\r\n}","import { createStore } from 'redux';\r\nimport produce from 'immer';\r\nimport options from './options';\r\nimport settings from './settings';\r\nimport prepareOptions from './reducer/prepareOptions';\r\nimport buyOption from \"./reducer/buyOption\";\r\nimport sellOption from \"./reducer/sellOption\";\r\nimport tradeOption from './reducer/tradeOption';\r\nimport getOption from './functions/getOption';\r\nimport recalculateState from './reducer/recalculateState';\r\nimport pipe from './pipe';\r\n\r\nconst initialState = {\r\n  path: [],\r\n  settings,\r\n  options: prepareOptions(options, undefined),\r\n  errors: [],\r\n};\r\n\r\nfunction rootReducer(state = initialState, action = '') {\r\n  return produce(state, newState => {\r\n    pipe.state = newState;\r\n    let skipRecalculate = false;\r\n    if (action.type === 'BUY_OPTION') {\r\n      buyOption(action.option, newState.options);\r\n    }\r\n    else if (action.type === 'SELL_OPTION') {\r\n      sellOption(action.option, newState.options, newState.path);\r\n    }\r\n    else if (action.type === 'TRADE_OPTION') {\r\n      tradeOption(action.option, newState.options, action.value);\r\n    }\r\n    else if (action.type === 'CHANGE_PATH') {\r\n      const newPath = action.path.filter(e => e !== '');\r\n      if (newPath.length > newState.path.length) {\r\n        for (let i = 0; i < newPath.length; i++) {\r\n          if (i < newState.path.length) {\r\n            newPath[i] = newState.path[i];\r\n          }\r\n          else {\r\n            newPath[i] = {\r\n              slug: newPath[i],\r\n              scroll: 0,\r\n            };\r\n            if (i === newState.path.length) {\r\n              newPath[i].scroll = action.scroll;\r\n            }\r\n          }\r\n        }\r\n        pipe.scroll = 0;\r\n        newState.path = newPath;\r\n      }\r\n      else {\r\n        pipe.scroll = newState.path[newPath.length].scroll;\r\n        newState.path.splice(newPath.length);\r\n      }\r\n\r\n      skipRecalculate = true;\r\n    }\r\n    else if (action.type === 'CHANGE_TEXT') {\r\n      getOption(action.option, newState.options)[action.textProp] = action.text;\r\n      skipRecalculate = true;\r\n    }\r\n\r\n    if (!skipRecalculate) {\r\n      recalculateState(newState);\r\n    }\r\n\r\n    return newState;\r\n  });\r\n}\r\n\r\nconst store = createStore(\r\n  rootReducer,\r\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\r\n);\r\n\r\nexport default store;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport App from './App';\r\nimport store from './store';\r\n\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);"],"sourceRoot":""}